/*! Eleventy Template Engine: Liquid */
var is=Object.create;var Be=Object.defineProperty;var ns=Object.getOwnPropertyDescriptor;var ss=Object.getOwnPropertyNames;var os=Object.getPrototypeOf,as=Object.prototype.hasOwnProperty;var s=(t,e)=>Be(t,"name",{value:e,configurable:!0}),yi=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ls=(t,e)=>()=>(t&&(e=t(t=0)),e);var J=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),us=(t,e)=>{for(var r in e)Be(t,r,{get:e[r],enumerable:!0})},wi=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ss(e))!as.call(t,n)&&n!==r&&Be(t,n,{get:()=>e[n],enumerable:!(i=ns(e,n))||i.enumerable});return t};var bi=(t,e,r)=>(r=t!=null?is(os(t)):{},wi(e||!t||!t.__esModule?Be(r,"default",{value:t,enumerable:!0}):r,t)),cs=t=>wi(Be({},"__esModule",{value:!0}),t);var xi=J((vi,at)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof at=="object"&&at.exports?at.exports=e():t.moo=e()})(vi,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function i(u){return u&&e.call(u)==="[object RegExp]"}s(i,"isRegExp");function n(u){return u&&typeof u=="object"&&!i(u)&&!Array.isArray(u)}s(n,"isObject");function o(u){return u.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}s(o,"reEscape");function a(u){var f=new RegExp("|"+u);return f.exec("").length-1}s(a,"reGroups");function l(u){return"("+u+")"}s(l,"reCapture");function c(u){if(!u.length)return"(?!)";var f=u.map(function(p){return"(?:"+p+")"}).join("|");return"(?:"+f+")"}s(c,"reUnion");function h(u){if(typeof u=="string")return"(?:"+o(u)+")";if(i(u)){if(u.ignoreCase)throw new Error("RegExp /i flag not allowed");if(u.global)throw new Error("RegExp /g flag is implied");if(u.sticky)throw new Error("RegExp /y flag is implied");if(u.multiline)throw new Error("RegExp /m flag is implied");return u.source}else throw new Error("Not a pattern: "+u)}s(h,"regexpOrLiteral");function d(u,f){return u.length>f?u:Array(f-u.length+1).join(" ")+u}s(d,"pad");function m(u,f){for(var p=u.length,y=0;;){var x=u.lastIndexOf(`
`,p-1);if(x===-1||(y++,p=x,y===f)||p===0)break}var b=y<f?0:p+1;return u.substring(b).split(`
`)}s(m,"lastNLines");function T(u){for(var f=Object.getOwnPropertyNames(u),p=[],y=0;y<f.length;y++){var x=f[y],b=u[x],_=[].concat(b);if(x==="include"){for(var q=0;q<_.length;q++)p.push({include:_[q]});continue}var E=[];_.forEach(function(S){n(S)?(E.length&&p.push(j(x,E)),p.push(j(x,S)),E=[]):E.push(S)}),E.length&&p.push(j(x,E))}return p}s(T,"objectToRules");function O(u){for(var f=[],p=0;p<u.length;p++){var y=u[p];if(y.include){for(var x=[].concat(y.include),b=0;b<x.length;b++)f.push({include:x[b]});continue}if(!y.type)throw new Error("Rule has no type: "+JSON.stringify(y));f.push(j(y.type,y))}return f}s(O,"arrayToRules");function j(u,f){if(n(f)||(f={match:f}),f.include)throw new Error("Matching rules cannot also include states");var p={defaultType:u,lineBreaks:!!f.error||!!f.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var y in f)t.call(f,y)&&(p[y]=f[y]);if(typeof p.type=="string"&&u!==p.type)throw new Error("Type transform cannot be a string (type '"+p.type+"' for token '"+u+"')");var x=p.match;return p.match=Array.isArray(x)?x:x?[x]:[],p.match.sort(function(b,_){return i(b)&&i(_)?0:i(_)?-1:i(b)?1:_.length-b.length}),p}s(j,"ruleOptions");function D(u){return Array.isArray(u)?O(u):T(u)}s(D,"toRules");var ae=j("error",{lineBreaks:!0,shouldThrow:!0});function xe(u,f){for(var p=null,y=Object.create(null),x=!0,b=null,_=[],q=[],E=0;E<u.length;E++)u[E].fallback&&(x=!1);for(var E=0;E<u.length;E++){var S=u[E];if(S.include)throw new Error("Inheritance is not allowed in stateless lexers");if(S.error||S.fallback){if(p)throw!S.fallback==!p.fallback?new Error("Multiple "+(S.fallback?"fallback":"error")+" rules not allowed (for token '"+S.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+S.defaultType+"')");p=S}var I=S.match.slice();if(x)for(;I.length&&typeof I[0]=="string"&&I[0].length===1;){var ke=I.shift();y[ke.charCodeAt(0)]=S}if(S.pop||S.push||S.next){if(!f)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+S.defaultType+"')");if(S.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+S.defaultType+"')")}if(I.length!==0){x=!1,_.push(S);for(var Te=0;Te<I.length;Te++){var Oe=I[Te];if(i(Oe)){if(b===null)b=Oe.unicode;else if(b!==Oe.unicode&&S.fallback===!1)throw new Error("If one rule is /u then all must be")}}var De=c(I.map(h)),te=new RegExp(De);if(te.test(""))throw new Error("RegExp matches empty string: "+te);var $e=a(De);if($e>0)throw new Error("RegExp has capture groups: "+te+`
Use (?: \u2026 ) instead`);if(!S.lineBreaks&&te.test(`
`))throw new Error("Rule should declare lineBreaks: "+te);q.push(l(De))}}var qe=p&&p.fallback,Ve=r&&!qe?"ym":"gm",ot=r||qe?"":"|";b===!0&&(Ve+="u");var rs=new RegExp(c(q)+ot,Ve);return{regexp:rs,groups:_,fast:y,error:p||ae}}s(xe,"compileRules");function Se(u){var f=xe(D(u));return new M({start:f},"start")}s(Se,"compile");function A(u,f,p){var y=u&&(u.push||u.next);if(y&&!p[y])throw new Error("Missing state '"+y+"' (in token '"+u.defaultType+"' of state '"+f+"')");if(u&&u.pop&&+u.pop!=1)throw new Error("pop must be 1 (in token '"+u.defaultType+"' of state '"+f+"')")}s(A,"checkStateGroup");function w(u,f){var p=u.$all?D(u.$all):[];delete u.$all;var y=Object.getOwnPropertyNames(u);f||(f=y[0]);for(var x=Object.create(null),b=0;b<y.length;b++){var _=y[b];x[_]=D(u[_]).concat(p)}for(var b=0;b<y.length;b++)for(var _=y[b],q=x[_],E=Object.create(null),S=0;S<q.length;S++){var I=q[S];if(I.include){var ke=[S,1];if(I.include!==_&&!E[I.include]){E[I.include]=!0;var Te=x[I.include];if(!Te)throw new Error("Cannot include nonexistent state '"+I.include+"' (in state '"+_+"')");for(var Oe=0;Oe<Te.length;Oe++){var De=Te[Oe];q.indexOf(De)===-1&&ke.push(De)}}q.splice.apply(q,ke),S--}}for(var te=Object.create(null),b=0;b<y.length;b++){var _=y[b];te[_]=xe(x[_],!0)}for(var b=0;b<y.length;b++){for(var $e=y[b],qe=te[$e],Ve=qe.groups,S=0;S<Ve.length;S++)A(Ve[S],$e,te);for(var ot=Object.getOwnPropertyNames(qe.fast),S=0;S<ot.length;S++)A(qe.fast[ot[S]],$e,te)}return new M(te,f)}s(w,"compileStates");function ne(u){for(var f=typeof Map<"u",p=f?new Map:Object.create(null),y=Object.getOwnPropertyNames(u),x=0;x<y.length;x++){var b=y[x],_=u[b],q=Array.isArray(_)?_:[_];q.forEach(function(E){if(typeof E!="string")throw new Error("keyword must be string (in keyword '"+b+"')");f?p.set(E,b):p[E]=b})}return function(E){return f?p.get(E):p[E]}}s(ne,"keywordTransform");var M=s(function(u,f){this.startState=f,this.states=u,this.buffer="",this.stack=[],this.reset()},"Lexer");M.prototype.reset=function(u,f){return this.buffer=u||"",this.index=0,this.line=f?f.line:1,this.col=f?f.col:1,this.queuedToken=f?f.queuedToken:null,this.queuedText=f?f.queuedText:"",this.queuedThrow=f?f.queuedThrow:null,this.setState(f?f.state:this.startState),this.stack=f&&f.stack?f.stack.slice():[],this},M.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},M.prototype.setState=function(u){if(!(!u||this.state===u)){this.state=u;var f=this.states[u];this.groups=f.groups,this.error=f.error,this.re=f.regexp,this.fast=f.fast}},M.prototype.popState=function(){this.setState(this.stack.pop())},M.prototype.pushState=function(u){this.stack.push(this.state),this.setState(u)};var se=r?function(u,f){return u.exec(f)}:function(u,f){var p=u.exec(f);return p[0].length===0?null:p};M.prototype._getGroup=function(u){for(var f=this.groups.length,p=0;p<f;p++)if(u[p+1]!==void 0)return this.groups[p];throw new Error("Cannot find token type for matched text")};function Re(){return this.value}if(s(Re,"tokenToString"),M.prototype.next=function(){var u=this.index;if(this.queuedGroup){var f=this._token(this.queuedGroup,this.queuedText,u);return this.queuedGroup=null,this.queuedText="",f}var p=this.buffer;if(u!==p.length){var _=this.fast[p.charCodeAt(u)];if(_)return this._token(_,p.charAt(u),u);var y=this.re;y.lastIndex=u;var x=se(y,p),b=this.error;if(x==null)return this._token(b,p.slice(u,p.length),u);var _=this._getGroup(x),q=x[0];return b.fallback&&x.index!==u?(this.queuedGroup=_,this.queuedText=q,this._token(b,p.slice(u,x.index),u)):this._token(_,q,u)}},M.prototype._token=function(u,f,p){var y=0;if(u.lineBreaks){var x=/\n/g,b=1;if(f===`
`)y=1;else for(;x.exec(f);)y++,b=x.lastIndex}var _={type:typeof u.type=="function"&&u.type(f)||u.defaultType,value:typeof u.value=="function"?u.value(f):f,text:f,toString:Re,offset:p,lineBreaks:y,line:this.line,col:this.col},q=f.length;if(this.index+=q,this.line+=y,y!==0?this.col=q-b+1:this.col+=q,u.shouldThrow){var E=new Error(this.formatError(_,"invalid syntax"));throw E}return u.pop?this.popState():u.push?this.pushState(u.push):u.next&&this.setState(u.next),_},typeof Symbol<"u"&&Symbol.iterator){var ge=s(function(u){this.lexer=u},"LexerIterator");ge.prototype.next=function(){var u=this.lexer.next();return{value:u,done:!u}},ge.prototype[Symbol.iterator]=function(){return this},M.prototype[Symbol.iterator]=function(){return new ge(this)}}return M.prototype.formatError=function(u,f){if(u==null)var p=this.buffer.slice(this.index),u={text:p,offset:this.index,lineBreaks:p.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var y=2,x=Math.max(u.line-y,1),b=u.line+y,_=String(b).length,q=m(this.buffer,this.line-u.line+y+1).slice(0,5),E=[];E.push(f+" at line "+u.line+" col "+u.col+":"),E.push("");for(var S=0;S<q.length;S++){var I=q[S],ke=x+S;E.push(d(String(ke),_)+"  "+I),ke===u.line&&E.push(d("",_+u.col+1)+"^")}return E.join(`
`)},M.prototype.clone=function(){return new M(this.states,this.state)},M.prototype.has=function(u){return!0},{compile:Se,states:w,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ne}})});var bn=J((Yl,wn)=>{wn.exports=s(function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},"isBuffer")});var vn=J((Zl,Qr)=>{typeof Object.create=="function"?Qr.exports=s(function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},"inherits"):Qr.exports=s(function(e,r){e.super_=r;var i=s(function(){},"TempCtor");i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e},"inherits")});var Tn=J(F=>{var il=/%[sdj%]/g;F.format=function(t){if(!Nt(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(ve(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,n=i.length,o=String(t).replace(il,function(l){if(l==="%%")return"%";if(r>=n)return l;switch(l){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch{return"[Circular]"}default:return l}}),a=i[r];r<n;a=i[++r])jt(a)||!Me(a)?o+=" "+a:o+=" "+ve(a);return o};F.deprecate=function(t,e){if(pe(global.process))return function(){return F.deprecate(t,e).apply(this,arguments)};if(process.noDeprecation===!0)return t;var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return s(i,"deprecated"),i};var zt={},Xr;F.debuglog=function(t){if(pe(Xr)&&(Xr=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!zt[t])if(new RegExp("\\b"+t+"\\b","i").test(Xr)){var e=process.pid;zt[t]=function(){var r=F.format.apply(F,arguments);console.error("%s %d: %s",t,e,r)}}else zt[t]=function(){};return zt[t]};function ve(t,e){var r={seen:[],stylize:sl};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),ii(e)?r.showHidden=e:e&&F._extend(r,e),pe(r.showHidden)&&(r.showHidden=!1),pe(r.depth)&&(r.depth=2),pe(r.colors)&&(r.colors=!1),pe(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=nl),Pt(r,t,r.depth)}s(ve,"inspect");F.inspect=ve;ve.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ve.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function nl(t,e){var r=ve.styles[e];return r?"\x1B["+ve.colors[r][0]+"m"+t+"\x1B["+ve.colors[r][1]+"m":t}s(nl,"stylizeWithColor");function sl(t,e){return t}s(sl,"stylizeNoColor");function ol(t){var e={};return t.forEach(function(r,i){e[r]=!0}),e}s(ol,"arrayToHash");function Pt(t,e,r){if(t.customInspect&&e&&qt(e.inspect)&&e.inspect!==F.inspect&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(r,t);return Nt(i)||(i=Pt(t,i,r)),i}var n=al(t,e);if(n)return n;var o=Object.keys(e),a=ol(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Dt(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Kr(e);if(o.length===0){if(qt(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(Rt(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ri(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Dt(e))return Kr(e)}var c="",h=!1,d=["{","}"];if(xn(e)&&(h=!0,d=["[","]"]),qt(e)){var m=e.name?": "+e.name:"";c=" [Function"+m+"]"}if(Rt(e)&&(c=" "+RegExp.prototype.toString.call(e)),ri(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Dt(e)&&(c=" "+Kr(e)),o.length===0&&(!h||e.length==0))return d[0]+c+d[1];if(r<0)return Rt(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var T;return h?T=ll(t,e,r,a,o):T=o.map(function(O){return ti(t,e,r,a,O,h)}),t.seen.pop(),ul(T,c,d)}s(Pt,"formatValue");function al(t,e){if(pe(e))return t.stylize("undefined","undefined");if(Nt(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Sn(e))return t.stylize(""+e,"number");if(ii(e))return t.stylize(""+e,"boolean");if(jt(e))return t.stylize("null","null")}s(al,"formatPrimitive");function Kr(t){return"["+Error.prototype.toString.call(t)+"]"}s(Kr,"formatError");function ll(t,e,r,i,n){for(var o=[],a=0,l=e.length;a<l;++a)kn(e,String(a))?o.push(ti(t,e,r,i,String(a),!0)):o.push("");return n.forEach(function(c){c.match(/^\d+$/)||o.push(ti(t,e,r,i,c,!0))}),o}s(ll,"formatArray");function ti(t,e,r,i,n,o){var a,l,c;if(c=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},c.get?c.set?l=t.stylize("[Getter/Setter]","special"):l=t.stylize("[Getter]","special"):c.set&&(l=t.stylize("[Setter]","special")),kn(i,n)||(a="["+n+"]"),l||(t.seen.indexOf(c.value)<0?(jt(r)?l=Pt(t,c.value,null):l=Pt(t,c.value,r-1),l.indexOf(`
`)>-1&&(o?l=l.split(`
`).map(function(h){return"  "+h}).join(`
`).substr(2):l=`
`+l.split(`
`).map(function(h){return"   "+h}).join(`
`))):l=t.stylize("[Circular]","special")),pe(a)){if(o&&n.match(/^\d+$/))return l;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+l}s(ti,"formatProperty");function ul(t,e,r){var i=0,n=t.reduce(function(o,a){return i++,a.indexOf(`
`)>=0&&i++,o+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}s(ul,"reduceToSingleString");function xn(t){return Array.isArray(t)}s(xn,"isArray");F.isArray=xn;function ii(t){return typeof t=="boolean"}s(ii,"isBoolean");F.isBoolean=ii;function jt(t){return t===null}s(jt,"isNull");F.isNull=jt;function cl(t){return t==null}s(cl,"isNullOrUndefined");F.isNullOrUndefined=cl;function Sn(t){return typeof t=="number"}s(Sn,"isNumber");F.isNumber=Sn;function Nt(t){return typeof t=="string"}s(Nt,"isString");F.isString=Nt;function hl(t){return typeof t=="symbol"}s(hl,"isSymbol");F.isSymbol=hl;function pe(t){return t===void 0}s(pe,"isUndefined");F.isUndefined=pe;function Rt(t){return Me(t)&&ni(t)==="[object RegExp]"}s(Rt,"isRegExp");F.isRegExp=Rt;function Me(t){return typeof t=="object"&&t!==null}s(Me,"isObject");F.isObject=Me;function ri(t){return Me(t)&&ni(t)==="[object Date]"}s(ri,"isDate");F.isDate=ri;function Dt(t){return Me(t)&&(ni(t)==="[object Error]"||t instanceof Error)}s(Dt,"isError");F.isError=Dt;function qt(t){return typeof t=="function"}s(qt,"isFunction");F.isFunction=qt;function fl(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}s(fl,"isPrimitive");F.isPrimitive=fl;F.isBuffer=bn();function ni(t){return Object.prototype.toString.call(t)}s(ni,"objectToString");function ei(t){return t<10?"0"+t.toString(10):t.toString(10)}s(ei,"pad");var dl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pl(){var t=new Date,e=[ei(t.getHours()),ei(t.getMinutes()),ei(t.getSeconds())].join(":");return[t.getDate(),dl[t.getMonth()],e].join(" ")}s(pl,"timestamp");F.log=function(){console.log("%s - %s",pl(),F.format.apply(F,arguments))};F.inherits=vn();F._extend=function(t,e){if(!e||!Me(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t};function kn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(kn,"hasOwnProperty")});var Ln=J((eu,et)=>{"use strict";var gl=process.platform==="win32",ie=Tn();function Mt(t,e){for(var r=[],i=0;i<t.length;i++){var n=t[i];!n||n==="."||(n===".."?r.length&&r[r.length-1]!==".."?r.pop():e&&r.push(".."):r.push(n))}return r}s(Mt,"normalizeArray");function Ke(t){for(var e=t.length-1,r=0;r<=e&&!t[r];r++);for(var i=e;i>=0&&!t[i];i--);return r===0&&i===e?t:r>i?[]:t.slice(r,i+1)}s(Ke,"trimArray");var On=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,ml=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,C={};function Ct(t){var e=On.exec(t),r=(e[1]||"")+(e[2]||""),i=e[3]||"",n=ml.exec(i),o=n[1],a=n[2],l=n[3];return[r,o,a,l]}s(Ct,"win32SplitPath");function si(t){var e=On.exec(t),r=e[1]||"",i=!!r&&r[1]!==":";return{device:r,isUnc:i,isAbsolute:i||!!e[2],tail:e[3]}}s(si,"win32StatPath");function _n(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}s(_n,"normalizeUNCRoot");C.resolve=function(){for(var t="",e="",r=!1,i=arguments.length-1;i>=-1;i--){var n;if(i>=0?n=arguments[i]:t?(n=process.env["="+t],(!n||n.substr(0,3).toLowerCase()!==t.toLowerCase()+"\\")&&(n=t+"\\")):n=process.cwd(),ie.isString(n)){if(!n)continue}else throw new TypeError("Arguments to path.resolve must be strings");var o=si(n),a=o.device,l=o.isUnc,c=o.isAbsolute,h=o.tail;if(!(a&&t&&a.toLowerCase()!==t.toLowerCase())&&(t||(t=a),r||(e=h+"\\"+e,r=c),t&&r))break}return l&&(t=_n(t)),e=Mt(e.split(/[\\\/]+/),!r).join("\\"),t+(r?"\\":"")+e||"."};C.normalize=function(t){var e=si(t),r=e.device,i=e.isUnc,n=e.isAbsolute,o=e.tail,a=/[\\\/]$/.test(o);return o=Mt(o.split(/[\\\/]+/),!n).join("\\"),!o&&!n&&(o="."),o&&a&&(o+="\\"),i&&(r=_n(r)),r+(n?"\\":"")+o};C.isAbsolute=function(t){return si(t).isAbsolute};C.join=function(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(!ie.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&t.push(r)}var i=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),C.normalize(i)};C.relative=function(t,e){t=C.resolve(t),e=C.resolve(e);for(var r=t.toLowerCase(),i=e.toLowerCase(),n=Ke(e.split("\\")),o=Ke(r.split("\\")),a=Ke(i.split("\\")),l=Math.min(o.length,a.length),c=l,h=0;h<l;h++)if(o[h]!==a[h]){c=h;break}if(c==0)return e;for(var d=[],h=c;h<o.length;h++)d.push("..");return d=d.concat(n.slice(c)),d.join("\\")};C._makeLong=function(t){if(!ie.isString(t))return t;if(!t)return"";var e=C.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t};C.dirname=function(t){var e=Ct(t),r=e[0],i=e[1];return!r&&!i?".":(i&&(i=i.substr(0,i.length-1)),r+i)};C.basename=function(t,e){var r=Ct(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r};C.extname=function(t){return Ct(t)[3]};C.format=function(t){if(!ie.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!ie.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var r=t.dir,i=t.base||"";return r?r[r.length-1]===C.sep?r+i:r+C.sep+i:i};C.parse=function(t){if(!ie.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=Ct(t);if(!e||e.length!==4)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}};C.sep="\\";C.delimiter=";";var yl=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,$={};function $t(t){return yl.exec(t).slice(1)}s($t,"posixSplitPath");$.resolve=function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var i=r>=0?arguments[r]:process.cwd();if(ie.isString(i)){if(!i)continue}else throw new TypeError("Arguments to path.resolve must be strings");t=i+"/"+t,e=i[0]==="/"}return t=Mt(t.split("/"),!e).join("/"),(e?"/":"")+t||"."};$.normalize=function(t){var e=$.isAbsolute(t),r=t&&t[t.length-1]==="/";return t=Mt(t.split("/"),!e).join("/"),!t&&!e&&(t="."),t&&r&&(t+="/"),(e?"/":"")+t};$.isAbsolute=function(t){return t.charAt(0)==="/"};$.join=function(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];if(!ie.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&(t?t+="/"+r:t+=r)}return $.normalize(t)};$.relative=function(t,e){t=$.resolve(t).substr(1),e=$.resolve(e).substr(1);for(var r=Ke(t.split("/")),i=Ke(e.split("/")),n=Math.min(r.length,i.length),o=n,a=0;a<n;a++)if(r[a]!==i[a]){o=a;break}for(var l=[],a=o;a<r.length;a++)l.push("..");return l=l.concat(i.slice(o)),l.join("/")};$._makeLong=function(t){return t};$.dirname=function(t){var e=$t(t),r=e[0],i=e[1];return!r&&!i?".":(i&&(i=i.substr(0,i.length-1)),r+i)};$.basename=function(t,e){var r=$t(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r};$.extname=function(t){return $t(t)[3]};$.format=function(t){if(!ie.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!ie.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var r=t.dir?t.dir+$.sep:"",i=t.base||"";return r+i};$.parse=function(t){if(!ie.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=$t(t);if(!e||e.length!==4)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}};$.sep="/";$.delimiter=":";gl?et.exports=C:et.exports=$;et.exports.posix=$;et.exports.win32=C});var Rn={};us(Rn,{default:()=>vl,existsSync:()=>En,mkdir:()=>wl,mkdirSync:()=>Fn,readFileSync:()=>An,statSync:()=>bl,writeFileSync:()=>zn});function tt(){throw new Error("This function is not allowed in-browser.")}var wl,En,Fn,An,bl,zn,vl,Dn=ls(()=>{s(tt,"noopError");wl=tt,En=s(function(){return!1},"existsSync"),Fn=tt,An=tt,bl=tt,zn=tt,vl={readFileSync:An,existsSync:En,mkdirSync:Fn,writeFileSync:zn}});var Pn=J((iu,qn)=>{var ee=Ln(),oi=(Dn(),cs(Rn));function v(){}s(v,"TemplatePath");v.getWorkingDir=function(){return v.normalize(ee.resolve("."))};v.getDir=function(t){return v.isDirectorySync(t)?t:v.getDirFromFilePath(t)};v.getDirFromFilePath=function(t){return ee.parse(t).dir||"."};v.getLastPathSegment=function(t){return t.includes("/")?(t=t.replace(/\/$/,""),t.slice(t.lastIndexOf("/")+1)):t};v.getAllDirs=function(t){return t=t.replace(/\/$/,""),t.includes("/")?t.split("/").map((e,r,i)=>i.slice(0,r+1).join("/")).filter(e=>e!==".").reverse():[t]};v.normalize=function(t){let e=ee.normalize(t).split(ee.sep).join("/");return e!=="/"&&e.endsWith("/")?e.slice(0,-1):e};v.join=function(...t){return v.normalize(ee.join(...t))};v.normalizeUrlPath=function(...t){return ee.posix.join(...t).replace(/\/+$/,"/")};v.absolutePath=function(...t){let e=0;for(let i of t){if(ee.isAbsolute(i)&&e>0)throw new Error(`Only the first parameter to Template.absolutePath can be an absolute path. Received: ${i} from ${t}`);e++}let r=0;for(let i of t){if(r===0&&ee.isAbsolute(i))return v.join(...t);r++}return v.join(v.getWorkingDir(),...t)};v.relativePath=function(t){return v.stripLeadingSubPath(t,v.getWorkingDir())};v.addLeadingDotSlashArray=function(t){return t.map(e=>v.addLeadingDotSlash(e))};v.addLeadingDotSlash=function(t){return t==="."||t===".."?t+"/":ee.isAbsolute(t)||t.startsWith("./")||t.startsWith("../")?t:"./"+t};v.stripLeadingDotSlash=function(t){return typeof t=="string"?t.replace(/^\.\//,""):t};v.startsWithSubPath=function(t,e){return t=v.normalize(t),e=v.normalize(e),t.startsWith(e)};v.stripLeadingSubPath=function(t,e){return t=v.normalize(t),e=v.normalize(e),e!=="."&&t.startsWith(e)?t.slice(e.length+1):t};v.isDirectorySync=function(t){return oi.existsSync(t)&&oi.statSync(t).isDirectory()};v.isDirectory=async function(t){return new Promise(e=>{oi.stat(t,(r,i)=>{i&&e(i.isDirectory()),e(!1)})})};v.convertToRecursiveGlobSync=function(t){return t===""?"./**":(t=v.addLeadingDotSlash(t),v.isDirectorySync(t)?t+(t.endsWith("/")?"":"/")+"**":t)};v.convertToRecursiveGlob=async function(t){return t===""?"./**":(t=v.addLeadingDotSlash(t),await v.isDirectory(t)?t+(t.endsWith("/")?"":"/")+"**":t)};v.getExtension=function(t){return ee.extname(t).replace(/^\./,"")};v.removeExtension=function(t,e=void 0){if(e===void 0)return t;let r=v.getExtension(t);return r!==""&&e.endsWith(r)?t.substring(0,t.lastIndexOf(r)-1):t};v.normalizeOperatingSystemFilePath=function(t,e="/"){return t.split(e).join(ee.sep)};v.standardizeFilePath=function(t,e="/"){return v.addLeadingDotSlash(t.split(ee.sep).join(e))};qn.exports=v});var ai=J((su,jn)=>{jn.exports=function(t){if(t===null||typeof t!="object")return!1;let e=Object.getPrototypeOf(t);return!e||e===Object.prototype}});var Nn=J((ou,ci)=>{"use strict";var rt=ai(),li="override:";function xl(t,e){return e&&t.startsWith(e)?t.slice(e.length):t}s(xl,"cleanKey");function ui(t,e,r={}){let{override:i}=r;if(!t&&rt(e)&&Object.isFrozen(e))return e;let n;if(!t&&rt(e)&&(t={},n=!0),Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(rt(t)){if(n||rt(e))for(let o in e){let a=xl(o,i);t[a]=ui(t[o],e[o],r)}return t}return e}s(ui,"getMergedItem");function Sl(t,...e){for(let r of e)r&&(t=ui(t,r));return t}s(Sl,"DeepCopy");function kl(t,...e){if(rt(t))for(let r in t)r.indexOf(li)===0&&(t[r.slice(li.length)]=t[r],delete t[r]);for(let r of e)r&&(t=ui(t,r,{override:li}));return t}s(kl,"Merge");ci.exports=kl;ci.exports.DeepCopy=Sl});var Cn=J((lu,Mn)=>{var hi=class{static{s(this,"DateCompare")}static isTimestampWithinDuration(e,r,i=Date.now()){return!r||r==="*"||r===1/0||e+this.getDurationMs(r)>i}static getDurationMs(e="0s"){let r=e.slice(-1),i;return r==="s"?i=1:r==="m"?i=60:r==="h"?i=60*60:r==="d"?i=60*60*24:r==="w"?i=60*60*24*7:r==="y"&&(i=60*60*24*365),parseInt(e.slice(0,e.length-1),10)*i*1e3}};Mn.exports=hi});var Vn=J((cu,$n)=>{function Tl(t=""){return t.replace(/[=\+\/]/g,function(e){return e==="="?"":e==="+"?"-":"_"})}s(Tl,"base64UrlSafe");$n.exports={base64UrlSafe:Tl}});var fi=J((fu,Bn)=>{function Ol(t){return typeof Buffer<"u"?Buffer.isBuffer(t):t instanceof Uint8Array}s(Ol,"isBuffer");Bn.exports={isBuffer:Ol}});var Un=J((pu,In)=>{In.exports=s(function(e){let r=1779033703,i=3144134277,n=1013904242,o=2773480762,a=1359893119,l=2600822924,c=528734635,h=1541459225,d=0,m=0,T=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],O=s((A,w)=>A>>>w|A<<32-w,"rrot"),j=new Uint32Array(64),D=new Uint8Array(64),ae=s(()=>{for(let f=0,p=0;f<16;f++,p+=4)j[f]=D[p]<<24|D[p+1]<<16|D[p+2]<<8|D[p+3];for(let f=16;f<64;f++){let p=O(j[f-15],7)^O(j[f-15],18)^j[f-15]>>>3,y=O(j[f-2],17)^O(j[f-2],19)^j[f-2]>>>10;j[f]=j[f-16]+p+j[f-7]+y|0}let A=r,w=i,ne=n,M=o,se=a,Re=l,ge=c,u=h;for(let f=0;f<64;f++){let p=O(se,6)^O(se,11)^O(se,25),y=se&Re^~se&ge,x=u+p+y+T[f]+j[f]|0,b=O(A,2)^O(A,13)^O(A,22),_=A&w^A&ne^w&ne,q=b+_|0;u=ge,ge=Re,Re=se,se=M+x|0,M=ne,ne=w,w=A,A=x+q|0}r=r+A|0,i=i+w|0,n=n+ne|0,o=o+M|0,a=a+se|0,l=l+Re|0,c=c+ge|0,h=h+u|0,m=0},"process"),xe=s(A=>{typeof A=="string"&&(A=typeof TextEncoder>"u"?Buffer.from(A):new TextEncoder().encode(A));for(let w=0;w<A.length;w++)D[m++]=A[w],m===64&&ae();d+=A.length},"add"),Se=s(()=>{if(D[m++]=128,m==64&&ae(),m+8>64){for(;m<64;)D[m++]=0;ae()}for(;m<58;)D[m++]=0;let A=d*8;D[m++]=A/1099511627776&255,D[m++]=A/4294967296&255,D[m++]=A>>>24,D[m++]=A>>>16&255,D[m++]=A>>>8&255,D[m++]=A&255,ae();let w=new Uint8Array(32);return w[0]=r>>>24,w[1]=r>>>16&255,w[2]=r>>>8&255,w[3]=r&255,w[4]=i>>>24,w[5]=i>>>16&255,w[6]=i>>>8&255,w[7]=i&255,w[8]=n>>>24,w[9]=n>>>16&255,w[10]=n>>>8&255,w[11]=n&255,w[12]=o>>>24,w[13]=o>>>16&255,w[14]=o>>>8&255,w[15]=o&255,w[16]=a>>>24,w[17]=a>>>16&255,w[18]=a>>>8&255,w[19]=a&255,w[20]=l>>>24,w[21]=l>>>16&255,w[22]=l>>>8&255,w[23]=l&255,w[24]=c>>>24,w[25]=c>>>16&255,w[26]=c>>>8&255,w[27]=c&255,w[28]=h>>>24,w[29]=h>>>16&255,w[30]=h>>>8&255,w[31]=h&255,w.hex=()=>{let ne="";return w.forEach(M=>ne+=("0"+M.toString(16)).slice(-2)),ne},w},"digest");return e===void 0?{add:xe,digest:Se}:(xe(e),Se())},"sha256")});var Yn=J((mu,Jn)=>{var{base64UrlSafe:Wn}=Vn(),{isBuffer:_l}=fi(),Ll=Un();function El(){try{return yi("node:crypto"),!0}catch{return!1}}s(El,"hasNodeCryptoModule");var Hn=El(),Ce=class{static{s(this,"Hash")}static create(){return typeof globalThis.crypto>"u"?Hn?it:nt:Vt}static createSync(){return Hn?it:nt}static toBase64(e){let r=Array.from(e,i=>String.fromCodePoint(i)).join("");return btoa(r)}static mergeUint8Array(...e){let r=e.reduce((o,a)=>o+a.byteLength,0),i=new Uint8Array(r),n=0;return e.forEach(o=>{i.set(o,n),n+=o.byteLength}),i}static bufferToBase64Url(e){return Wn(this.toBase64(new Uint8Array(e)))}static bufferToHex(e){return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}},Vt=class extends Ce{static{s(this,"WebCryptoHash")}static async toHash(...e){let r=new TextEncoder,i=this.mergeUint8Array(...e.map(n=>_l(n)?n:r.encode(n)));return crypto.subtle.digest("SHA-256",i)}static async toBase64Url(...e){return this.toHash(...e).then(r=>this.bufferToBase64Url(r))}static async toHex(...e){return this.toHash(...e).then(r=>this.bufferToHex(r))}static toBase64UrlSync(){throw new Error("Synchronous methods are not available in the Web Crypto API.")}static toHexSync(){throw new Error("Synchronous methods are not available in the Web Crypto API.")}},it=class extends Ce{static{s(this,"NodeCryptoHash")}static toHash(...e){let{createHash:r}=yi("node:crypto"),i=r("sha256");for(let n of e)i.update(n);return i}static toBase64Url(...e){let r=this.toHash(...e).digest("base64");return Wn(r)}static toHex(...e){return this.toHash(...e).digest("hex")}static toBase64UrlSync=this.toBase64Url;static toHexSync=this.toHex},nt=class extends Ce{static{s(this,"ScriptHash")}static toHash(...e){let r=Ll();for(let i of e)r.add(i);return r.digest()}static toBase64Url(...e){let r=this.toHash(...e);return this.bufferToBase64Url(r)}static toHex(...e){let r=this.toHash(...e);return this.bufferToHex(r)}static toBase64UrlSync=this.toBase64Url;static toHexSync=this.toHex};Jn.exports={Hash:Ce,NodeCryptoHash:it,ScriptHash:nt,WebCryptoHash:Vt}});var Zn=J((wu,Gn)=>{var{Hash:Bt}=Yn();async function Fl(...t){return Bt.create().toBase64Url(...t)}s(Fl,"createHash");async function Al(...t){return Bt.create().toHex(...t)}s(Al,"createHashHex");function zl(...t){return Bt.createSync().toBase64Url(...t)}s(zl,"createHashSync");function Rl(...t){return Bt.createSync().toHex(...t)}s(Rl,"createHashHexSync");Gn.exports={createHash:Fl,createHashSync:zl,createHashHex:Al,createHashHexSync:Rl}});var Kn=J((vu,Xn)=>{var Dl=Pn(),ql=ai(),Qn=Nn(),Pl=Cn(),{DeepCopy:jl}=Qn,{createHash:Nl,createHashHex:Ml,createHashSync:Cl,createHashHexSync:$l}=Zn(),Vl=fi();Xn.exports={TemplatePath:Dl,isPlainObject:ql,Merge:Qn,DeepCopy:jl,DateCompare:Pl,createHash:Nl,createHashHex:Ml,createHashSync:Cl,createHashHexSync:$l,Buffer:Vl}});var mi=bi(xi(),1);var Z=class{static{s(this,"Token")}constructor(e,r,i,n,o){this.kind=e,this.input=r,this.begin=i,this.end=n,this.file=o}getText(){return this.input.slice(this.begin,this.end)}getPosition(){let[e,r]=[1,1];for(let i=0;i<this.begin;i++)this.input[i]===`
`?(e++,r=1):r++;return[e,r]}size(){return this.end-this.begin}},fe=class{static{s(this,"Drop")}liquidMethodMissing(e){}},hs=Object.prototype.toString,Si=String.prototype.toLowerCase,Ir=Object.hasOwnProperty;function k(t){return typeof t=="string"}s(k,"isString");function B(t){return typeof t=="function"}s(B,"isFunction");function fs(t){return t&&B(t.then)}s(fs,"isPromise");function ft(t){return t&&B(t.next)&&B(t.throw)&&B(t.return)}s(ft,"isIterator");function ds(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}s(ds,"escapeRegex");function g(t){return t=L(t),k(t)?t:K(t)?"":H(t)?t.map(e=>g(e)).join(""):String(t)}s(g,"stringify");function Xe(t){return t=L(t),H(t)?t:k(t)&&t.length>0?[t]:gs(t)?Array.from(t):Et(t)?Object.keys(t).map(e=>[e,t[e]]):[]}s(Xe,"toEnumerable");function U(t){return t=L(t),K(t)?[]:H(t)?t:[t]}s(U,"toArray");function L(t){return t instanceof fe&&B(t.valueOf)?t.valueOf():t}s(L,"toValue");function ki(t){return t=Number(t),isNaN(t)?0:t}s(ki,"toNumber");function Lt(t){return typeof t=="number"}s(Lt,"isNumber");function Hi(t){return t&&B(t.toLiquid)?Hi(t.toLiquid()):t}s(Hi,"toLiquid");function K(t){return t==null}s(K,"isNil");function ps(t){return t===void 0}s(ps,"isUndefined");function H(t){return hs.call(t)==="[object Array]"}s(H,"isArray");function Wi(t){return t&&Lt(t.length)}s(Wi,"isArrayLike");function gs(t){return Et(t)&&Symbol.iterator in t}s(gs,"isIterable");function Ti(t,e){t=t||{};for(let r in t)if(Ir.call(t,r)&&e(t[r],r,t)===!1)break;return t}s(Ti,"forOwn");function Ji(t){return t[t.length-1]}s(Ji,"last");function Et(t){let e=typeof t;return t!==null&&(e==="object"||e==="function")}s(Et,"isObject");function Yi(t,e,r=1){let i=[];for(let n=t;n<e;n+=r)i.push(n);return i}s(Yi,"range");function We(t,e,r=" "){return Gi(t,e,r,(i,n)=>n+i)}s(We,"padStart");function ms(t,e,r=" "){return Gi(t,e,r,(i,n)=>i+n)}s(ms,"padEnd");function Gi(t,e,r,i){t=String(t);let n=e-t.length;for(;n-- >0;)t=i(t,r);return t}s(Gi,"pad");function Zi(t){return t}s(Zi,"identify");function ys(t){return[...t].some(r=>r>="a"&&r<="z")?t.toUpperCase():t.toLowerCase()}s(ys,"changeCase");function ws(t,e){return t.length>e?t.slice(0,e-3)+"...":t}s(ws,"ellipsis");function Oi(t,e){return t==null&&e==null?0:t==null?1:e==null||(t=Si.call(t),e=Si.call(e),t<e)?-1:t>e?1:0}s(Oi,"caseInsensitiveCompare");function X(t){return function(...e){return t.call(this,...e.map(L))}}s(X,"argumentsToValue");function Ur(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}s(Ur,"escapeRegExp");function*lt(t){let e=new Set;for(let r of t){let i=JSON.stringify(r);e.has(i)||(e.add(i),yield r)}}s(lt,"strictUniq");var _i="__liquidClass__",de=class extends Error{static{s(this,"LiquidError")}constructor(e,r){super(typeof e=="string"?e:e.message),this.context="",typeof e!="string"&&Object.defineProperty(this,"originalError",{value:e,enumerable:!1}),Object.defineProperty(this,"token",{value:r,enumerable:!1}),Object.defineProperty(this,_i,{value:"LiquidError",enumerable:!1})}update(){Object.defineProperty(this,"context",{value:bs(this.token),enumerable:!1}),this.message=vs(this.message,this.token),this.stack=this.message+`
`+this.context+`
`+this.stack,this.originalError&&(this.stack+=`
From `+this.originalError.stack)}static is(e){return e?.[_i]==="LiquidError"}},Ht=class extends de{static{s(this,"TokenizationError")}constructor(e,r){super(e,r),this.name="TokenizationError",super.update()}},Wt=class extends de{static{s(this,"ParseError")}constructor(e,r){super(e,r),this.name="ParseError",this.message=e.message,super.update()}},Jt=class extends de{static{s(this,"RenderError")}constructor(e,r){super(e,r.token),this.name="RenderError",this.message=e.message,super.update()}static is(e){return e.name==="RenderError"}},dt=class extends de{static{s(this,"LiquidErrors")}constructor(e){super(e[0],e[0].token),this.errors=e,this.name="LiquidErrors";let r=e.length>1?"s":"";this.message=`${e.length} error${r} found`,super.update()}static is(e){return e.name==="LiquidErrors"}},Yt=class extends de{static{s(this,"UndefinedVariableError")}constructor(e,r){super(e,r),this.name="UndefinedVariableError",this.message=e.message,super.update()}},Gt=class extends Error{static{s(this,"InternalUndefinedVariableError")}constructor(e){super(`undefined variable: ${e}`),this.name="InternalUndefinedVariableError",this.variableName=e}},Zt=class extends Error{static{s(this,"AssertionError")}constructor(e){super(e),this.name="AssertionError",this.message=e+""}};function bs(t){let[e,r]=t.getPosition(),i=t.input.split(`
`),n=Math.max(e-2,1),o=Math.min(e+3,i.length);return Yi(n,o+1).map(l=>{let c=l===e?">> ":"   ",h=We(String(l),String(o).length),d=`${c}${h}| `,m=l===e?`
`+We("^",r+d.length):"";return d+=i[l-1],d+=m,d}).join(`
`)}s(bs,"mkContext");function vs(t,e){e.file&&(t+=`, file:${e.file}`);let[r,i]=e.getPosition();return t+=`, line:${r}, col:${i}`,t}s(vs,"mkMessage");var z=[0,0,0,0,0,0,0,0,0,20,4,4,4,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,2,8,0,0,0,0,8,0,0,0,64,0,65,0,0,33,33,33,33,33,33,33,33,33,33,0,0,2,2,2,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],xs=1,Ne=4,Li=8,Qi=16,Ss=32,ks=64,Ts=128;function ut(t){let e=t.charCodeAt(0);return e>=128?!z[e]:!!(z[e]&xs)}s(ut,"isWord");z[160]=z[5760]=z[6158]=z[8192]=z[8193]=z[8194]=z[8195]=z[8196]=z[8197]=z[8198]=z[8199]=z[8200]=z[8201]=z[8202]=z[8232]=z[8233]=z[8239]=z[8287]=z[12288]=Ne;z[8220]=z[8221]=Ts;function W(t,e){if(!t){let r=typeof e=="function"?e():e||`expect ${t} to be true`;throw new Zt(r)}}s(W,"assert");function pt(t,e=`unexpected ${JSON.stringify(t)}`){W(!t,e)}s(pt,"assertEmpty");var Qt=class extends fe{static{s(this,"NullDrop")}equals(e){return K(L(e))}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return null}},Je=class t extends fe{static{s(this,"EmptyDrop")}equals(e){return e instanceof t?!1:(e=L(e),k(e)||H(e)?e.length===0:Et(e)?Object.keys(e).length===0:!1)}gt(){return!1}geq(){return!1}lt(){return!1}leq(){return!1}valueOf(){return""}static is(e){return e instanceof t}},Xt=class t extends Je{static{s(this,"BlankDrop")}equals(e){return e===!1||K(L(e))?!0:k(e)?/^\s*$/.test(e):super.equals(e)}static is(e){return e instanceof t}},Ye=class extends fe{static{s(this,"ForloopDrop")}constructor(e,r,i){super(),this.i=0,this.length=e,this.name=`${i}-${r}`}next(){this.i++}index0(){return this.i}index(){return this.i+1}first(){return this.i===0}last(){return this.i===this.length-1}rindex(){return this.length-this.i}rindex0(){return this.length-this.i-1}valueOf(){return JSON.stringify(this)}},gt=class extends fe{static{s(this,"BlockDrop")}constructor(e=()=>""){super(),this.superBlockRender=e}super(){return this.superBlockRender()}};function oe(t){return t&&B(t.equals)&&B(t.gt)&&B(t.geq)&&B(t.lt)&&B(t.leq)}s(oe,"isComparable");var Ei=new Qt,Xi={true:!0,false:!1,nil:Ei,null:Ei,empty:new Je,blank:new Xt};function Fi(t){let e={};for(let[r,i]of Object.entries(t)){let n=e;for(let o=0;o<r.length;o++){let a=r[o];n[a]=n[a]||{},o===r.length-1&&ut(r[o])&&(n[a].needBoundary=!0),n=n[a]}n.data=i,n.end=!0}return e}s(Fi,"createTrie");var mt=s(function(){return mt=Object.assign||s(function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},"__assign"),mt.apply(this,arguments)},"__assign");function V(t,e,r,i){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return s(n,"adopt"),new(r||(r=Promise))(function(o,a){function l(d){try{h(i.next(d))}catch(m){a(m)}}s(l,"fulfilled");function c(d){try{h(i.throw(d))}catch(m){a(m)}}s(c,"rejected");function h(d){d.done?o(d.value):n(d.value).then(l,c)}s(h,"step"),h((i=i.apply(t,e||[])).next())})}s(V,"__awaiter");function ue(t){return V(this,void 0,void 0,function*(){if(!ft(t))return t;let e,r=!1,i="next";do{let n=t[i](e);r=n.done,e=n.value,i="next";try{ft(e)&&(e=ue(e)),fs(e)&&(e=yield e)}catch(o){i="throw",e=o}}while(!r);return e})}s(ue,"toPromise");function ce(t){if(!ft(t))return t;let e,r=!1,i="next";do{let n=t[i](e);if(r=n.done,e=n.value,i="next",ft(e))try{e=ce(e)}catch(o){i="throw",e=o}}while(!r);return e}s(ce,"toValueSync");var Os=/%([-_0^#:]+)?(\d+)?([EO])?(.)/;function _s(t){return[31,Ls(t)?29:28,31,30,31,30,31,31,30,31,30,31]}s(_s,"daysInMonth");function Ki(t){let e=0;for(let r=0;r<t.getMonth();++r)e+=_s(t)[r];return e+t.getDate()}s(Ki,"getDayOfYear");function Ai(t,e){let r=Ki(t)+(e-t.getDay()),n=7-new Date(t.getFullYear(),0,1).getDay()+e;return String(Math.floor((r-n)/7)+1)}s(Ai,"getWeekOfYear");function Ls(t){let e=t.getFullYear();return!!((e&3)===0&&(e%100||e%400===0&&e))}s(Ls,"isLeapYear");function Es(t){let e=t.getDate();if([11,12,13].includes(e))return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}s(Es,"ordinal");function Fs(t){return parseInt(t.getFullYear().toString().substring(0,2),10)}s(Fs,"century");var As={d:2,e:2,H:2,I:2,j:3,k:2,l:2,L:3,m:2,M:2,S:2,U:2,W:2},zs=new Set("aAbBceklpP");function zi(t,e){let r=Math.abs(t.getTimezoneOffset()),i=Math.floor(r/60),n=r%60;return(t.getTimezoneOffset()>0?"-":"+")+We(i,2,"0")+(e.flags[":"]?":":"")+We(n,2,"0")}s(zi,"getTimezoneOffset");var Kt={a:s(t=>t.getShortWeekdayName(),"a"),A:s(t=>t.getLongWeekdayName(),"A"),b:s(t=>t.getShortMonthName(),"b"),B:s(t=>t.getLongMonthName(),"B"),c:s(t=>t.toLocaleString(),"c"),C:s(t=>Fs(t),"C"),d:s(t=>t.getDate(),"d"),e:s(t=>t.getDate(),"e"),H:s(t=>t.getHours(),"H"),I:s(t=>String(t.getHours()%12||12),"I"),j:s(t=>Ki(t),"j"),k:s(t=>t.getHours(),"k"),l:s(t=>String(t.getHours()%12||12),"l"),L:s(t=>t.getMilliseconds(),"L"),m:s(t=>t.getMonth()+1,"m"),M:s(t=>t.getMinutes(),"M"),N:s((t,e)=>{let r=Number(e.width)||9,i=String(t.getMilliseconds()).slice(0,r);return ms(i,r,"0")},"N"),p:s(t=>t.getHours()<12?"AM":"PM","p"),P:s(t=>t.getHours()<12?"am":"pm","P"),q:s(t=>Es(t),"q"),s:s(t=>Math.round(t.getTime()/1e3),"s"),S:s(t=>t.getSeconds(),"S"),u:s(t=>t.getDay()||7,"u"),U:s(t=>Ai(t,0),"U"),w:s(t=>t.getDay(),"w"),W:s(t=>Ai(t,1),"W"),x:s(t=>t.toLocaleDateString(),"x"),X:s(t=>t.toLocaleTimeString(),"X"),y:s(t=>t.getFullYear().toString().slice(2,4),"y"),Y:s(t=>t.getFullYear(),"Y"),z:zi,Z:s((t,e)=>t.getTimeZoneName()||zi(t,e),"Z"),t:s(()=>"	","t"),n:s(()=>`
`,"n"),"%":s(()=>"%","%")};Kt.h=Kt.b;function ct(t,e){let r="",i=e,n;for(;n=Os.exec(i);)r+=i.slice(0,n.index),i=i.slice(n.index+n[0].length),r+=Rs(t,n);return r+i}s(ct,"strftime");function Rs(t,e){let[r,i="",n,o,a]=e,l=Kt[a];if(!l)return r;let c={};for(let T of i)c[T]=!0;let h=String(l(t,{flags:c,width:n,modifier:o})),d=zs.has(a)?" ":"0",m=n||As[a]||0;return c["^"]?h=h.toUpperCase():c["#"]&&(h=ys(h)),c._?d=" ":c[0]&&(d="0"),c["-"]&&(m=0),We(h,m,d)}s(Rs,"format");function en(){return typeof Intl<"u"?Intl.DateTimeFormat:void 0}s(en,"getDateTimeFormat");var Ds=6e4,qs=/([zZ]|([+-])(\d{2}):?(\d{2}))$/,tn=["January","February","March","April","May","June","July","August","September","October","November","December"],Ps=tn.map(t=>t.slice(0,3)),rn=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],js=rn.map(t=>t.slice(0,3)),we=class t{static{s(this,"LiquidDate")}constructor(e,r,i){this.locale=r,this.DateTimeFormat=en(),this.date=new Date(e),this.timezoneFixed=i!==void 0,i===void 0&&(i=this.date.getTimezoneOffset()),this.timezoneOffset=k(i)?t.getTimezoneOffset(i,this.date):i,this.timezoneName=k(i)?i:"";let n=(this.date.getTimezoneOffset()-this.timezoneOffset)*Ds,o=this.date.getTime()+n;this.displayDate=new Date(o)}getTime(){return this.displayDate.getTime()}getMilliseconds(){return this.displayDate.getMilliseconds()}getSeconds(){return this.displayDate.getSeconds()}getMinutes(){return this.displayDate.getMinutes()}getHours(){return this.displayDate.getHours()}getDay(){return this.displayDate.getDay()}getDate(){return this.displayDate.getDate()}getMonth(){return this.displayDate.getMonth()}getFullYear(){return this.displayDate.getFullYear()}toLocaleString(e,r){return r?.timeZone?this.date.toLocaleString(e,r):this.displayDate.toLocaleString(e,r)}toLocaleTimeString(e){return this.displayDate.toLocaleTimeString(e)}toLocaleDateString(e){return this.displayDate.toLocaleDateString(e)}getTimezoneOffset(){return this.timezoneOffset}getTimeZoneName(){if(this.timezoneFixed)return this.timezoneName;if(this.DateTimeFormat)return this.DateTimeFormat().resolvedOptions().timeZone}getLongMonthName(){var e;return(e=this.format({month:"long"}))!==null&&e!==void 0?e:tn[this.getMonth()]}getShortMonthName(){var e;return(e=this.format({month:"short"}))!==null&&e!==void 0?e:Ps[this.getMonth()]}getLongWeekdayName(){var e;return(e=this.format({weekday:"long"}))!==null&&e!==void 0?e:rn[this.displayDate.getDay()]}getShortWeekdayName(){var e;return(e=this.format({weekday:"short"}))!==null&&e!==void 0?e:js[this.displayDate.getDay()]}valid(){return!isNaN(this.getTime())}format(e){return this.DateTimeFormat&&this.DateTimeFormat(this.locale,e).format(this.displayDate)}static createDateFixedToTimezone(e,r){let i=e.match(qs);if(i&&i[1]==="Z")return new t(+new Date(e),r,0);if(i&&i[2]&&i[3]&&i[4]){let[,,n,o,a]=i,l=(n==="+"?-1:1)*(parseInt(o,10)*60+parseInt(a,10));return new t(+new Date(e),r,l)}return new t(e,r)}static getTimezoneOffset(e,r){let i=r.toLocaleString("en-US",{timeZone:e}),n=r.toLocaleString("en-US",{timeZone:"UTC"}),o=new Date(i);return(+new Date(n)-+o)/(60*1e3)}},Ge=class{static{s(this,"Limiter")}constructor(e,r){this.base=0,this.message=`${e} limit exceeded`,this.limit=r}use(e){e=ki(e),W(this.base+e<=this.limit,this.message),this.base+=e}check(e){e=ki(e),W(e<=this.limit,this.message)}},Ze=class extends Z{static{s(this,"DelimitedToken")}constructor(e,[r,i],n,o,a,l,c,h){super(e,n,o,a,h),this.trimLeft=!1,this.trimRight=!1;let d=n[r]==="-",m=n[i-1]==="-",T=d?r+1:r,O=m?i-1:i;for(;T<O&&z[n.charCodeAt(T)]&Ne;)T++;for(;O>T&&z[n.charCodeAt(O-1)]&Ne;)O--;this.contentRange=[T,O],this.trimLeft=d||l,this.trimRight=m||c}get content(){return this.input.slice(this.contentRange[0],this.contentRange[1])}},yt=class extends Ze{static{s(this,"TagToken")}constructor(e,r,i,n,o){let{trimTagLeft:a,trimTagRight:l,tagDelimiterLeft:c,tagDelimiterRight:h}=n,[d,m]=[r+c.length,i-h.length];super(R.Tag,[d,m],e,r,i,a,l,o),this.tokenizer=new Y(e,n.operators,o,this.contentRange),this.name=this.tokenizer.readTagName(),this.tokenizer.assert(this.name,"illegal tag syntax, tag name expected"),this.tokenizer.skipBlank(),this.args=this.tokenizer.input.slice(this.tokenizer.p,this.contentRange[1])}},er=class extends Ze{static{s(this,"OutputToken")}constructor(e,r,i,n,o){let{trimOutputLeft:a,trimOutputRight:l,outputDelimiterLeft:c,outputDelimiterRight:h}=n,d=[r+c.length,i-h.length];super(R.Output,d,e,r,i,a,l,o)}},wt=class extends Z{static{s(this,"HTMLToken")}constructor(e,r,i,n){super(R.HTML,e,r,i,n),this.input=e,this.begin=r,this.end=i,this.file=n,this.trimLeft=0,this.trimRight=0}getContent(){return this.input.slice(this.begin+this.trimLeft,this.end-this.trimRight)}},tr=class extends Z{static{s(this,"NumberToken")}constructor(e,r,i,n){super(R.Number,e,r,i,n),this.input=e,this.begin=r,this.end=i,this.file=n,this.content=Number(this.getText())}},Ie=class extends Z{static{s(this,"IdentifierToken")}constructor(e,r,i,n){super(R.Word,e,r,i,n),this.input=e,this.begin=r,this.end=i,this.file=n,this.content=this.getText()}},rr=class extends Z{static{s(this,"LiteralToken")}constructor(e,r,i,n){super(R.Literal,e,r,i,n),this.input=e,this.begin=r,this.end=i,this.file=n,this.literal=this.getText(),this.content=Xi[this.literal]}},Ri={"==":2,"!=":2,">":2,"<":2,">=":2,"<=":2,contains:2,not:1,and:0,or:0},Ns={"==":0,"!=":0,">":0,"<":0,">=":0,"<=":0,contains:0,not:1,and:0,or:0},ir=class extends Z{static{s(this,"OperatorToken")}constructor(e,r,i,n){super(R.Operator,e,r,i,n),this.input=e,this.begin=r,this.end=i,this.file=n,this.operator=this.getText()}getPrecedence(){let e=this.getText();return e in Ri?Ri[e]:1}},bt=class extends Z{static{s(this,"PropertyAccessToken")}constructor(e,r,i,n,o,a){super(R.PropertyAccess,i,n,o,a),this.variable=e,this.props=r}},vt=class extends Z{static{s(this,"FilterToken")}constructor(e,r,i,n,o,a){super(R.Filter,i,n,o,a),this.name=e,this.args=r}},nr=class extends Z{static{s(this,"HashToken")}constructor(e,r,i,n,o,a){super(R.Hash,e,r,i,a),this.input=e,this.begin=r,this.end=i,this.name=n,this.value=o,this.file=a}},Ms=/[\da-fA-F]/,Di=/[0-7]/,qi={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v"};function Pi(t){let e=t.charCodeAt(0);return e>=97?e-87:e>=65?e-55:e-48}s(Pi,"hexVal");function Cs(t){let e="";for(let r=1;r<t.length-1;r++){if(t[r]!=="\\"){e+=t[r];continue}if(qi[t[r+1]]!==void 0)e+=qi[t[++r]];else if(t[r+1]==="u"){let i=0,n=r+2;for(;n<=r+5&&Ms.test(t[n]);)i=i*16+Pi(t[n++]);r=n-1,e+=String.fromCharCode(i)}else if(!Di.test(t[r+1]))e+=t[++r];else{let i=r+1,n=0;for(;i<=r+3&&Di.test(t[i]);)n=n*8+Pi(t[i++]);r=i-1,e+=String.fromCharCode(n)}}return e}s(Cs,"parseStringLiteral");var sr=class extends Z{static{s(this,"QuotedToken")}constructor(e,r,i,n){super(R.Quoted,e,r,i,n),this.input=e,this.begin=r,this.end=i,this.file=n,this.content=Cs(this.getText())}},or=class extends Z{static{s(this,"RangeToken")}constructor(e,r,i,n,o,a){super(R.Range,e,r,i,a),this.input=e,this.begin=r,this.end=i,this.lhs=n,this.rhs=o,this.file=a}},ar=class extends Ze{static{s(this,"LiquidTagToken")}constructor(e,r,i,n,o){super(R.Tag,[r,i],e,r,i,!1,!1,o),this.tokenizer=new Y(e,n.operators,o,this.contentRange),this.name=this.tokenizer.readTagName(),this.tokenizer.assert(this.name,"illegal liquid tag syntax"),this.tokenizer.skipBlank()}get args(){return this.tokenizer.input.slice(this.tokenizer.p,this.contentRange[1])}},lr=class extends Z{static{s(this,"FilteredValueToken")}constructor(e,r,i,n,o,a){super(R.FilteredValue,i,n,o,a),this.initial=e,this.filters=r,this.input=i,this.begin=n,this.end=o,this.file=a}},$s={now:s(()=>Date.now(),"now")};function nn(){return typeof global=="object"&&global.performance||typeof window=="object"&&window.performance||$s}s(nn,"getPerformance");var ur=class{static{s(this,"SimpleEmitter")}constructor(){this.buffer=""}write(e){this.buffer+=g(e)}},cr=class{static{s(this,"StreamedEmitter")}constructor(){throw this.buffer="",this.stream=null,new Error("streaming not supported in browser")}},hr=class{static{s(this,"KeepingTypeEmitter")}constructor(){this.buffer=""}write(e){e=L(e),typeof e!="string"&&this.buffer===""?this.buffer=e:this.buffer=g(this.buffer)+g(e)}},fr=class{static{s(this,"Render")}renderTemplatesToNodeStream(e,r){let i=new cr;return Promise.resolve().then(()=>ue(this.renderTemplates(e,r,i))).then(()=>i.end(),n=>i.error(n)),i.stream}*renderTemplates(e,r,i){i||(i=r.opts.keepOutputType?new hr:new ur);let n=[];for(let o of e){r.renderLimit.check(nn().now());try{let a=yield o.render(r,i);if(a&&i.write(a),r.breakCalled||r.continueCalled)break}catch(a){let l=de.is(a)?a:new Jt(a,o);if(r.opts.catchAllErrors)n.push(l);else throw l}}if(n.length)throw new dt(n);return i.buffer}},dr=class{static{s(this,"Expression")}constructor(e){this.postfix=[...Us(e)]}*evaluate(e,r){W(e,"unable to evaluate: context not defined");let i=[];for(let n of this.postfix)if(cn(n)){let o=i.pop(),a;if(Ns[n.operator]===1)a=yield e.opts.operators[n.operator](o,e);else{let l=i.pop();a=yield e.opts.operators[n.operator](l,o,e)}i.push(a)}else i.push(yield N(n,e,r));return i[0]}valid(){return!!this.postfix.length}};function*N(t,e,r=!1){if(t){if("content"in t)return t.content;if(Ot(t))return yield Vs(t,e,r);if(hn(t))return yield Is(t,e)}}s(N,"evalToken");function*Vs(t,e,r){let i=[];for(let n of t.props)i.push(yield N(n,e,!1));try{if(t.variable){let n=yield N(t.variable,e,r);return yield e._getFromScope(n,i)}else return yield e._get(i)}catch(n){if(r&&n.name==="InternalUndefinedVariableError")return null;throw new Yt(n,t)}}s(Vs,"evalPropertyAccessToken");function Bs(t){return t.content}s(Bs,"evalQuotedToken");function*Is(t,e){let r=yield N(t.lhs,e),i=yield N(t.rhs,e);return e.memoryLimit.use(i-r+1),Yi(+r,+i+1)}s(Is,"evalRangeToken");function*Us(t){let e=[];for(let r of t)if(cn(r)){for(;e.length&&e[e.length-1].getPrecedence()>r.getPrecedence();)yield e.pop();e.push(r)}else yield r;for(;e.length;)yield e.pop()}s(Us,"toPostfix");function Le(t,e){return!Ft(t,e)}s(Le,"isTruthy");function Ft(t,e){return t=L(t),e.opts.jsTruthy?!t:t===!1||t===void 0||t===null}s(Ft,"isFalsy");var Hs={"==":he,"!=":s((t,e)=>!he(t,e),"!="),">":s((t,e)=>oe(t)?t.gt(e):oe(e)?e.lt(t):L(t)>L(e),">"),"<":s((t,e)=>oe(t)?t.lt(e):oe(e)?e.gt(t):L(t)<L(e),"<"),">=":s((t,e)=>oe(t)?t.geq(e):oe(e)?e.leq(t):L(t)>=L(e),">="),"<=":s((t,e)=>oe(t)?t.leq(e):oe(e)?e.geq(t):L(t)<=L(e),"<="),contains:s((t,e)=>(t=L(t),H(t)?t.some(r=>he(r,e)):B(t?.indexOf)?t.indexOf(L(e))>-1:!1),"contains"),not:s((t,e)=>Ft(L(t),e),"not"),and:s((t,e,r)=>Le(L(t),r)&&Le(L(e),r),"and"),or:s((t,e,r)=>Le(L(t),r)||Le(L(e),r),"or")};function he(t,e){return oe(t)?t.equals(e):oe(e)?e.equals(t):(t=L(t),e=L(e),H(t)?H(e)&&Ws(t,e):t===e)}s(he,"equals");function Ws(t,e){return t.length!==e.length?!1:!t.some((r,i)=>!he(r,e[i]))}s(Ws,"arrayEquals");function Js(t,e){return t.some(r=>he(r,e))}s(Js,"arrayIncludes");var Ue=class{static{s(this,"Node")}constructor(e,r,i,n){this.key=e,this.value=r,this.next=i,this.prev=n}},xt=class{static{s(this,"LRU")}constructor(e,r=0){this.limit=e,this.size=r,this.cache={},this.head=new Ue("HEAD",null,null,null),this.tail=new Ue("TAIL",null,null,null),this.head.next=this.tail,this.tail.prev=this.head}write(e,r){if(this.cache[e])this.cache[e].value=r;else{let i=new Ue(e,r,this.head.next,this.head);this.head.next.prev=i,this.head.next=i,this.cache[e]=i,this.size++,this.ensureLimit()}}read(e){if(!this.cache[e])return;let{value:r}=this.cache[e];return this.remove(e),this.write(e,r),r}remove(e){let r=this.cache[e];r.prev.next=r.next,r.next.prev=r.prev,delete this.cache[e],this.size--}clear(){this.head.next=this.tail,this.tail.prev=this.head,this.size=0,this.cache={}}ensureLimit(){this.size>this.limit&&this.remove(this.tail.prev.key)}};function sn(t,e){let r=document.createElement("base");r.href=t;let i=document.getElementsByTagName("head")[0];i.insertBefore(r,i.firstChild);let n=document.createElement("a");n.href=e;let o=n.href;return i.removeChild(r),o}s(sn,"domResolve");function Ys(t,e,r){return t.length&&Ji(t)!=="/"&&(t+="/"),sn(t,e).replace(/^(\w+:\/\/[^/]+)(\/[^?]+)/,(n,o,a)=>{let l=a.split("/").pop();return/\.\w+$/.test(l)?n:o+a+r})}s(Ys,"resolve");function Gs(t){return V(this,void 0,void 0,function*(){return new Promise((e,r)=>{let i=new XMLHttpRequest;i.onload=()=>{i.status>=200&&i.status<300?e(i.responseText):r(new Error(i.statusText))},i.onerror=()=>{r(new Error("An error occurred whilst receiving the response."))},i.open("GET",t),i.send()})})}s(Gs,"readFile");function Zs(t){let e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),e.status<200||e.status>=300)throw new Error(e.statusText);return e.responseText}s(Zs,"readFileSync");function Qs(t){return V(this,void 0,void 0,function*(){return!0})}s(Qs,"exists");function Xs(t){return!0}s(Xs,"existsSync");function Ks(t){return sn(t,".")}s(Ks,"dirname");var eo="/",to=Object.freeze({__proto__:null,resolve:Ys,readFile:Gs,readFileSync:Zs,exists:Qs,existsSync:Xs,dirname:Ks,sep:eo});function ro(t,e,...r){return t=L(t),H(t)||k(t)?t.length?t:e:t===!1&&new Map(r).get("allow_false")?!1:Ft(t,this.context)?e:t}s(ro,"defaultFilter");function ji(t,e=0){return JSON.stringify(t,null,e)}s(ji,"json");function io(t,e=0){let r=[];return JSON.stringify(t,function(i,n){if(typeof n!="object"||n===null)return n;for(;r.length>0&&r[r.length-1]!==this;)r.pop();return r.includes(n)?"[Circular]":(r.push(n),n)},e)}s(io,"inspect");function no(t){return Number(t)}s(no,"to_integer");var so={raw:!0,handler:Zi},on={default:ro,raw:so,jsonify:ji,to_integer:no,json:ji,inspect:io},oo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},ao={"&amp;":"&","&lt;":"<","&gt;":">","&#34;":'"',"&#39;":"'"};function At(t){return t=g(t),this.context.memoryLimit.use(t.length),t.replace(/&|<|>|"|'/g,e=>oo[e])}s(At,"escape");function lo(t){return At.call(this,t)}s(lo,"xml_escape");function uo(t){return t=g(t),this.context.memoryLimit.use(t.length),t.replace(/&(amp|lt|gt|#34|#39);/g,e=>ao[e])}s(uo,"unescape");function co(t){return At.call(this,uo.call(this,t))}s(co,"escape_once");function ho(t){let e=g(t);return this.context.memoryLimit.use(e.length),e.replace(/\r?\n/gm,`<br />
`)}s(ho,"newline_to_br");function fo(t){let e=g(t);return this.context.memoryLimit.use(e.length),e.replace(/<script[\s\S]*?<\/script>|<style[\s\S]*?<\/style>|<.*?>|<!--[\s\S]*?-->/g,"")}s(fo,"strip_html");var po=Object.freeze({__proto__:null,escape:At,xml_escape:lo,escape_once:co,newline_to_br:ho,strip_html:fo}),pr=class{static{s(this,"MapFS")}constructor(e){this.mapping=e,this.sep="/"}exists(e){return V(this,void 0,void 0,function*(){return this.existsSync(e)})}existsSync(e){return!K(this.mapping[e])}readFile(e){return V(this,void 0,void 0,function*(){return this.readFileSync(e)})}readFileSync(e){let r=this.mapping[e];if(K(r))throw new Error(`ENOENT: ${e}`);return r}dirname(e){let r=e.split(this.sep);return r.pop(),r.join(this.sep)}resolve(e,r,i){if(r+=i,e===".")return r;let n=e.split(/\/+/);for(let o of r.split(this.sep))o==="."||o===""||(o===".."?(n.length>1||n[0]!=="")&&n.pop():n.push(o));return n.join(this.sep)}},Pe={root:["."],layouts:["."],partials:["."],relativeReference:!0,jekyllInclude:!1,keyValueSeparator:":",cache:void 0,extname:"",fs:to,dynamicPartials:!0,jsTruthy:!1,dateFormat:"%A, %B %-e, %Y at %-l:%M %P %z",locale:"",trimTagRight:!1,trimTagLeft:!1,trimOutputRight:!1,trimOutputLeft:!1,greedy:!0,tagDelimiterLeft:"{%",tagDelimiterRight:"%}",outputDelimiterLeft:"{{",outputDelimiterRight:"}}",preserveTimezones:!1,strictFilters:!1,strictVariables:!1,ownPropertyOnly:!0,lenientIf:!1,globals:{},keepOutputType:!1,operators:Hs,memoryLimit:1/0,parseLimit:1/0,renderLimit:1/0};function go(t){var e,r;if(t.hasOwnProperty("root")&&(t.hasOwnProperty("partials")||(t.partials=t.root),t.hasOwnProperty("layouts")||(t.layouts=t.root)),t.hasOwnProperty("cache")){let i;typeof t.cache=="number"?i=t.cache>0?new xt(t.cache):void 0:typeof t.cache=="object"?i=t.cache:i=t.cache?new xt(1024):void 0,t.cache=i}return t=Object.assign(Object.assign(Object.assign({},Pe),t.jekyllInclude?{dynamicPartials:!1}:{}),t),(!t.fs.dirname||!t.fs.sep)&&t.relativeReference&&(console.warn("[LiquidJS] `fs.dirname` and `fs.sep` are required for relativeReference, set relativeReference to `false` to suppress this warning"),t.relativeReference=!1),t.root=ht(t.root),t.partials=ht(t.partials),t.layouts=ht(t.layouts),t.outputEscape=t.outputEscape&&mo(t.outputEscape),t.locale||(t.locale=(r=(e=en())===null||e===void 0?void 0:e().resolvedOptions().locale)!==null&&r!==void 0?r:"en-US"),t.templates&&(t.fs=new pr(t.templates),t.relativeReference=!0,t.root=t.partials=t.layouts="."),t}s(go,"normalize");function mo(t){return t==="escape"?At:t==="json"?on.json:(W(B(t),"`outputEscape` need to be of type string or function"),t)}s(mo,"getOutputEscapeFunction");function ht(t){let e=[];return H(t)&&(e=t),k(t)&&(e=[t]),e}s(ht,"normalizeDirectoryList");function yo(t,e){let r=!1;for(let i=0;i<t.length;i++){let n=t[i];So(n)&&(!r&&n.trimLeft&&wo(t[i-1],e.greedy),ze(n)&&(n.name==="raw"?r=!0:n.name==="endraw"&&(r=!1)),!r&&n.trimRight&&bo(t[i+1],e.greedy))}}s(yo,"whiteSpaceCtrl");function wo(t,e){if(!t||!Hr(t))return;let r=e?Ne:Qi;for(;z[t.input.charCodeAt(t.end-1-t.trimRight)]&r;)t.trimRight++}s(wo,"trimLeft");function bo(t,e){if(!t||!Hr(t))return;let r=e?Ne:Qi;for(;z[t.input.charCodeAt(t.begin+t.trimLeft)]&r;)t.trimLeft++;t.input.charAt(t.begin+t.trimLeft)===`
`&&t.trimLeft++}s(bo,"trimRight");var Y=class{static{s(this,"Tokenizer")}constructor(e,r=Pe.operators,i,n){this.input=e,this.file=i,this.rawBeginAt=-1,this.p=n?n[0]:0,this.N=n?n[1]:e.length,this.opTrie=Fi(r),this.literalTrie=Fi(Xi)}readExpression(){return new dr(this.readExpressionTokens())}*readExpressionTokens(){for(;this.p<this.N;){let e=this.readOperator();if(e){yield e;continue}let r=this.readValue();if(r){yield r;continue}return}}readOperator(){this.skipBlank();let e=this.matchTrie(this.opTrie);if(e!==-1)return new ir(this.input,this.p,this.p=e,this.file)}matchTrie(e){let r=e,i=this.p,n;for(;r[this.input[i]]&&i<this.N;)r=r[this.input[i++]],r.end&&(n=r);return!n||n.needBoundary&&ut(this.peek(i-this.p))?-1:i}readFilteredValue(){let e=this.p,r=this.readExpression();this.assert(r.valid(),`invalid value expression: ${this.snapshot()}`);let i=this.readFilters();return new lr(r,i,this.input,e,this.p,this.file)}readFilters(){let e=[];for(;;){let r=this.readFilter();if(!r)return e;e.push(r)}}readFilter(){if(this.skipBlank(),this.end())return null;this.assert(this.read()==="|",'expected "|" before filter');let e=this.readIdentifier();if(!e.size())return this.assert(this.end(),"expected filter name"),null;let r=[];if(this.skipBlank(),this.peek()===":")do{++this.p;let i=this.readFilterArg();i&&r.push(i),this.skipBlank(),this.assert(this.end()||this.peek()===","||this.peek()==="|",()=>`unexpected character ${this.snapshot()}`)}while(this.peek()===",");else if(!(this.peek()==="|"||this.end()))throw this.error('expected ":" after filter name');return new vt(e.getText(),r,this.input,e.begin,this.p,this.file)}readFilterArg(){let e=this.readValue();if(!e)return;if(this.skipBlank(),this.peek()!==":")return e;++this.p;let r=this.readValue();return[e.getText(),r]}readTopLevelTokens(e=Pe){let r=[];for(;this.p<this.N;){let i=this.readTopLevelToken(e);r.push(i)}return yo(r,e),r}readTopLevelToken(e){let{tagDelimiterLeft:r,outputDelimiterLeft:i}=e;return this.rawBeginAt>-1?this.readEndrawOrRawContent(e):this.match(r)?this.readTagToken(e):this.match(i)?this.readOutputToken(e):this.readHTMLToken([r,i])}readHTMLToken(e){let r=this.p;for(;this.p<this.N&&!e.some(i=>this.match(i));)++this.p;return new wt(this.input,r,this.p,this.file)}readTagToken(e){let{file:r,input:i}=this,n=this.p;if(this.readToDelimiter(e.tagDelimiterRight)===-1)throw this.error(`tag ${this.snapshot(n)} not closed`,n);let o=new yt(i,n,this.p,e,r);return o.name==="raw"&&(this.rawBeginAt=n),o}readToDelimiter(e,r=!1){for(this.skipBlank();this.p<this.N;){if(r&&this.peekType()&Li){this.readQuoted();continue}if(++this.p,this.rmatch(e))return this.p}return-1}readOutputToken(e=Pe){let{file:r,input:i}=this,{outputDelimiterRight:n}=e,o=this.p;if(this.readToDelimiter(n,!0)===-1)throw this.error(`output ${this.snapshot(o)} not closed`,o);return new er(i,o,this.p,e,r)}readEndrawOrRawContent(e){let{tagDelimiterLeft:r,tagDelimiterRight:i}=e,n=this.p,o=this.readTo(r)-r.length;for(;this.p<this.N;){if(this.readIdentifier().getText()!=="endraw"){o=this.readTo(r)-r.length;continue}for(;this.p<=this.N;){if(this.rmatch(i)){let a=this.p;return n===o?(this.rawBeginAt=-1,new yt(this.input,n,a,e,this.file)):(this.p=o,new wt(this.input,n,o,this.file))}if(this.rmatch(r))break;this.p++}}throw this.error(`raw ${this.snapshot(this.rawBeginAt)} not closed`,n)}readLiquidTagTokens(e=Pe){let r=[];for(;this.p<this.N;){let i=this.readLiquidTagToken(e);i&&r.push(i)}return r}readLiquidTagToken(e){if(this.skipBlank(),this.end())return;let r=this.p;this.readToDelimiter(`
`);let i=this.p;return new ar(this.input,r,i,e,this.file)}error(e,r=this.p){return new Ht(e,new Ie(this.input,r,this.N,this.file))}assert(e,r,i){if(!e)throw this.error(typeof r=="function"?r():r,i)}snapshot(e=this.p){return JSON.stringify(ws(this.input.slice(e,this.N),32))}readWord(){return this.readIdentifier()}readIdentifier(){this.skipBlank();let e=this.p;for(;!this.end()&&ut(this.peek());)++this.p;return new Ie(this.input,e,this.p,this.file)}readNonEmptyIdentifier(){let e=this.readIdentifier();return e.size()?e:void 0}readTagName(){return this.skipBlank(),this.input[this.p]==="#"?this.input.slice(this.p,++this.p):this.readIdentifier().getText()}readHashes(e){let r=[];for(;;){let i=this.readHash(e);if(!i)return r;r.push(i)}}readHash(e){this.skipBlank(),this.peek()===","&&++this.p;let r=this.p,i=this.readNonEmptyIdentifier();if(!i)return;let n;this.skipBlank();let o=k(e)?e:e?"=":":";return this.peek()===o&&(++this.p,n=this.readValue()),new nr(this.input,r,this.p,i,n,this.file)}remaining(){return this.input.slice(this.p,this.N)}advance(e=1){this.p+=e}end(){return this.p>=this.N}read(){return this.input[this.p++]}readTo(e){for(;this.p<this.N;)if(++this.p,this.rmatch(e))return this.p;return-1}readValue(){this.skipBlank();let e=this.p,r=this.readLiteral()||this.readQuoted()||this.readRange()||this.readNumber(),i=this.readProperties(!r);return i.length?new bt(r,i,this.input,e,this.p):r}readScopeValue(){this.skipBlank();let e=this.p,r=this.readProperties();if(r.length)return new bt(void 0,r,this.input,e,this.p)}readProperties(e=!0){let r=[];for(;;){if(this.peek()==="["){this.p++;let i=this.readValue()||new Ie(this.input,this.p,this.p,this.file);this.assert(this.readTo("]")!==-1,"[ not closed"),r.push(i);continue}if(e&&!r.length){let i=this.readNonEmptyIdentifier();if(i){r.push(i);continue}}if(this.peek()==="."&&this.peek(1)!=="."){this.p++;let i=this.readNonEmptyIdentifier();if(!i)break;r.push(i);continue}break}return r}readNumber(){this.skipBlank();let e=!1,r=!1,i=0;for(this.peekType()&ks&&i++;this.p+i<=this.N;)if(this.peekType(i)&Ss)r=!0,i++;else if(this.peek(i)==="."&&this.peek(i+1)!=="."){if(e||!r)return;e=!0,i++}else break;if(r&&!ut(this.peek(i))){let n=new tr(this.input,this.p,this.p+i,this.file);return this.advance(i),n}}readLiteral(){this.skipBlank();let e=this.matchTrie(this.literalTrie);if(e===-1)return;let r=new rr(this.input,this.p,e,this.file);return this.p=e,r}readRange(){this.skipBlank();let e=this.p;if(this.peek()!=="(")return;++this.p;let r=this.readValueOrThrow();this.skipBlank(),this.assert(this.read()==="."&&this.read()===".","invalid range syntax");let i=this.readValueOrThrow();return this.skipBlank(),this.assert(this.read()===")","invalid range syntax"),new or(this.input,e,this.p,r,i,this.file)}readValueOrThrow(){let e=this.readValue();return this.assert(e,()=>`unexpected token ${this.snapshot()}, value expected`),e}readQuoted(){this.skipBlank();let e=this.p;if(!(this.peekType()&Li))return;++this.p;let r=!1;for(;this.p<this.N&&(++this.p,!(this.input[this.p-1]===this.input[e]&&!r));)r?r=!1:this.input[this.p-1]==="\\"&&(r=!0);return new sr(this.input,e,this.p,this.file)}*readFileNameTemplate(e){let{outputDelimiterLeft:r}=e,i=[","," ",r],n=new Set(i);for(;this.p<this.N&&!n.has(this.peek());)yield this.match(r)?this.readOutputToken(e):this.readHTMLToken(i)}match(e){for(let r=0;r<e.length;r++)if(e[r]!==this.input[this.p+r])return!1;return!0}rmatch(e){for(let r=0;r<e.length;r++)if(e[e.length-1-r]!==this.input[this.p-1-r])return!1;return!0}peekType(e=0){return this.p+e>=this.N?0:z[this.input.charCodeAt(this.p+e)]}peek(e=0){return this.p+e>=this.N?"":this.input[this.p+e]}skipBlank(){for(;this.peekType()&Ne;)++this.p}},gr=class{static{s(this,"ParseStream")}constructor(e,r){this.handlers={},this.stopRequested=!1,this.tokens=e,this.parseToken=r}on(e,r){return this.handlers[e]=r,this}trigger(e,r){let i=this.handlers[e];return i?(i.call(this,r),!0):!1}start(){this.trigger("start");let e;for(;!this.stopRequested&&(e=this.tokens.shift());){if(this.trigger("token",e)||ze(e)&&this.trigger(`tag:${e.name}`,e))continue;let r=this.parseToken(e,this.tokens);this.trigger("template",r)}return this.stopRequested||this.trigger("end"),this}stop(){return this.stopRequested=!0,this}},Qe=class{static{s(this,"TemplateImpl")}constructor(e){this.token=e}},P=class extends Qe{static{s(this,"Tag")}constructor(e,r,i){super(e),this.name=e.name,this.liquid=i,this.tokenizer=e.tokenizer}},be=class{static{s(this,"Hash")}constructor(e,r){this.hash={};let i=e instanceof Y?e:new Y(e,{});for(let n of i.readHashes(r))this.hash[n.name.content]=n.value}*render(e){let r={};for(let i of Object.keys(this.hash))r[i]=this.hash[i]===void 0?!0:yield N(this.hash[i],e);return r}};function vo(t){return class extends P{constructor(e,r,i){super(e,r,i),B(t.parse)&&t.parse.call(this,e,r)}*render(e,r){let i=yield new be(this.token.args,e.opts.keyValueSeparator).render(e);return yield t.render.call(this,e,r,i)}}}s(vo,"createTagClass");function an(t){return H(t)}s(an,"isKeyValuePair");var St=class{static{s(this,"Filter")}constructor(e,r,i){this.token=e,this.name=e.name,this.handler=B(r)?r:B(r?.handler)?r.handler:Zi,this.raw=!B(r)&&!!r?.raw,this.args=e.args,this.liquid=i}*render(e,r){let i=[];for(let n of this.args)an(n)?i.push([n[0],yield N(n[1],r)]):i.push(yield N(n,r));return yield this.handler.apply({context:r,token:this.token,liquid:this.liquid},[e,...i])}},G=class{static{s(this,"Value")}constructor(e,r){this.filters=[];let i=typeof e=="string"?new Y(e,r.options.operators).readFilteredValue():e;this.initial=i.initial,this.filters=i.filters.map(n=>new St(n,this.getFilter(r,n.name),r))}*value(e,r){r=r||e.opts.lenientIf&&this.filters.length>0&&this.filters[0].name==="default";let i=yield this.initial.evaluate(e,r);for(let n of this.filters)i=yield n.render(i,e);return i}getFilter(e,r){let i=e.filters[r];return W(i||!e.options.strictFilters,()=>`undefined filter: ${r}`),i}},mr=class extends Qe{static{s(this,"Output")}constructor(e,r){var i;super(e);let n=new Y(e.input,r.options.operators,e.file,e.contentRange);this.value=new G(n.readFilteredValue(),r);let o=this.value.filters,a=r.options.outputEscape;if(!(!((i=o[o.length-1])===null||i===void 0)&&i.raw)&&a){let l=new vt(toString.call(a),[],"",0,0);o.push(new St(l,a,r))}}*render(e,r){let i=yield this.value.value(e,!1);r.write(i)}*arguments(){yield this.value}},yr=class extends Qe{static{s(this,"HTML")}constructor(e){super(e),this.str=e.getContent()}*render(e,r){r.write(this.str)}},Fe=class t{static{s(this,"Variable")}constructor(e,r){this.segments=e,this.location=r}toString(){return Tt(this.segments,!0)}toArray(){function*e(...r){for(let i of r)i instanceof t?yield Array.from(e(...i.segments)):yield i}return s(e,"_visit"),Array.from(e(...this.segments))}},He=class{static{s(this,"VariableMap")}constructor(){this.map=new Map}get(e){let r=Tt([e.segments[0]]);return this.map.has(r)||this.map.set(r,[]),this.map.get(r)}has(e){return this.map.has(Tt([e.segments[0]]))}push(e){this.get(e).push(e)}asObject(){return Object.fromEntries(this.map)}},ln={partials:!0};function*un(t,e,r){let i=new He,n=new He,o=new He,a=new kt(new Set),l=new Set;function c(d,m){i.push(d);let T=m.alias(d);if(T!==void 0){let O=T.segments[0];k(O)&&!a.has(O)&&n.push(T)}else{let O=d.segments[0];k(O)&&!m.has(O)&&n.push(d)}for(let O of d.segments)O instanceof Fe&&c(O,m)}s(c,"updateVariables");function*h(d,m){if(d.arguments)for(let T of d.arguments())for(let O of Ni(T))c(O,m);if(d.localScope)for(let T of d.localScope()){m.add(T.content),m.deleteAlias(T.content);let[O,j]=T.getPosition();o.push(new Fe([T.content],{row:O,col:j,file:T.file}))}if(d.children)if(d.partialScope){let T=d.partialScope();if(T===void 0){for(let D of yield d.children(e,r))yield h(D,m);return}if(l.has(T.name))return;let O=new Set,j=T.isolated?new kt(O):m.push(O);for(let D of T.scope)if(k(D))O.add(D);else{let[ae,xe]=D;O.add(ae);let Se=Array.from(Ni(xe));Se.length&&j.setAlias(ae,Se[0].segments)}for(let D of yield d.children(e,r))yield h(D,j),l.add(T.name);j.pop()}else{d.blockScope&&m.push(new Set(d.blockScope()));for(let T of yield d.children(e,r))yield h(T,m);d.blockScope&&m.pop()}}s(h,"visit");for(let d of t)yield h(d,a);return{variables:i.asObject(),globals:n.asObject(),locals:o.asObject()}}s(un,"_analyze");function me(t,e={}){let r=Object.assign(Object.assign({},ln),e);return ue(un(t,r.partials,!1))}s(me,"analyze");function ye(t,e={}){let r=Object.assign(Object.assign({},ln),e);return ce(un(t,r.partials,!0))}s(ye,"analyzeSync");var kt=class{static{s(this,"DummyScope")}constructor(e){this.stack=[{names:e,aliases:new Map}]}has(e){for(let r of this.stack)if(r.names.has(e))return!0;return!1}push(e){return this.stack.push({names:e,aliases:new Map}),this}pop(){var e;return(e=this.stack.pop())===null||e===void 0?void 0:e.names}add(e){this.stack[0].names.add(e)}alias(e){let r=e.segments[0];if(!k(r))return;let i=this.getAlias(r);if(i!==void 0)return new Fe([...i,...e.segments.slice(1)],e.location)}setAlias(e,r){this.stack[this.stack.length-1].aliases.set(e,r)}deleteAlias(e){this.stack[this.stack.length-1].aliases.delete(e)}getAlias(e){for(let r of this.stack){if(r.aliases.has(e))return r.aliases.get(e);if(r.names.has(e))return}}};function*Ni(t){Q(t)?yield*je(t):t instanceof G&&(yield*xo(t))}s(Ni,"extractVariables");function*xo(t){for(let e of t.initial.postfix)Q(e)&&(yield*je(e));for(let e of t.filters)for(let r of e.args)an(r)&&r[1]?yield*je(r[1]):Q(r)&&(yield*je(r))}s(xo,"extractFilteredValueVariables");function*je(t){hn(t)?(yield*je(t.lhs),yield*je(t.rhs)):Ot(t)&&(yield wr(t))}s(je,"extractValueTokenVariables");function wr(t){let e=[],r=t.file,i=t.props[0];r=r||i.file,vr(i)||Ci(i)||$i(i)?e.push(i.content):Ot(i)&&e.push(...wr(i).segments);for(let a of t.props.slice(1))r=r||a.file,vr(a)||Ci(a)||$i(a)?e.push(a.content):Ot(a)&&e.push(wr(a));let[n,o]=t.getPosition();return new Fe(e,{row:n,col:o,file:r})}s(wr,"extractPropertyAccessVariable");var Mi=/^[\u0080-\uFFFFa-zA-Z_][\u0080-\uFFFFa-zA-Z0-9_-]*$/;function Tt(t,e=!1){let r=[],i=t[0];k(i)&&(!e||i.match(Mi)?r.push(`${i}`):r.push(`['${i}']`));for(let n of t.slice(1))n instanceof Fe?r.push(`[${Tt(n.segments)}]`):k(n)?n.match(Mi)?r.push(`.${n}`):r.push(`['${n}']`):r.push(`[${n}]`);return r.join("")}s(Tt,"segmentsString");var Ae;(function(t){t.Partials="partials",t.Layouts="layouts",t.Root="root"})(Ae||(Ae={}));var br=class{static{s(this,"Loader")}constructor(e){if(this.options=e,e.relativeReference){let r=e.fs.sep;W(r,"`fs.sep` is required for relative reference");let i=new RegExp(["."+r,".."+r,"./","../"].map(n=>ds(n)).join("|"));this.shouldLoadRelative=n=>i.test(n)}else this.shouldLoadRelative=r=>!1;this.contains=this.options.fs.contains||(()=>!0)}*lookup(e,r,i,n){let{fs:o}=this.options,a=this.options[r];for(let l of this.candidates(e,a,n,r!==Ae.Root))if(i?o.existsSync(l):yield o.exists(l))return l;throw this.lookupError(e,a)}*candidates(e,r,i,n){let{fs:o,extname:a}=this.options;if(this.shouldLoadRelative(e)&&i){let l=o.resolve(this.dirname(i),e,a);for(let c of r)if(!n||this.contains(c,l)){yield l;break}}for(let l of r){let c=o.resolve(l,e,a);(!n||this.contains(l,c))&&(yield c)}if(o.fallback!==void 0){let l=o.fallback(e);l!==void 0&&(yield l)}}dirname(e){let r=this.options.fs;return W(r.dirname,"`fs.dirname` is required for relative reference"),r.dirname(e)}lookupError(e,r){let i=new Error("ENOENT");return i.message=`ENOENT: Failed to lookup "${e}" in "${r}"`,i.code="ENOENT",i}},le=class{static{s(this,"Parser")}constructor(e){this.liquid=e,this.cache=this.liquid.options.cache,this.fs=this.liquid.options.fs,this.parseFile=this.cache?this._parseFileCached:this._parseFile,this.loader=new br(this.liquid.options),this.parseLimit=new Ge("parse length",e.options.parseLimit)}parse(e,r){e=String(e),this.parseLimit.use(e.length);let n=new Y(e,this.liquid.options.operators,r).readTopLevelTokens(this.liquid.options);return this.parseTokens(n)}parseTokens(e){let r,i=[],n=[];for(;r=e.shift();)try{i.push(this.parseToken(r,e))}catch(o){if(this.liquid.options.catchAllErrors)n.push(o);else throw o}if(n.length)throw new dt(n);return i}parseToken(e,r){try{if(ze(e)){let i=this.liquid.tags[e.name];return W(i,`tag "${e.name}" not found`),new i(e,r,this.liquid,this)}return ko(e)?new mr(e,this.liquid):new yr(e)}catch(i){throw de.is(i)?i:new Wt(i,e)}}parseStream(e){return new gr(e,(r,i)=>this.parseToken(r,i))}*_parseFileCached(e,r,i=Ae.Root,n){let o=this.cache,a=this.loader.shouldLoadRelative(e)?n+","+e:i+":"+e,l=yield o.read(a);if(l)return l;let c=this._parseFile(e,r,i,n),h=r?yield c:ue(c);o.write(a,h);try{return yield h}catch(d){throw o.remove(a),d}}*_parseFile(e,r,i=Ae.Root,n){let o=yield this.loader.lookup(e,i,r,n);return this.parse(r?this.fs.readFileSync(o):yield this.fs.readFile(o),o)}},R;(function(t){t[t.Number=1]="Number",t[t.Literal=2]="Literal",t[t.Tag=4]="Tag",t[t.Output=8]="Output",t[t.HTML=16]="HTML",t[t.Filter=32]="Filter",t[t.Hash=64]="Hash",t[t.PropertyAccess=128]="PropertyAccess",t[t.Word=256]="Word",t[t.Range=512]="Range",t[t.Quoted=1024]="Quoted",t[t.Operator=2048]="Operator",t[t.FilteredValue=4096]="FilteredValue",t[t.Delimited=12]="Delimited"})(R||(R={}));function So(t){return!!(re(t)&R.Delimited)}s(So,"isDelimitedToken");function cn(t){return re(t)===R.Operator}s(cn,"isOperatorToken");function Hr(t){return re(t)===R.HTML}s(Hr,"isHTMLToken");function ko(t){return re(t)===R.Output}s(ko,"isOutputToken");function ze(t){return re(t)===R.Tag}s(ze,"isTagToken");function vr(t){return re(t)===R.Quoted}s(vr,"isQuotedToken");function Ci(t){return re(t)===R.Number}s(Ci,"isNumberToken");function Ot(t){return re(t)===R.PropertyAccess}s(Ot,"isPropertyAccessToken");function $i(t){return re(t)===R.Word}s($i,"isWordToken");function hn(t){return re(t)===R.Range}s(hn,"isRangeToken");function Q(t){return(re(t)&1667)>0}s(Q,"isValueToken");function re(t){return t?t.kind:-1}s(re,"getKind");var _e=class t{static{s(this,"Context")}constructor(e={},r=Pe,i={},{memoryLimit:n,renderLimit:o}={}){var a,l,c,h,d;this.scopes=[{}],this.registers={},this.breakCalled=!1,this.continueCalled=!1,this.sync=!!i.sync,this.opts=r,this.globals=(a=i.globals)!==null&&a!==void 0?a:r.globals,this.environments=Et(e)?e:Object(e),this.strictVariables=(l=i.strictVariables)!==null&&l!==void 0?l:this.opts.strictVariables,this.ownPropertyOnly=(c=i.ownPropertyOnly)!==null&&c!==void 0?c:r.ownPropertyOnly,this.memoryLimit=n??new Ge("memory alloc",(h=i.memoryLimit)!==null&&h!==void 0?h:r.memoryLimit),this.renderLimit=o??new Ge("template render",nn().now()+((d=i.renderLimit)!==null&&d!==void 0?d:r.renderLimit))}getRegister(e){return this.registers[e]=this.registers[e]||{}}setRegister(e,r){return this.registers[e]=r}saveRegister(...e){return e.map(r=>[r,this.getRegister(r)])}restoreRegister(e){return e.forEach(([r,i])=>this.setRegister(r,i))}getAll(){return[this.globals,this.environments,...this.scopes].reduce((e,r)=>mt(e,r),{})}get(e){return this.getSync(e)}getSync(e){return ce(this._get(e))}*_get(e){let r=this.findScope(e[0]);return yield this._getFromScope(r,e)}getFromScope(e,r){return ce(this._getFromScope(e,r))}*_getFromScope(e,r,i=this.strictVariables){k(r)&&(r=r.split("."));for(let n=0;n<r.length;n++)if(e=yield To(e,r[n],this.ownPropertyOnly),i&&ps(e))throw new Gt(r.slice(0,n+1).join("."));return e}push(e){return this.scopes.push(e)}pop(){return this.scopes.pop()}bottom(){return this.scopes[0]}spawn(e={}){return new t(e,this.opts,{sync:this.sync,globals:this.globals,strictVariables:this.strictVariables},{renderLimit:this.renderLimit,memoryLimit:this.memoryLimit})}findScope(e){for(let r=this.scopes.length-1;r>=0;r--){let i=this.scopes[r];if(e in i)return i}return e in this.environments?this.environments:this.globals}};function To(t,e,r){if(t=Hi(t),e=L(e),K(t))return t;if(H(t)&&e<0)return t[t.length+ +e];let i=Oo(t,e,r);return i===void 0&&t instanceof fe?t.liquidMethodMissing(e):B(i)?i.call(t):e==="size"?Eo(t):e==="first"?_o(t):e==="last"?Lo(t):i}s(To,"readProperty");function Oo(t,e,r){if(!(r&&!Ir.call(t,e)&&!(t instanceof fe)))return t[e]}s(Oo,"readJSProperty");function _o(t){return H(t)?t[0]:t.first}s(_o,"readFirst");function Lo(t){return H(t)?t[t.length-1]:t.last}s(Lo,"readLast");function Eo(t){if(Ir.call(t,"size")||t.size!==void 0)return t.size;if(H(t)||k(t))return t.length;if(typeof t=="object")return Object.keys(t).length}s(Eo,"readSize");var Ee;(function(t){t[t.OUTPUT=0]="OUTPUT",t[t.STORE=1]="STORE"})(Ee||(Ee={}));var Fo=X(Math.abs),Ao=X(Math.max),zo=X(Math.min),Ro=X(Math.ceil),Do=X((t,e,r=!1)=>r?Math.floor(t/e):t/e),qo=X(Math.floor),Po=X((t,e)=>t-e),jo=X((t,e)=>t%e),No=X((t,e)=>t*e);function Mo(t,e=0){t=L(t),e=L(e);let r=Math.pow(10,e);return Math.round(t*r)/r}s(Mo,"round");function Co(t,e){return t=L(t),e=L(e),Number(t)+Number(e)}s(Co,"plus");var $o=Object.freeze({__proto__:null,abs:Fo,at_least:Ao,at_most:zo,ceil:Ro,divided_by:Do,floor:qo,minus:Po,modulo:jo,times:No,round:Mo,plus:Co}),Vo=s(t=>decodeURIComponent(g(t)).replace(/\+/g," "),"url_decode"),Bo=s(t=>encodeURIComponent(g(t)).replace(/%20/g,"+"),"url_encode"),Io=s(t=>encodeURIComponent(g(t)).replace(/%20/g,"+").replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()),"cgi_escape"),Uo=s(t=>encodeURI(g(t)).replace(/%5B/g,"[").replace(/%5D/g,"]"),"uri_escape"),Vi=/[^\p{M}\p{L}\p{Nd}]+/ug,Ho={raw:/\s+/g,default:Vi,pretty:/[^\p{M}\p{L}\p{Nd}._~!$&'()+,;=@]+/ug,ascii:/[^A-Za-z0-9]+/g,latin:Vi,none:null};function Wo(t,e="default",r=!1){t=g(t);let i=Ho[e];return i&&(e==="latin"&&(t=Jo(t)),t=t.replace(i,"-").replace(/^-|-$/g,"")),r?t:t.toLowerCase()}s(Wo,"slugify");function Jo(t){return t.replace(/[àáâãäå]/g,"a").replace(/[æ]/g,"ae").replace(/[ç]/g,"c").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[ð]/g,"d").replace(/[ñ]/g,"n").replace(/[òóôõöø]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y").replace(/[ß]/g,"ss").replace(/[œ]/g,"oe").replace(/[þ]/g,"th").replace(/[ẞ]/g,"SS").replace(/[Œ]/g,"OE").replace(/[Þ]/g,"TH")}s(Jo,"removeAccents");var Yo=Object.freeze({__proto__:null,url_decode:Vo,url_encode:Bo,cgi_escape:Io,uri_escape:Uo,slugify:Wo}),Go=X(function(t,e){let r=U(t),i=K(e)?" ":g(e),n=r.length*(1+i.length);return this.context.memoryLimit.use(n),r.join(i)}),Zo=X(t=>Wi(t)?Ji(t):""),Qo=X(t=>Wi(t)?t[0]:""),Xo=X(function(t){let e=U(t);return this.context.memoryLimit.use(e.length),[...e].reverse()});function*Ko(t,e){let r=[],i=U(t);this.context.memoryLimit.use(i.length);for(let n of i)r.push([n,e?yield this.context._getFromScope(n,g(e).split("."),!1):n]);return r.sort((n,o)=>{let a=n[1],l=o[1];return a<l?-1:a>l?1:0}).map(n=>n[0])}s(Ko,"sort");function ea(t,e){let r=g(e),i=e===void 0?Oi:(o,a)=>Oi(o[r],a[r]),n=U(t);return this.context.memoryLimit.use(n.length),[...n].sort(i)}s(ea,"sort_natural");var ta=s(t=>t&&t.length||0,"size");function*ra(t,e){let r=[],i=U(t);this.context.memoryLimit.use(i.length);for(let n of i)r.push(yield this.context._getFromScope(n,g(e),!1));return r}s(ra,"map");function*ia(t,e){let r=0,i=U(t);for(let n of i){let o=Number(e?yield this.context._getFromScope(n,g(e),!1):n);r+=Number.isNaN(o)?0:o}return r}s(ia,"sum");function na(t){let e=U(t);return this.context.memoryLimit.use(e.length),e.filter(r=>!K(L(r)))}s(na,"compact");function fn(t,e=[]){let r=U(t),i=U(e);return this.context.memoryLimit.use(r.length+i.length),r.concat(i)}s(fn,"concat");function sa(t,e){return fn.call(this,t,[e])}s(sa,"push");function oa(t,e){let r=U(t);this.context.memoryLimit.use(r.length);let i=[...r];return i.unshift(e),i}s(oa,"unshift");function aa(t){let e=[...U(t)];return e.pop(),e}s(aa,"pop");function la(t){let e=U(t);this.context.memoryLimit.use(e.length);let r=[...e];return r.shift(),r}s(la,"shift");function ua(t,e,r=1){return t=L(t),K(t)?[]:(H(t)||(t=g(t)),e=e<0?t.length+e:e,this.context.memoryLimit.use(r),t.slice(e,e+r))}s(ua,"slice");function dn(t){return this.context.opts.jekyllWhere?e=>Je.is(t)?he(e,t):H(e)?Js(e,t):he(e,t):t===void 0?e=>Le(e,this.context):e=>he(e,t)}s(dn,"expectedMatcher");function*pn(t,e,r,i){let n=[];e=U(e),this.context.memoryLimit.use(e.length);let o=new Y(g(r)).readScopeValue();for(let l of e)n.push(yield N(o,this.context.spawn(l)));let a=dn.call(this,i);return e.filter((l,c)=>a(n[c])===t)}s(pn,"filter");function*gn(t,e,r,i){let n=[],o=new G(g(i),this.liquid),a=U(e);this.context.memoryLimit.use(a.length);for(let l of a){this.context.push({[r]:l});let c=yield o.value(this.context);this.context.pop(),c===t&&n.push(l)}return n}s(gn,"filter_exp");function*ca(t,e,r){return yield*pn.call(this,!0,t,e,r)}s(ca,"where");function*ha(t,e,r){return yield*pn.call(this,!1,t,e,r)}s(ha,"reject");function*fa(t,e,r){return yield*gn.call(this,!0,t,e,r)}s(fa,"where_exp");function*da(t,e,r){return yield*gn.call(this,!1,t,e,r)}s(da,"reject_exp");function*pa(t,e){let r=new Map;t=Xe(t);let i=new Y(g(e)).readScopeValue();this.context.memoryLimit.use(t.length);for(let n of t){let o=yield N(i,this.context.spawn(n));r.has(o)||r.set(o,[]),r.get(o).push(n)}return[...r.entries()].map(([n,o])=>({name:n,items:o}))}s(pa,"group_by");function*ga(t,e,r){let i=new Map,n=new G(g(r),this.liquid);t=Xe(t),this.context.memoryLimit.use(t.length);for(let o of t){this.context.push({[e]:o});let a=yield n.value(this.context);this.context.pop(),i.has(a)||i.set(a,[]),i.get(a).push(o)}return[...i.entries()].map(([o,a])=>({name:o,items:a}))}s(ga,"group_by_exp");function*Wr(t,e,r){let i=new Y(g(e)).readScopeValue(),n=U(t),o=dn.call(this,r);for(let a=0;a<n.length;a++){let l=yield N(i,this.context.spawn(n[a]));if(o(l))return[a,n[a]]}}s(Wr,"search");function*Jr(t,e,r){let i=new G(g(r),this.liquid),n=U(t);for(let o=0;o<n.length;o++){this.context.push({[e]:n[o]});let a=yield i.value(this.context);if(this.context.pop(),a)return[o,n[o]]}}s(Jr,"search_exp");function*ma(t,e,r){return!!(yield*Wr.call(this,t,e,r))}s(ma,"has");function*ya(t,e,r){return!!(yield*Jr.call(this,t,e,r))}s(ya,"has_exp");function*wa(t,e,r){let i=yield*Wr.call(this,t,e,r);return i?i[0]:void 0}s(wa,"find_index");function*ba(t,e,r){let i=yield*Jr.call(this,t,e,r);return i?i[0]:void 0}s(ba,"find_index_exp");function*va(t,e,r){let i=yield*Wr.call(this,t,e,r);return i?i[1]:void 0}s(va,"find");function*xa(t,e,r){let i=yield*Jr.call(this,t,e,r);return i?i[1]:void 0}s(xa,"find_exp");function Sa(t){return t=U(t),this.context.memoryLimit.use(t.length),[...new Set(t)]}s(Sa,"uniq");function ka(t,e=1){if(t=L(t),K(t))return[];H(t)||(t=g(t)),this.context.memoryLimit.use(e);let r=[...t].sort(()=>Math.random()-.5);return e===1?r[0]:r.slice(0,e)}s(ka,"sample");var Ta=Object.freeze({__proto__:null,join:Go,last:Zo,first:Qo,reverse:Xo,sort:Ko,sort_natural:ea,size:ta,map:ra,sum:ia,compact:na,concat:fn,push:sa,unshift:oa,pop:aa,shift:la,slice:ua,where:ca,reject:ha,where_exp:fa,reject_exp:da,group_by:pa,group_by_exp:ga,has:ma,has_exp:ya,find_index:wa,find_index_exp:ba,find:va,find_exp:xa,uniq:Sa,sample:ka});function Yr(t,e,r){var i,n,o;let a=((i=t?.length)!==null&&i!==void 0?i:0)+((n=e?.length)!==null&&n!==void 0?n:0)+((o=r?.length)!==null&&o!==void 0?o:0);this.context.memoryLimit.use(a);let l=yn(t,this.context.opts,r);return l?(e=L(e),e=K(e)?this.context.opts.dateFormat:g(e),ct(l,e)):t}s(Yr,"date");function Oa(t){return Yr.call(this,t,"%Y-%m-%dT%H:%M:%S%:z")}s(Oa,"date_to_xmlschema");function _a(t){return Yr.call(this,t,"%a, %d %b %Y %H:%M:%S %z")}s(_a,"date_to_rfc822");function La(t,e,r){return mn.call(this,t,"%b",e,r)}s(La,"date_to_string");function Ea(t,e,r){return mn.call(this,t,"%B",e,r)}s(Ea,"date_to_long_string");function mn(t,e,r,i){let n=yn(t,this.context.opts);if(!n)return t;if(r==="ordinal"){let o=n.getDate();return i==="US"?ct(n,`${e} ${o}%q, %Y`):ct(n,`${o}%q ${e} %Y`)}return ct(n,`%d ${e} %Y`)}s(mn,"stringify_date");function yn(t,e,r){let i,n=r??e.timezoneOffset,o=e.locale;return t=L(t),t==="now"||t==="today"?i=new we(Date.now(),o,n):Lt(t)?i=new we(t*1e3,o,n):k(t)?/^\d+$/.test(t)?i=new we(+t*1e3,o,n):e.preserveTimezones&&r===void 0?i=we.createDateFixedToTimezone(t,o):i=new we(t,o,n):i=new we(t,o,n),i.valid()?i:void 0}s(yn,"parseDate");var Fa=Object.freeze({__proto__:null,date:Yr,date_to_xmlschema:Oa,date_to_rfc822:_a,date_to_string:La,date_to_long_string:Ea}),Ut=/[\u4E00-\u9FFF\uF900-\uFAFF\u3400-\u4DBF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF]/gu,Bi=/[^\u4E00-\u9FFF\uF900-\uFAFF\u3400-\u4DBF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF\s]+/gu;function Aa(t,e){W(arguments.length===2,"append expect 2 arguments");let r=g(t),i=g(e);return this.context.memoryLimit.use(r.length+i.length),r+i}s(Aa,"append");function za(t,e){W(arguments.length===2,"prepend expect 2 arguments");let r=g(t),i=g(e);return this.context.memoryLimit.use(r.length+i.length),i+r}s(za,"prepend");function Ra(t,e){let r=g(t);return this.context.memoryLimit.use(r.length),e?(e=Ur(g(e)),r.replace(new RegExp(`^[${e}]+`,"g"),"")):r.replace(/^\s+/,"")}s(Ra,"lstrip");function Da(t){let e=g(t);return this.context.memoryLimit.use(e.length),e.toLowerCase()}s(Da,"downcase");function qa(t){let e=g(t);return this.context.memoryLimit.use(e.length),g(e).toUpperCase()}s(qa,"upcase");function Pa(t,e){let r=g(t);return this.context.memoryLimit.use(r.length),r.split(g(e)).join("")}s(Pa,"remove");function ja(t,e){let r=g(t);return this.context.memoryLimit.use(r.length),r.replace(g(e),"")}s(ja,"remove_first");function Na(t,e){let r=g(t);this.context.memoryLimit.use(r.length);let i=g(e),n=r.lastIndexOf(i);return n===-1?r:r.substring(0,n)+r.substring(n+i.length)}s(Na,"remove_last");function Ma(t,e){return t=g(t),this.context.memoryLimit.use(t.length),e?(e=Ur(g(e)),t.replace(new RegExp(`[${e}]+$`,"g"),"")):t.replace(/\s+$/,"")}s(Ma,"rstrip");function Ca(t,e){let r=g(t);this.context.memoryLimit.use(r.length);let i=r.split(g(e));for(;i.length&&i[i.length-1]==="";)i.pop();return i}s(Ca,"split");function $a(t,e){let r=g(t);return this.context.memoryLimit.use(r.length),e?(e=Ur(g(e)),r.replace(new RegExp(`^[${e}]+`,"g"),"").replace(new RegExp(`[${e}]+$`,"g"),"")):r.trim()}s($a,"strip");function Va(t){let e=g(t);return this.context.memoryLimit.use(e.length),e.replace(/\r?\n/gm,"")}s(Va,"strip_newlines");function Ba(t){return t=g(t),this.context.memoryLimit.use(t.length),t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}s(Ba,"capitalize");function Ia(t,e,r){let i=g(t);return this.context.memoryLimit.use(i.length),i.split(g(e)).join(r)}s(Ia,"replace");function Ua(t,e,r){let i=g(t);return this.context.memoryLimit.use(i.length),i.replace(g(e),r)}s(Ua,"replace_first");function Ha(t,e,r){let i=g(t);this.context.memoryLimit.use(i.length);let n=g(e),o=i.lastIndexOf(n);if(o===-1)return i;let a=g(r);return i.substring(0,o)+a+i.substring(o+n.length)}s(Ha,"replace_last");function Wa(t,e=50,r="..."){let i=g(t);return this.context.memoryLimit.use(i.length),i.length<=e?t:i.substring(0,e-r.length)+r}s(Wa,"truncate");function Ja(t,e=15,r="..."){let i=g(t);this.context.memoryLimit.use(i.length);let n=i.split(/\s+/);e<=0&&(e=1);let o=n.slice(0,e).join(" ");return n.length>=e&&(o+=r),o}s(Ja,"truncatewords");function Ya(t){let e=g(t);return this.context.memoryLimit.use(e.length),e.replace(/\s+/g," ")}s(Ya,"normalize_whitespace");function Ga(t,e){let r=g(t);if(this.context.memoryLimit.use(r.length),t=r.trim(),!t)return 0;switch(e){case"cjk":return(t.match(Ut)||[]).length+(t.match(Bi)||[]).length;case"auto":return Ut.test(t)?t.match(Ut).length+(t.match(Bi)||[]).length:t.split(/\s+/).length;default:return t.split(/\s+/).length}}s(Ga,"number_of_words");function Za(t,e="and"){switch(this.context.memoryLimit.use(t.length),t.length){case 0:return"";case 1:return t[0];case 2:return`${t[0]} ${e} ${t[1]}`;default:return`${t.slice(0,-1).join(", ")}, ${e} ${t[t.length-1]}`}}s(Za,"array_to_sentence_string");var Qa=Object.freeze({__proto__:null,append:Aa,prepend:za,lstrip:Ra,downcase:Da,upcase:qa,remove:Pa,remove_first:ja,remove_last:Na,rstrip:Ma,split:Ca,strip:$a,strip_newlines:Va,capitalize:Ba,replace:Ia,replace_first:Ua,replace_last:Ha,truncate:Wa,truncatewords:Ja,normalize_whitespace:Ya,number_of_words:Ga,array_to_sentence_string:Za}),Xa=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},po),$o),Yo),Ta),Fa),Qa),on),xr=class extends P{static{s(this,"AssignTag")}constructor(e,r,i){super(e,r,i),this.identifier=this.tokenizer.readIdentifier(),this.key=this.identifier.content,this.tokenizer.assert(this.key,"expected variable name"),this.tokenizer.skipBlank(),this.tokenizer.assert(this.tokenizer.peek()==="=",'expected "="'),this.tokenizer.advance(),this.value=new G(this.tokenizer.readFilteredValue(),this.liquid)}*render(e){e.bottom()[this.key]=yield this.value.value(e,this.liquid.options.lenientIf)}*arguments(){yield this.value}*localScope(){yield this.identifier}},Ii=["offset","limit","reversed"],Sr=class extends P{static{s(this,"ForTag")}constructor(e,r,i,n){super(e,r,i);let o=this.tokenizer.readIdentifier(),a=this.tokenizer.readIdentifier(),l=this.tokenizer.readValue();if(!o.size()||a.content!=="in"||!l)throw new Error(`illegal tag: ${e.getText()}`);this.variable=o.content,this.collection=l,this.hash=new be(this.tokenizer,i.options.keyValueSeparator),this.templates=[],this.elseTemplates=[];let c,h=n.parseStream(r).on("start",()=>c=this.templates).on("tag:else",d=>{pt(d.args),c=this.elseTemplates}).on("tag:endfor",d=>{pt(d.args),h.stop()}).on("template",d=>c.push(d)).on("end",()=>{throw new Error(`tag ${e.getText()} not closed`)});h.start()}*render(e,r){let i=this.liquid.renderer,n=Xe(yield N(this.collection,e));if(!n.length){yield i.renderTemplates(this.elseTemplates,e,r);return}let o="continue-"+this.variable+"-"+this.collection.getText();e.push({continue:e.getRegister(o)});let a=yield this.hash.render(e);e.pop(),n=(this.liquid.options.orderedFilterParameters?Object.keys(a).filter(h=>Ii.includes(h)):Ii.filter(h=>a[h]!==void 0)).reduce((h,d)=>d==="offset"?el(h,a.offset):d==="limit"?tl(h,a.limit):Ka(h),n),e.setRegister(o,(a.offset||0)+n.length);let c={forloop:new Ye(n.length,this.collection.getText(),this.variable)};e.push(c);for(let h of n){if(c[this.variable]=h,e.continueCalled=e.breakCalled=!1,yield i.renderTemplates(this.templates,e,r),e.breakCalled)break;c.forloop.next()}e.continueCalled=e.breakCalled=!1,e.pop()}*children(){let e=this.templates.slice();return this.elseTemplates&&e.push(...this.elseTemplates),e}*arguments(){yield this.collection;for(let e of Object.values(this.hash.hash))Q(e)&&(yield e)}blockScope(){return[this.variable,"forloop"]}};function Ka(t){return[...t].reverse()}s(Ka,"reversed");function el(t,e){return t.slice(e)}s(el,"offset");function tl(t,e){return t.slice(0,e)}s(tl,"limit");var kr=class extends P{static{s(this,"CaptureTag")}constructor(e,r,i,n){for(super(e,r,i),this.templates=[],this.identifier=this.readVariable(),this.variable=this.identifier.content;r.length;){let o=r.shift();if(ze(o)&&o.name==="endcapture")return;this.templates.push(n.parseToken(o,r))}throw new Error(`tag ${e.getText()} not closed`)}readVariable(){let e=this.tokenizer.readIdentifier();if(e.content||(e=this.tokenizer.readQuoted(),e))return e;throw this.tokenizer.error("invalid capture name")}*render(e){let i=yield this.liquid.renderer.renderTemplates(this.templates,e);e.bottom()[this.variable]=i}*children(){return this.templates}*localScope(){yield this.identifier}},Tr=class extends P{static{s(this,"CaseTag")}constructor(e,r,i,n){super(e,r,i),this.branches=[],this.elseTemplates=[],this.value=new G(this.tokenizer.readFilteredValue(),this.liquid),this.elseTemplates=[];let o=[],a=0,l=n.parseStream(r).on("tag:when",c=>{if(a>0)return;o=[];let h=[];for(;!c.tokenizer.end();)h.push(c.tokenizer.readValueOrThrow()),c.tokenizer.skipBlank(),c.tokenizer.peek()===","?c.tokenizer.readTo(","):c.tokenizer.readTo("or");this.branches.push({values:h,templates:o})}).on("tag:else",()=>{a++,o=this.elseTemplates}).on("tag:endcase",()=>l.stop()).on("template",c=>{(o!==this.elseTemplates||a===1)&&o.push(c)}).on("end",()=>{throw new Error(`tag ${e.getText()} not closed`)});l.start()}*render(e,r){let i=this.liquid.renderer,n=L(yield this.value.value(e,e.opts.lenientIf)),o=!1;for(let a of this.branches)for(let l of a.values){let c=yield N(l,e,e.opts.lenientIf);if(he(n,c)){yield i.renderTemplates(a.templates,e,r),o=!0;break}}o||(yield i.renderTemplates(this.elseTemplates,e,r))}*arguments(){yield this.value,yield*this.branches.flatMap(e=>e.values)}*children(){let e=this.branches.flatMap(r=>r.templates);return this.elseTemplates&&e.push(...this.elseTemplates),e}},Or=class extends P{static{s(this,"CommentTag")}constructor(e,r,i){for(super(e,r,i);r.length;){let n=r.shift();if(ze(n)&&n.name==="endcomment")return}throw new Error(`tag ${e.getText()} not closed`)}render(){}},_r=class extends P{static{s(this,"RenderTag")}constructor(e,r,i,n){super(e,r,i);let o=this.tokenizer;for(this.file=Gr(o,this.liquid,n),this.currentFile=e.file;!o.end();){o.skipBlank();let a=o.p,l=o.readIdentifier();if((l.content==="with"||l.content==="for")&&(o.skipBlank(),o.peek()!==":")){let c=o.readValue();if(c){let h=o.p,d=o.readIdentifier(),m;d.content==="as"?m=o.readIdentifier():o.p=h,this[l.content]={value:c,alias:m&&m.content},o.skipBlank(),o.peek()===","&&o.advance();continue}}o.p=a;break}this.hash=new be(o,i.options.keyValueSeparator)}*render(e,r){let{liquid:i,hash:n}=this,o=yield Zr(this.file,e,i);W(o,()=>`illegal file path "${o}"`);let a=e.spawn(),l=a.bottom();if(mt(l,yield n.render(e)),this.with){let{value:c,alias:h}=this.with;l[h||o]=yield N(c,e)}if(this.for){let{value:c,alias:h}=this.for,d=Xe(yield N(c,e));l.forloop=new Ye(d.length,c.getText(),h);for(let m of d){l[h]=m;let T=yield i._parsePartialFile(o,a.sync,this.currentFile);yield i.renderer.renderTemplates(T,a,r),l.forloop.next()}}else{let c=yield i._parsePartialFile(o,a.sync,this.currentFile);yield i.renderer.renderTemplates(c,a,r)}}*children(e,r){return e&&k(this.file)?yield this.liquid._parsePartialFile(this.file,r,this.currentFile):[]}partialScope(){if(k(this.file)){let e=Object.keys(this.hash.hash);if(this.with){let{value:r,alias:i}=this.with;k(i)?e.push([i,r]):k(this.file)&&e.push([this.file,r])}if(this.for){let{value:r,alias:i}=this.for;k(i)?e.push([i,r]):k(this.file)&&e.push([this.file,r])}return{name:this.file,isolated:!0,scope:e}}}*arguments(){for(let e of Object.values(this.hash.hash))Q(e)&&(yield e);if(this.with){let{value:e}=this.with;Q(e)&&(yield e)}if(this.for){let{value:e}=this.for;Q(e)&&(yield e)}}};function Gr(t,e,r){if(e.options.dynamicPartials){let o=t.readValue();if(t.assert(o,"illegal file path"),o.getText()==="none")return;if(vr(o)){let a=r.parse(Bs(o));return Ui(a)}return o}let i=[...t.readFileNameTemplate(e.options)],n=Ui(r.parseTokens(i));return n==="none"?void 0:n}s(Gr,"parseFilePath");function Ui(t){return t.length===1&&Hr(t[0].token)?t[0].token.getContent():t}s(Ui,"optimize");function*Zr(t,e,r){return typeof t=="string"?t:Array.isArray(t)?r.renderer.renderTemplates(t,e):yield N(t,e)}s(Zr,"renderFilePath");var Lr=class extends P{static{s(this,"IncludeTag")}constructor(e,r,i,n){super(e,r,i);let{tokenizer:o}=e;this.file=Gr(o,this.liquid,n),this.currentFile=e.file;let a=o.p;o.readIdentifier().content==="with"?(o.skipBlank(),o.peek()!==":"?this.withVar=o.readValue():o.p=a):o.p=a,this.hash=new be(o,i.options.jekyllInclude||i.options.keyValueSeparator)}*render(e,r){let{liquid:i,hash:n,withVar:o}=this,{renderer:a}=i,l=yield Zr(this.file,e,i);W(l,()=>`illegal file path "${l}"`);let c=e.saveRegister("blocks","blockMode");e.setRegister("blocks",{}),e.setRegister("blockMode",Ee.OUTPUT);let h=yield n.render(e);o&&(h[l]=yield N(o,e));let d=yield i._parsePartialFile(l,e.sync,this.currentFile);e.push(e.opts.jekyllInclude?{include:h}:h),yield a.renderTemplates(d,e,r),e.pop(),e.restoreRegister(c)}*children(e,r){return e&&k(this.file)?yield this.liquid._parsePartialFile(this.file,r,this.currentFile):[]}partialScope(){if(k(this.file)){let e;return this.liquid.options.jekyllInclude?e=["include"]:(e=Object.keys(this.hash.hash),this.withVar&&e.push([this.file,this.withVar])),{name:this.file,isolated:!1,scope:e}}}*arguments(){yield*Object.values(this.hash.hash).filter(Q),Q(this.file)&&(yield this.file),Q(this.withVar)&&(yield this.withVar)}},Er=class extends P{static{s(this,"DecrementTag")}constructor(e,r,i){super(e,r,i),this.identifier=this.tokenizer.readIdentifier(),this.variable=this.identifier.content}render(e,r){let i=e.environments;Lt(i[this.variable])||(i[this.variable]=0),r.write(g(--i[this.variable]))}*localScope(){yield this.identifier}},Fr=class extends P{static{s(this,"CycleTag")}constructor(e,r,i){super(e,r,i),this.candidates=[];let n=this.tokenizer.readValue();for(this.tokenizer.skipBlank(),n&&(this.tokenizer.peek()===":"?(this.group=n,this.tokenizer.advance()):this.candidates.push(n));!this.tokenizer.end();){let o=this.tokenizer.readValue();o&&this.candidates.push(o),this.tokenizer.readTo(",")}this.tokenizer.assert(this.candidates.length,()=>`empty candidates: "${e.getText()}"`)}*render(e,r){let n=`cycle:${yield N(this.group,e)}:`+this.candidates.join(","),o=e.getRegister("cycle"),a=o[n];a===void 0&&(a=o[n]=0);let l=this.candidates[a];return a=(a+1)%this.candidates.length,o[n]=a,yield N(l,e)}*arguments(){yield*this.candidates,this.group&&(yield this.group)}},Ar=class extends P{static{s(this,"IfTag")}constructor(e,r,i,n){super(e,r,i),this.branches=[];let o=[];n.parseStream(r).on("start",()=>this.branches.push({value:new G(e.tokenizer.readFilteredValue(),this.liquid),templates:o=[]})).on("tag:elsif",a=>{W(!this.elseTemplates,"unexpected elsif after else"),this.branches.push({value:new G(a.tokenizer.readFilteredValue(),this.liquid),templates:o=[]})}).on("tag:else",a=>{pt(a.args),W(!this.elseTemplates,"duplicated else"),o=this.elseTemplates=[]}).on("tag:endif",function(a){pt(a.args),this.stop()}).on("template",a=>o.push(a)).on("end",()=>{throw new Error(`tag ${e.getText()} not closed`)}).start()}*render(e,r){let i=this.liquid.renderer;for(let{value:n,templates:o}of this.branches){let a=yield n.value(e,e.opts.lenientIf);if(Le(a,e)){yield i.renderTemplates(o,e,r);return}}yield i.renderTemplates(this.elseTemplates||[],e,r)}*children(){let e=this.branches.flatMap(r=>r.templates);return this.elseTemplates&&e.push(...this.elseTemplates),e}arguments(){return this.branches.map(e=>e.value)}},zr=class extends P{static{s(this,"IncrementTag")}constructor(e,r,i){super(e,r,i),this.identifier=this.tokenizer.readIdentifier(),this.variable=this.identifier.content}render(e,r){let i=e.environments;Lt(i[this.variable])||(i[this.variable]=0);let n=i[this.variable];i[this.variable]++,r.write(g(n))}*localScope(){yield this.identifier}},Rr=class extends P{static{s(this,"LayoutTag")}constructor(e,r,i,n){super(e,r,i),this.file=Gr(this.tokenizer,this.liquid,n),this.currentFile=e.file,this.args=new be(this.tokenizer,i.options.keyValueSeparator),this.templates=n.parseTokens(r)}*render(e,r){let{liquid:i,args:n,file:o}=this,{renderer:a}=i;if(o===void 0){e.setRegister("blockMode",Ee.OUTPUT),yield a.renderTemplates(this.templates,e,r);return}let l=yield Zr(this.file,e,i);W(l,()=>`illegal file path "${l}"`);let c=yield i._parseLayoutFile(l,e.sync,this.currentFile);e.setRegister("blockMode",Ee.STORE);let h=yield a.renderTemplates(this.templates,e),d=e.getRegister("blocks");d[""]===void 0&&(d[""]=(m,T)=>T.write(h)),e.setRegister("blockMode",Ee.OUTPUT),e.push(yield n.render(e)),yield a.renderTemplates(c,e,r),e.pop()}*children(e){let r=this.templates.slice();return e&&k(this.file)&&r.push(...yield this.liquid._parsePartialFile(this.file,!0,this.currentFile)),r}*arguments(){for(let e of Object.values(this.args.hash))Q(e)&&(yield e);Q(this.file)&&(yield this.file)}partialScope(){if(k(this.file))return{name:this.file,isolated:!1,scope:Object.keys(this.args.hash)}}},Dr=class extends P{static{s(this,"BlockTag")}constructor(e,r,i,n){super(e,r,i),this.templates=[];let o=/\w+/.exec(e.args);for(this.block=o?o[0]:"";r.length;){let a=r.shift();if(ze(a)&&a.name==="endblock")return;let l=n.parseToken(a,r);this.templates.push(l)}throw new Error(`tag ${e.getText()} not closed`)}*render(e,r){let i=this.getBlockRender(e);e.getRegister("blockMode")===Ee.STORE?e.getRegister("blocks")[this.block]=i:yield i(new gt,r)}getBlockRender(e){let{liquid:r,templates:i}=this,n=e.getRegister("blocks")[this.block],o=s(function*(a,l){e.push({block:a}),yield r.renderer.renderTemplates(i,e,l),e.pop()},"renderCurrent");return n?(a,l)=>n(new gt(()=>o(a,l)),l):o}*children(){return this.templates}blockScope(){return["block"]}},qr=class extends P{static{s(this,"RawTag")}constructor(e,r,i){for(super(e,r,i),this.tokens=[];r.length;){let n=r.shift();if(ze(n)&&n.name==="endraw")return;this.tokens.push(n)}throw new Error(`tag ${e.getText()} not closed`)}render(){return this.tokens.map(e=>e.getText()).join("")}},Pr=class extends Ye{static{s(this,"TablerowloopDrop")}constructor(e,r,i,n){super(e,i,n),this.length=e,this.cols=r}row(){return Math.floor(this.i/this.cols)+1}col0(){return this.i%this.cols}col(){return this.col0()+1}col_first(){return this.col0()===0}col_last(){return this.col()===this.cols}},jr=class extends P{static{s(this,"TablerowTag")}constructor(e,r,i,n){super(e,r,i);let o=this.tokenizer.readIdentifier();this.tokenizer.skipBlank();let a=this.tokenizer.readIdentifier(),l=this.tokenizer.readValue();if(a.content!=="in"||!l)throw new Error(`illegal tag: ${e.getText()}`);this.variable=o.content,this.collection=l,this.args=new be(this.tokenizer,i.options.keyValueSeparator),this.templates=[];let c,h=n.parseStream(r).on("start",()=>c=this.templates).on("tag:endtablerow",()=>h.stop()).on("template",d=>c.push(d)).on("end",()=>{throw new Error(`tag ${e.getText()} not closed`)});h.start()}*render(e,r){let i=Xe(yield N(this.collection,e)),n=yield this.args.render(e),o=n.offset||0,a=n.limit===void 0?i.length:n.limit;i=i.slice(o,o+a);let l=n.cols||i.length,c=this.liquid.renderer,h=new Pr(i.length,l,this.collection.getText(),this.variable),d={tablerowloop:h};e.push(d);for(let m=0;m<i.length;m++,h.next())d[this.variable]=i[m],h.col0()===0&&(h.row()!==1&&r.write("</tr>"),r.write(`<tr class="row${h.row()}">`)),r.write(`<td class="col${h.col()}">`),yield c.renderTemplates(this.templates,e,r),r.write("</td>");i.length&&r.write("</tr>"),e.pop()}*children(){return this.templates}*arguments(){yield this.collection;for(let e of Object.values(this.args.hash))Q(e)&&(yield e)}blockScope(){return[this.variable,"tablerowloop"]}},Nr=class extends P{static{s(this,"UnlessTag")}constructor(e,r,i,n){super(e,r,i),this.branches=[],this.elseTemplates=[];let o=[],a=0;n.parseStream(r).on("start",()=>this.branches.push({value:new G(e.tokenizer.readFilteredValue(),this.liquid),test:Ft,templates:o=[]})).on("tag:elsif",l=>{if(a>0){o=[];return}this.branches.push({value:new G(l.tokenizer.readFilteredValue(),this.liquid),test:Le,templates:o=[]})}).on("tag:else",()=>{a++,o=this.elseTemplates}).on("tag:endunless",function(){this.stop()}).on("template",l=>{(o!==this.elseTemplates||a===1)&&o.push(l)}).on("end",()=>{throw new Error(`tag ${e.getText()} not closed`)}).start()}*render(e,r){let i=this.liquid.renderer;for(let{value:n,test:o,templates:a}of this.branches){let l=yield n.value(e,e.opts.lenientIf);if(o(l,e)){yield i.renderTemplates(a,e,r);return}}yield i.renderTemplates(this.elseTemplates,e,r)}*children(){let e=this.branches.flatMap(r=>r.templates);return this.elseTemplates&&e.push(...this.elseTemplates),e}arguments(){return this.branches.map(e=>e.value)}},Mr=class extends P{static{s(this,"BreakTag")}render(e,r){e.breakCalled=!0}},Cr=class extends P{static{s(this,"ContinueTag")}render(e,r){e.continueCalled=!0}},$r=class extends P{static{s(this,"EchoTag")}constructor(e,r,i){super(e,r,i),this.tokenizer.skipBlank(),this.tokenizer.end()||(this.value=new G(this.tokenizer.readFilteredValue(),this.liquid))}*render(e,r){if(!this.value)return;let i=yield this.value.value(e,!1);r.write(i)}*arguments(){this.value&&(yield this.value)}},Vr=class extends P{static{s(this,"LiquidTag")}constructor(e,r,i,n){super(e,r,i);let o=this.tokenizer.readLiquidTagTokens(this.liquid.options);this.templates=n.parseTokens(o)}*render(e,r){yield this.liquid.renderer.renderTemplates(this.templates,e,r)}*children(){return this.templates}},Br=class extends P{static{s(this,"InlineCommentTag")}constructor(e,r,i){if(super(e,r,i),e.args.search(/\n\s*[^#\s]/g)!==-1)throw new Error("every line of an inline comment must start with a '#' character")}render(){}},rl={assign:xr,for:Sr,capture:kr,case:Tr,comment:Or,include:Lr,render:_r,decrement:Er,increment:zr,cycle:Fr,if:Ar,layout:Rr,block:Dr,raw:qr,tablerow:jr,unless:Nr,break:Mr,continue:Cr,echo:$r,liquid:Vr,"#":Br},_t=class t{static{s(this,"Liquid")}constructor(e={}){this.renderer=new fr,this.filters={},this.tags={},this.options=go(e),this.parser=new le(this),Ti(rl,(r,i)=>this.registerTag(i,r)),Ti(Xa,(r,i)=>this.registerFilter(i,r))}parse(e,r){return new le(this).parse(e,r)}_render(e,r,i){let n=r instanceof _e?r:new _e(r,this.options,i);return this.renderer.renderTemplates(e,n)}render(e,r,i){return V(this,void 0,void 0,function*(){return ue(this._render(e,r,Object.assign(Object.assign({},i),{sync:!1})))})}renderSync(e,r,i){return ce(this._render(e,r,Object.assign(Object.assign({},i),{sync:!0})))}renderToNodeStream(e,r,i={}){let n=new _e(r,this.options,i);return this.renderer.renderTemplatesToNodeStream(e,n)}_parseAndRender(e,r,i){let n=this.parse(e);return this._render(n,r,i)}parseAndRender(e,r,i){return V(this,void 0,void 0,function*(){return ue(this._parseAndRender(e,r,Object.assign(Object.assign({},i),{sync:!1})))})}parseAndRenderSync(e,r,i){return ce(this._parseAndRender(e,r,Object.assign(Object.assign({},i),{sync:!0})))}_parsePartialFile(e,r,i){return new le(this).parseFile(e,r,Ae.Partials,i)}_parseLayoutFile(e,r,i){return new le(this).parseFile(e,r,Ae.Layouts,i)}_parseFile(e,r,i,n){return new le(this).parseFile(e,r,i,n)}parseFile(e,r){return V(this,void 0,void 0,function*(){return ue(new le(this).parseFile(e,!1,r))})}parseFileSync(e,r){return ce(new le(this).parseFile(e,!0,r))}*_renderFile(e,r,i){let n=yield this._parseFile(e,i.sync,i.lookupType);return yield this._render(n,r,i)}renderFile(e,r,i){return V(this,void 0,void 0,function*(){return ue(this._renderFile(e,r,Object.assign(Object.assign({},i),{sync:!1})))})}renderFileSync(e,r,i){return ce(this._renderFile(e,r,Object.assign(Object.assign({},i),{sync:!0})))}renderFileToNodeStream(e,r,i){return V(this,void 0,void 0,function*(){let n=yield this.parseFile(e);return this.renderToNodeStream(n,r,i)})}_evalValue(e,r){let i=new G(e,this),n=r instanceof _e?r:new _e(r,this.options);return i.value(n)}evalValue(e,r){return V(this,void 0,void 0,function*(){return ue(this._evalValue(e,r))})}evalValueSync(e,r){return ce(this._evalValue(e,r))}registerFilter(e,r){this.filters[e]=r}registerTag(e,r){this.tags[e]=B(r)?r:vo(r)}plugin(e){return e.call(this,t)}express(){let e=this,r=!0;return function(i,n,o){if(r){r=!1;let a=ht(this.root);e.options.root.unshift(...a),e.options.layouts.unshift(...a),e.options.partials.unshift(...a)}e.renderFile(i,n).then(a=>o(null,a),o)}}analyze(e,r={}){return V(this,void 0,void 0,function*(){return me(e,r)})}analyzeSync(e,r={}){return ye(e,r)}parseAndAnalyze(e,r,i={}){return V(this,void 0,void 0,function*(){return me(this.parse(e,r),i)})}parseAndAnalyzeSync(e,r,i={}){return ye(this.parse(e,r),i)}variables(e,r={}){return V(this,void 0,void 0,function*(){let i=yield me(k(e)?this.parse(e):e,r);return Object.keys(i.variables)})}variablesSync(e,r={}){let i=ye(k(e)?this.parse(e):e,r);return Object.keys(i.variables)}fullVariables(e,r={}){return V(this,void 0,void 0,function*(){let i=yield me(k(e)?this.parse(e):e,r);return Array.from(new Set(Object.values(i.variables).flatMap(n=>n.map(o=>String(o)))))})}fullVariablesSync(e,r={}){let i=ye(k(e)?this.parse(e):e,r);return Array.from(new Set(Object.values(i.variables).flatMap(n=>n.map(o=>String(o)))))}variableSegments(e,r={}){return V(this,void 0,void 0,function*(){let i=yield me(k(e)?this.parse(e):e,r);return Array.from(lt(Object.values(i.variables).flatMap(n=>n.map(o=>o.toArray()))))})}variableSegmentsSync(e,r={}){let i=ye(k(e)?this.parse(e):e,r);return Array.from(lt(Object.values(i.variables).flatMap(n=>n.map(o=>o.toArray()))))}globalVariables(e,r={}){return V(this,void 0,void 0,function*(){let i=yield me(k(e)?this.parse(e):e,r);return Object.keys(i.globals)})}globalVariablesSync(e,r={}){let i=ye(k(e)?this.parse(e):e,r);return Object.keys(i.globals)}globalFullVariables(e,r={}){return V(this,void 0,void 0,function*(){let i=yield me(k(e)?this.parse(e):e,r);return Array.from(new Set(Object.values(i.globals).flatMap(n=>n.map(o=>String(o)))))})}globalFullVariablesSync(e,r={}){let i=ye(k(e)?this.parse(e):e,r);return Array.from(new Set(Object.values(i.globals).flatMap(n=>n.map(o=>String(o)))))}globalVariableSegments(e,r={}){return V(this,void 0,void 0,function*(){let i=yield me(k(e)?this.parse(e):e,r);return Array.from(lt(Object.values(i.globals).flatMap(n=>n.map(o=>o.toArray()))))})}globalVariableSegmentsSync(e,r={}){let i=ye(k(e)?this.parse(e):e,r);return Array.from(lt(Object.values(i.globals).flatMap(n=>n.map(o=>o.toArray()))))}};var ts=bi(Kn(),1);var di=class extends Error{static{s(this,"EleventyBaseError")}constructor(e,r){super(e),this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),r&&(this.originalError=r)}},es=di;var pi=class extends es{static{s(this,"TemplateEngineConfigError")}},st=class{static{s(this,"TemplateEngine")}#e;#r;#t;constructor(e,r){if(this.name=e,this.engineLib=null,this.cacheable=!1,!r)throw new pi("Missing `eleventyConfig` argument.");this.eleventyConfig=r}get dirs(){return this.eleventyConfig.directories}get inputDir(){return this.dirs.input}get includesDir(){return this.dirs.includes}get config(){if(this.eleventyConfig.constructor.name!=="TemplateConfig")throw new Error("Expecting a TemplateConfig instance.");return this.eleventyConfig.getConfig()}get benchmarks(){return this.#t||(this.#t={aggregate:this.config.benchmarkManager.get("Aggregate")}),this.#t}get engineManager(){return this.#r}set engineManager(e){this.#r=e}get extensionMap(){if(!this.#e)throw new Error("Internal error: missing `extensionMap` in TemplateEngine.");return this.#e}set extensionMap(e){this.#e=e}get extensions(){return this._extensions||(this._extensions=this.extensionMap.getExtensionsFromKey(this.name)),this._extensions}get extensionEntries(){return this._extensionEntries||(this._extensionEntries=this.extensionMap.getExtensionEntriesFromKey(this.name)),this._extensionEntries}getName(){return this.name}getIncludesDir(){return this.includesDir}setEngineLib(e){this.engineLib=e;for(let r of this.config.libraryAmendments[this.name]||[])r(e)}getEngineLib(){return this.engineLib}async _testRender(e,r){return(await this.compile(e))(r)}useJavaScriptImport(){return!1}needsToReadFileContents(){return!0}getExtraDataFromFile(){return{}}getCompileCacheKey(e,r){return{useCache:!0,key:r+e}}get defaultTemplateFileExtension(){return"html"}useLayouts(){return!0}permalinkNeedsCompilation(e){return this.needsCompilation()}needsCompilation(e){return!0}async compile(){throw new Error("compile() must be implemented by engine")}static shouldSpiderJavaScriptDependencies(){return!1}hasDependencies(e){return this.config.uses.getDependencies(e)!==!1}isFileRelevantTo(e,r){return this.config.uses.isFileRelevantTo(e,r)}};var Bl=["page","eleventy"];function gi(t,e={}){e=Object.assign({source:void 0,overwrite:!0,lazy:!1},e);for(let r of Bl)if(!(!e.overwrite&&t[r]))if(e.lazy){let i;typeof e.getter=="function"?i=s(()=>e.getter(r,e.source),"value"):i=s(()=>e.source?.[r],"value"),Object.defineProperty(t,r,{writable:!0,configurable:!0,enumerable:!0,value:i})}else{let i;typeof e.getter=="function"?i=e.getter(r,e.source):i=e.source?.[r],i&&(t[r]=i)}return t}s(gi,"augmentObject");var It=class t extends st{static{s(this,"Liquid")}static argumentLexerOptions={number:/[0-9]+\.*[0-9]*/,doubleQuoteString:/"(?:\\["\\]|[^\n"\\])*"/,singleQuoteString:/'(?:\\['\\]|[^\n'\\])*'/,keyword:/[a-zA-Z0-9.\-_]+/,"ignore:whitespace":/[, \t]+/};constructor(e,r){super(e,r),this.liquidOptions=this.config.liquidOptions||{},this.setLibrary(this.config.libraryOverrides.liquid),this.argLexer=mi.default.compile(t.argumentLexerOptions),this.cacheable=!0}setLibrary(e){this.liquidLib=e||new _t(this.getLiquidOptions()),this.setEngineLib(this.liquidLib),this.addFilters(this.config.liquidFilters),this.addCustomTags(this.config.liquidTags),this.addAllShortcodes(this.config.liquidShortcodes),this.addAllPairedShortcodes(this.config.liquidPairedShortcodes)}getLiquidOptions(){let e={root:[this.dirs.includes,this.dirs.input],extname:".liquid",strictFilters:!0};return Object.assign(e,this.liquidOptions||{})}static wrapFilter(e,r){return function(...i){return typeof this.context?.get=="function"&&gi(this,{source:this.context,getter:s((n,o)=>o.get([n]),"getter"),lazy:this.context.strictVariables}),r.call(this,...i)}}static normalizeScope(e){let r={};return e&&(r.ctx=e,gi(r,{source:e,getter:s((i,n)=>n.get([i]),"getter"),lazy:e.strictVariables})),r}addCustomTags(e){for(let r in e)this.addTag(r,e[r])}addFilters(e){for(let r in e)this.addFilter(r,e[r])}addFilter(e,r){this.liquidLib.registerFilter(e,t.wrapFilter(e,r))}addTag(e,r){let i;if(typeof r=="function")i=r(this.liquidLib);else throw new Error("Liquid.addTag expects a callback function to be passed in: addTag(name, function(liquidEngine) { return { parse: \u2026, render: \u2026 } })");this.liquidLib.registerTag(e,i)}addAllShortcodes(e){for(let r in e)this.addShortcode(r,e[r])}addAllPairedShortcodes(e){for(let r in e)this.addPairedShortcode(r,e[r])}static parseArguments(e,r){let i=[];if(e||(e=mi.default.compile(t.argumentLexerOptions)),typeof r=="string"){e.reset(r);let n=e.next();for(;n;)n.type.indexOf("ignore:")===-1&&i.push(n.value),n=e.next()}return i}static parseArgumentsBuiltin(e){let r=new Y(e),i=[],n=r.readValue();for(;n;)i.push(n),r.skipBlank(),r.peek()===","&&r.advance(),n=r.readValue();return r.end(),i}addShortcode(e,r){let i=this;this.addTag(e,function(n){return{parse(o){this.name=o.name,i.config.liquidParameterParsing==="builtin"?this.orderedArgs=t.parseArgumentsBuiltin(o.args):this.legacyArgs=o.args},render:s(function*(o){let a=[];if(this.legacyArgs){let c=t.parseArguments(i.argLexer,this.legacyArgs);for(let h of c){let d=yield n.evalValue(h,o);a.push(d)}}else if(this.orderedArgs)for(let c of this.orderedArgs){let h=yield N(c,o);a.push(h)}return yield r.call(t.normalizeScope(o),...a)},"render")}})}addPairedShortcode(e,r){let i=this;this.addTag(e,function(n){return{parse(o,a){this.name=o.name,i.config.liquidParameterParsing==="builtin"?this.orderedArgs=t.parseArgumentsBuiltin(o.args):this.legacyArgs=o.args,this.templates=[];var l=n.parser.parseStream(a).on("template",c=>this.templates.push(c)).on("tag:end"+e,()=>l.stop()).on("end",()=>{throw new Error(`tag ${o.raw} not closed`)});l.start()},render:s(function*(o){let a=[];if(this.legacyArgs){let h=t.parseArguments(i.argLexer,this.legacyArgs);for(let d of h){let m=yield n.evalValue(d,o);a.push(m)}}else if(this.orderedArgs)for(let h of this.orderedArgs){let d=yield N(h,o);a.push(d)}let l=yield n.renderer.renderTemplates(this.templates,o);return yield r.call(t.normalizeScope(o),l,...a)},"render")}})}parseForSymbols(e){return e?new Y(e).readTopLevelTokens().filter(o=>o.kind===R.Output).map(o=>o.content.split("|").map(a=>a.trim())[0]):[]}permalinkNeedsCompilation(e){if(typeof e=="string")return this.needsCompilation(e)}needsCompilation(e){let r=this.liquidLib.options;return e.indexOf(r.tagDelimiterLeft)!==-1||e.indexOf(r.outputDelimiterLeft)!==-1}async compile(e,r){let i=this.liquidLib,n=i.parse(e,r),o={};return!r||r==="liquid"||r==="md"||(o.root=[ts.TemplatePath.getDirFromFilePath(r)]),async function(a){let l=await n;return i.render(l,a,o)}}};export{It as Liquid};
