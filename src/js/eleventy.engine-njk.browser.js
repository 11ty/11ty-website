/*! Eleventy Template Engine: Nunjucks */
var Bs=Object.create;var Se=Object.defineProperty;var js=Object.getOwnPropertyDescriptor;var Is=Object.getOwnPropertyNames;var Ks=Object.getPrototypeOf,Ms=Object.prototype.hasOwnProperty;var o=(e,t)=>Se(e,"name",{value:t,configurable:!0}),he=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Ds=(e,t)=>()=>(e&&(t=e(e=0)),t);var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),qs=(e,t)=>{for(var n in t)Se(e,n,{get:t[n],enumerable:!0})},Sr=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Is(t))!Ms.call(e,r)&&r!==n&&Se(e,r,{get:()=>t[r],enumerable:!(s=js(t,r))||s.enumerable});return e};var wt=(e,t,n)=>(n=e!=null?Bs(Ks(e)):{},Sr(t||!e||!e.__esModule?Se(n,"default",{value:e,enumerable:!0}):n,e)),Et=e=>Sr(Se({},"__esModule",{value:!0}),e);var Tr=O((Xc,Or)=>{var pe=1e3,de=pe*60,me=de*60,fe=me*24,Us=fe*7,Vs=fe*365.25;Or.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return zs(e);if(n==="number"&&isFinite(e))return t.long?Ws(e):Hs(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function zs(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return n*Vs;case"weeks":case"week":case"w":return n*Us;case"days":case"day":case"d":return n*fe;case"hours":case"hour":case"hrs":case"hr":case"h":return n*me;case"minutes":case"minute":case"mins":case"min":case"m":return n*de;case"seconds":case"second":case"secs":case"sec":case"s":return n*pe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}o(zs,"parse");function Hs(e){var t=Math.abs(e);return t>=fe?Math.round(e/fe)+"d":t>=me?Math.round(e/me)+"h":t>=de?Math.round(e/de)+"m":t>=pe?Math.round(e/pe)+"s":e+"ms"}o(Hs,"fmtShort");function Ws(e){var t=Math.abs(e);return t>=fe?De(e,t,fe,"day"):t>=me?De(e,t,me,"hour"):t>=de?De(e,t,de,"minute"):t>=pe?De(e,t,pe,"second"):e+" ms"}o(Ws,"fmtLong");function De(e,t,n,s){var r=t>=n*1.5;return Math.round(e/n)+" "+s+(r?"s":"")}o(De,"plural")});var Ar=O((ef,Lr)=>{function Gs(e){n.debug=n,n.default=n,n.coerce=u,n.disable=a,n.enable=r,n.enabled=l,n.humanize=Tr(),n.destroy=c,Object.keys(e).forEach(f=>{n[f]=e[f]}),n.names=[],n.skips=[],n.formatters={};function t(f){let h=0;for(let p=0;p<f.length;p++)h=(h<<5)-h+f.charCodeAt(p),h|=0;return n.colors[Math.abs(h)%n.colors.length]}o(t,"selectColor"),n.selectColor=t;function n(f){let h,p=null,d,b;function x(...E){if(!x.enabled)return;let _=x,g=Number(new Date),m=g-(h||g);_.diff=m,_.prev=h,_.curr=g,h=g,E[0]=n.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let v=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(A,V)=>{if(A==="%%")return"%";v++;let H=n.formatters[V];if(typeof H=="function"){let J=E[v];A=H.call(_,J),E.splice(v,1),v--}return A}),n.formatArgs.call(_,E),(_.log||n.log).apply(_,E)}return o(x,"debug"),x.namespace=f,x.useColors=n.useColors(),x.color=n.selectColor(f),x.extend=s,x.destroy=n.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:o(()=>p!==null?p:(d!==n.namespaces&&(d=n.namespaces,b=n.enabled(f)),b),"get"),set:o(E=>{p=E},"set")}),typeof n.init=="function"&&n.init(x),x}o(n,"createDebug");function s(f,h){let p=n(this.namespace+(typeof h>"u"?":":h)+f);return p.log=this.log,p}o(s,"extend");function r(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let h=(typeof f=="string"?f:"").trim().replace(" ",",").split(",").filter(Boolean);for(let p of h)p[0]==="-"?n.skips.push(p.slice(1)):n.names.push(p)}o(r,"enable");function i(f,h){let p=0,d=0,b=-1,x=0;for(;p<f.length;)if(d<h.length&&(h[d]===f[p]||h[d]==="*"))h[d]==="*"?(b=d,x=p,d++):(p++,d++);else if(b!==-1)d=b+1,x++,p=x;else return!1;for(;d<h.length&&h[d]==="*";)d++;return d===h.length}o(i,"matchesTemplate");function a(){let f=[...n.names,...n.skips.map(h=>"-"+h)].join(",");return n.enable(""),f}o(a,"disable");function l(f){for(let h of n.skips)if(i(f,h))return!1;for(let h of n.names)if(i(f,h))return!0;return!1}o(l,"enabled");function u(f){return f instanceof Error?f.stack||f.message:f}o(u,"coerce");function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o(c,"destroy"),n.enable(n.load()),n}o(Gs,"setup");Lr.exports=Gs});var Cr=O((W,qe)=>{W.formatArgs=Ys;W.save=Js;W.load=Zs;W.useColors=$s;W.storage=Xs();W.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();W.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function $s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}o($s,"useColors");function Ys(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+qe.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,s=0;e[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(n++,r==="%c"&&(s=n))}),e.splice(s,0,t)}o(Ys,"formatArgs");W.log=console.debug||console.log||(()=>{});function Js(e){try{e?W.storage.setItem("debug",e):W.storage.removeItem("debug")}catch{}}o(Js,"save");function Zs(){let e;try{e=W.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}o(Zs,"load");function Xs(){try{return localStorage}catch{}}o(Xs,"localstorage");qe.exports=Ar()(W);var{formatters:Qs}=qe.exports;Qs.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Fr=O((nf,Nr)=>{Nr.exports=o(function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"},"isBuffer")});var Pr=O((of,xt)=>{typeof Object.create=="function"?xt.exports=o(function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},"inherits"):xt.exports=o(function(t,n){t.super_=n;var s=o(function(){},"TempCtor");s.prototype=n.prototype,t.prototype=new s,t.prototype.constructor=t},"inherits")});var Ir=O(F=>{var eo=/%[sdj%]/g;F.format=function(e){if(!$e(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(le(arguments[n]));return t.join(" ")}for(var n=1,s=arguments,r=s.length,i=String(e).replace(eo,function(l){if(l==="%%")return"%";if(n>=r)return l;switch(l){case"%s":return String(s[n++]);case"%d":return Number(s[n++]);case"%j":try{return JSON.stringify(s[n++])}catch{return"[Circular]"}default:return l}}),a=s[n];n<r;a=s[++n])Ge(a)||!ve(a)?i+=" "+a:i+=" "+le(a);return i};F.deprecate=function(e,t){if(se(global.process))return function(){return F.deprecate(e,t).apply(this,arguments)};if(process.noDeprecation===!0)return e;var n=!1;function s(){if(!n){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}return o(s,"deprecated"),s};var Ue={},kt;F.debuglog=function(e){if(se(kt)&&(kt=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!Ue[e])if(new RegExp("\\b"+e+"\\b","i").test(kt)){var t=process.pid;Ue[e]=function(){var n=F.format.apply(F,arguments);console.error("%s %d: %s",e,t,n)}}else Ue[e]=function(){};return Ue[e]};function le(e,t){var n={seen:[],stylize:ro};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),At(t)?n.showHidden=t:t&&F._extend(n,t),se(n.showHidden)&&(n.showHidden=!1),se(n.depth)&&(n.depth=2),se(n.colors)&&(n.colors=!1),se(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=to),We(n,e,n.depth)}o(le,"inspect");F.inspect=le;le.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};le.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function to(e,t){var n=le.styles[t];return n?"\x1B["+le.colors[n][0]+"m"+e+"\x1B["+le.colors[n][1]+"m":e}o(to,"stylizeWithColor");function ro(e,t){return e}o(ro,"stylizeNoColor");function no(e){var t={};return e.forEach(function(n,s){t[n]=!0}),t}o(no,"arrayToHash");function We(e,t,n){if(e.customInspect&&t&&He(t.inspect)&&t.inspect!==F.inspect&&!(t.constructor&&t.constructor.prototype===t)){var s=t.inspect(n,e);return $e(s)||(s=We(e,s,n)),s}var r=io(e,t);if(r)return r;var i=Object.keys(t),a=no(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),ze(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return St(t);if(i.length===0){if(He(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(Ve(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Lt(t))return e.stylize(Date.prototype.toString.call(t),"date");if(ze(t))return St(t)}var u="",c=!1,f=["{","}"];if(Rr(t)&&(c=!0,f=["[","]"]),He(t)){var h=t.name?": "+t.name:"";u=" [Function"+h+"]"}if(Ve(t)&&(u=" "+RegExp.prototype.toString.call(t)),Lt(t)&&(u=" "+Date.prototype.toUTCString.call(t)),ze(t)&&(u=" "+St(t)),i.length===0&&(!c||t.length==0))return f[0]+u+f[1];if(n<0)return Ve(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var p;return c?p=so(e,t,n,a,i):p=i.map(function(d){return Tt(e,t,n,a,d,c)}),e.seen.pop(),oo(p,u,f)}o(We,"formatValue");function io(e,t){if(se(t))return e.stylize("undefined","undefined");if($e(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(Br(t))return e.stylize(""+t,"number");if(At(t))return e.stylize(""+t,"boolean");if(Ge(t))return e.stylize("null","null")}o(io,"formatPrimitive");function St(e){return"["+Error.prototype.toString.call(e)+"]"}o(St,"formatError");function so(e,t,n,s,r){for(var i=[],a=0,l=t.length;a<l;++a)jr(t,String(a))?i.push(Tt(e,t,n,s,String(a),!0)):i.push("");return r.forEach(function(u){u.match(/^\d+$/)||i.push(Tt(e,t,n,s,u,!0))}),i}o(so,"formatArray");function Tt(e,t,n,s,r,i){var a,l,u;if(u=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},u.get?u.set?l=e.stylize("[Getter/Setter]","special"):l=e.stylize("[Getter]","special"):u.set&&(l=e.stylize("[Setter]","special")),jr(s,r)||(a="["+r+"]"),l||(e.seen.indexOf(u.value)<0?(Ge(n)?l=We(e,u.value,null):l=We(e,u.value,n-1),l.indexOf(`
`)>-1&&(i?l=l.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):l=`
`+l.split(`
`).map(function(c){return"   "+c}).join(`
`))):l=e.stylize("[Circular]","special")),se(a)){if(i&&r.match(/^\d+$/))return l;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+l}o(Tt,"formatProperty");function oo(e,t,n){var s=0,r=e.reduce(function(i,a){return s++,a.indexOf(`
`)>=0&&s++,i+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}o(oo,"reduceToSingleString");function Rr(e){return Array.isArray(e)}o(Rr,"isArray");F.isArray=Rr;function At(e){return typeof e=="boolean"}o(At,"isBoolean");F.isBoolean=At;function Ge(e){return e===null}o(Ge,"isNull");F.isNull=Ge;function ao(e){return e==null}o(ao,"isNullOrUndefined");F.isNullOrUndefined=ao;function Br(e){return typeof e=="number"}o(Br,"isNumber");F.isNumber=Br;function $e(e){return typeof e=="string"}o($e,"isString");F.isString=$e;function lo(e){return typeof e=="symbol"}o(lo,"isSymbol");F.isSymbol=lo;function se(e){return e===void 0}o(se,"isUndefined");F.isUndefined=se;function Ve(e){return ve(e)&&Ct(e)==="[object RegExp]"}o(Ve,"isRegExp");F.isRegExp=Ve;function ve(e){return typeof e=="object"&&e!==null}o(ve,"isObject");F.isObject=ve;function Lt(e){return ve(e)&&Ct(e)==="[object Date]"}o(Lt,"isDate");F.isDate=Lt;function ze(e){return ve(e)&&(Ct(e)==="[object Error]"||e instanceof Error)}o(ze,"isError");F.isError=ze;function He(e){return typeof e=="function"}o(He,"isFunction");F.isFunction=He;function uo(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}o(uo,"isPrimitive");F.isPrimitive=uo;F.isBuffer=Fr();function Ct(e){return Object.prototype.toString.call(e)}o(Ct,"objectToString");function Ot(e){return e<10?"0"+e.toString(10):e.toString(10)}o(Ot,"pad");var co=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fo(){var e=new Date,t=[Ot(e.getHours()),Ot(e.getMinutes()),Ot(e.getSeconds())].join(":");return[e.getDate(),co[e.getMonth()],t].join(" ")}o(fo,"timestamp");F.log=function(){console.log("%s - %s",fo(),F.format.apply(F,arguments))};F.inherits=Pr();F._extend=function(e,t){if(!t||!ve(t))return e;for(var n=Object.keys(t),s=n.length;s--;)e[n[s]]=t[n[s]];return e};function jr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o(jr,"hasOwnProperty")});var ge=O((cf,Te)=>{"use strict";var ho=process.platform==="win32",Z=Ir();function Ye(e,t){for(var n=[],s=0;s<e.length;s++){var r=e[s];!r||r==="."||(r===".."?n.length&&n[n.length-1]!==".."?n.pop():t&&n.push(".."):n.push(r))}return n}o(Ye,"normalizeArray");function Oe(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var s=t;s>=0&&!e[s];s--);return n===0&&s===t?e:n>s?[]:e.slice(n,s+1)}o(Oe,"trimArray");var Kr=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,po=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,K={};function Je(e){var t=Kr.exec(e),n=(t[1]||"")+(t[2]||""),s=t[3]||"",r=po.exec(s),i=r[1],a=r[2],l=r[3];return[n,i,a,l]}o(Je,"win32SplitPath");function Nt(e){var t=Kr.exec(e),n=t[1]||"",s=!!n&&n[1]!==":";return{device:n,isUnc:s,isAbsolute:s||!!t[2],tail:t[3]}}o(Nt,"win32StatPath");function Mr(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}o(Mr,"normalizeUNCRoot");K.resolve=function(){for(var e="",t="",n=!1,s=arguments.length-1;s>=-1;s--){var r;if(s>=0?r=arguments[s]:e?(r=process.env["="+e],(!r||r.substr(0,3).toLowerCase()!==e.toLowerCase()+"\\")&&(r=e+"\\")):r=process.cwd(),Z.isString(r)){if(!r)continue}else throw new TypeError("Arguments to path.resolve must be strings");var i=Nt(r),a=i.device,l=i.isUnc,u=i.isAbsolute,c=i.tail;if(!(a&&e&&a.toLowerCase()!==e.toLowerCase())&&(e||(e=a),n||(t=c+"\\"+t,n=u),e&&n))break}return l&&(e=Mr(e)),t=Ye(t.split(/[\\\/]+/),!n).join("\\"),e+(n?"\\":"")+t||"."};K.normalize=function(e){var t=Nt(e),n=t.device,s=t.isUnc,r=t.isAbsolute,i=t.tail,a=/[\\\/]$/.test(i);return i=Ye(i.split(/[\\\/]+/),!r).join("\\"),!i&&!r&&(i="."),i&&a&&(i+="\\"),s&&(n=Mr(n)),n+(r?"\\":"")+i};K.isAbsolute=function(e){return Nt(e).isAbsolute};K.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!Z.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var s=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(s=s.replace(/^[\\\/]{2,}/,"\\")),K.normalize(s)};K.relative=function(e,t){e=K.resolve(e),t=K.resolve(t);for(var n=e.toLowerCase(),s=t.toLowerCase(),r=Oe(t.split("\\")),i=Oe(n.split("\\")),a=Oe(s.split("\\")),l=Math.min(i.length,a.length),u=l,c=0;c<l;c++)if(i[c]!==a[c]){u=c;break}if(u==0)return t;for(var f=[],c=u;c<i.length;c++)f.push("..");return f=f.concat(r.slice(u)),f.join("\\")};K._makeLong=function(e){if(!Z.isString(e))return e;if(!e)return"";var t=K.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e};K.dirname=function(e){var t=Je(e),n=t[0],s=t[1];return!n&&!s?".":(s&&(s=s.substr(0,s.length-1)),n+s)};K.basename=function(e,t){var n=Je(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n};K.extname=function(e){return Je(e)[3]};K.format=function(e){if(!Z.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!Z.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,s=e.base||"";return n?n[n.length-1]===K.sep?n+s:n+K.sep+s:s};K.parse=function(e){if(!Z.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=Je(e);if(!t||t.length!==4)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}};K.sep="\\";K.delimiter=";";var mo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,q={};function Ze(e){return mo.exec(e).slice(1)}o(Ze,"posixSplitPath");q.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var s=n>=0?arguments[n]:process.cwd();if(Z.isString(s)){if(!s)continue}else throw new TypeError("Arguments to path.resolve must be strings");e=s+"/"+e,t=s[0]==="/"}return e=Ye(e.split("/"),!t).join("/"),(t?"/":"")+e||"."};q.normalize=function(e){var t=q.isAbsolute(e),n=e&&e[e.length-1]==="/";return e=Ye(e.split("/"),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e};q.isAbsolute=function(e){return e.charAt(0)==="/"};q.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!Z.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e?e+="/"+n:e+=n)}return q.normalize(e)};q.relative=function(e,t){e=q.resolve(e).substr(1),t=q.resolve(t).substr(1);for(var n=Oe(e.split("/")),s=Oe(t.split("/")),r=Math.min(n.length,s.length),i=r,a=0;a<r;a++)if(n[a]!==s[a]){i=a;break}for(var l=[],a=i;a<n.length;a++)l.push("..");return l=l.concat(s.slice(i)),l.join("/")};q._makeLong=function(e){return e};q.dirname=function(e){var t=Ze(e),n=t[0],s=t[1];return!n&&!s?".":(s&&(s=s.substr(0,s.length-1)),n+s)};q.basename=function(e,t){var n=Ze(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n};q.extname=function(e){return Ze(e)[3]};q.format=function(e){if(!Z.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!Z.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir?e.dir+q.sep:"",s=e.base||"";return n+s};q.parse=function(e){if(!Z.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=Ze(e);if(!t||t.length!==4)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}};q.sep="/";q.delimiter=":";ho?Te.exports=K:Te.exports=q;Te.exports.posix=q;Te.exports.win32=K});var Xe={};qs(Xe,{default:()=>yo,existsSync:()=>Dr,mkdir:()=>vo,mkdirSync:()=>qr,readFileSync:()=>Ur,statSync:()=>go,writeFileSync:()=>Vr});function Le(){throw new Error("This function is not allowed in-browser.")}var vo,Dr,qr,Ur,go,Vr,yo,Qe=Ds(()=>{o(Le,"noopError");vo=Le,Dr=o(function(){return!1},"existsSync"),qr=Le,Ur=Le,go=Le,Vr=Le,yo={readFileSync:Ur,existsSync:Dr,mkdirSync:qr,writeFileSync:Vr}});var Hr=O((pf,zr)=>{var $=ge(),Ft=(Qe(),Et(Xe));function S(){}o(S,"TemplatePath");S.getWorkingDir=function(){return S.normalize($.resolve("."))};S.getDir=function(e){return S.isDirectorySync(e)?e:S.getDirFromFilePath(e)};S.getDirFromFilePath=function(e){return $.parse(e).dir||"."};S.getLastPathSegment=function(e){return e.includes("/")?(e=e.replace(/\/$/,""),e.slice(e.lastIndexOf("/")+1)):e};S.getAllDirs=function(e){return e=e.replace(/\/$/,""),e.includes("/")?e.split("/").map((t,n,s)=>s.slice(0,n+1).join("/")).filter(t=>t!==".").reverse():[e]};S.normalize=function(e){let t=$.normalize(e).split($.sep).join("/");return t!=="/"&&t.endsWith("/")?t.slice(0,-1):t};S.join=function(...e){return S.normalize($.join(...e))};S.normalizeUrlPath=function(...e){return $.posix.join(...e).replace(/\/+$/,"/")};S.absolutePath=function(...e){let t=0;for(let s of e){if($.isAbsolute(s)&&t>0)throw new Error(`Only the first parameter to Template.absolutePath can be an absolute path. Received: ${s} from ${e}`);t++}let n=0;for(let s of e){if(n===0&&$.isAbsolute(s))return S.join(...e);n++}return S.join(S.getWorkingDir(),...e)};S.relativePath=function(e){return S.stripLeadingSubPath(e,S.getWorkingDir())};S.addLeadingDotSlashArray=function(e){return e.map(t=>S.addLeadingDotSlash(t))};S.addLeadingDotSlash=function(e){return e==="."||e===".."?e+"/":$.isAbsolute(e)||e.startsWith("./")||e.startsWith("../")?e:"./"+e};S.stripLeadingDotSlash=function(e){return typeof e=="string"?e.replace(/^\.\//,""):e};S.startsWithSubPath=function(e,t){return e=S.normalize(e),t=S.normalize(t),e.startsWith(t)};S.stripLeadingSubPath=function(e,t){return e=S.normalize(e),t=S.normalize(t),t!=="."&&e.startsWith(t)?e.slice(t.length+1):e};S.isDirectorySync=function(e){return Ft.existsSync(e)&&Ft.statSync(e).isDirectory()};S.isDirectory=async function(e){return new Promise(t=>{Ft.stat(e,(n,s)=>{s&&t(s.isDirectory()),t(!1)})})};S.convertToRecursiveGlobSync=function(e){return e===""?"./**":(e=S.addLeadingDotSlash(e),S.isDirectorySync(e)?e+(e.endsWith("/")?"":"/")+"**":e)};S.convertToRecursiveGlob=async function(e){return e===""?"./**":(e=S.addLeadingDotSlash(e),await S.isDirectory(e)?e+(e.endsWith("/")?"":"/")+"**":e)};S.getExtension=function(e){return $.extname(e).replace(/^\./,"")};S.removeExtension=function(e,t=void 0){if(t===void 0)return e;let n=S.getExtension(e);return n!==""&&t.endsWith(n)?e.substring(0,e.lastIndexOf(n)-1):e};S.normalizeOperatingSystemFilePath=function(e,t="/"){return e.split(t).join($.sep)};S.standardizeFilePath=function(e,t="/"){return S.addLeadingDotSlash(e.split($.sep).join(t))};zr.exports=S});var Pt=O((mf,Wr)=>{Wr.exports=function(e){if(e===null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return!t||t===Object.prototype}});var Gr=O((vf,jt)=>{"use strict";var Ae=Pt(),Rt="override:";function _o(e,t){return t&&e.startsWith(t)?e.slice(t.length):e}o(_o,"cleanKey");function Bt(e,t,n={}){let{override:s}=n;if(!e&&Ae(t)&&Object.isFrozen(t))return t;let r;if(!e&&Ae(t)&&(e={},r=!0),Array.isArray(e)&&Array.isArray(t))return e.concat(t);if(Ae(e)){if(r||Ae(t))for(let i in t){let a=_o(i,s);e[a]=Bt(e[i],t[i],n)}return e}return t}o(Bt,"getMergedItem");function bo(e,...t){for(let n of t)n&&(e=Bt(e,n));return e}o(bo,"DeepCopy");function wo(e,...t){if(Ae(e))for(let n in e)n.indexOf(Rt)===0&&(e[n.slice(Rt.length)]=e[n],delete e[n]);for(let n of t)n&&(e=Bt(e,n,{override:Rt}));return e}o(wo,"Merge");jt.exports=wo;jt.exports.DeepCopy=bo});var Yr=O((yf,$r)=>{var It=class{static{o(this,"DateCompare")}static isTimestampWithinDuration(t,n,s=Date.now()){return!n||n==="*"||n===1/0||t+this.getDurationMs(n)>s}static getDurationMs(t="0s"){let n=t.slice(-1),s;return n==="s"?s=1:n==="m"?s=60:n==="h"?s=60*60:n==="d"?s=60*60*24:n==="w"?s=60*60*24*7:n==="y"&&(s=60*60*24*365),parseInt(t.slice(0,t.length-1),10)*s*1e3}};$r.exports=It});var Zr=O((bf,Jr)=>{function Eo(e=""){return e.replace(/[=\+\/]/g,function(t){return t==="="?"":t==="+"?"-":"_"})}o(Eo,"base64UrlSafe");Jr.exports={base64UrlSafe:Eo}});var Kt=O((Ef,Xr)=>{function xo(e){return typeof Buffer<"u"?Buffer.isBuffer(e):e instanceof Uint8Array}o(xo,"isBuffer");Xr.exports={isBuffer:xo}});var en=O((kf,Qr)=>{Qr.exports=o(function(t){let n=1779033703,s=3144134277,r=1013904242,i=2773480762,a=1359893119,l=2600822924,u=528734635,c=1541459225,f=0,h=0,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=o((m,v)=>m>>>v|m<<32-v,"rrot"),b=new Uint32Array(64),x=new Uint8Array(64),E=o(()=>{for(let I=0,Q=0;I<16;I++,Q+=4)b[I]=x[Q]<<24|x[Q+1]<<16|x[Q+2]<<8|x[Q+3];for(let I=16;I<64;I++){let Q=d(b[I-15],7)^d(b[I-15],18)^b[I-15]>>>3,bt=d(b[I-2],17)^d(b[I-2],19)^b[I-2]>>>10;b[I]=b[I-16]+Q+b[I-7]+bt|0}let m=n,v=s,B=r,A=i,V=a,H=l,J=u,ke=c;for(let I=0;I<64;I++){let Q=d(V,6)^d(V,11)^d(V,25),bt=V&H^~V&J,kr=ke+Q+bt+p[I]+b[I]|0,Fs=d(m,2)^d(m,13)^d(m,22),Ps=m&v^m&B^v&B,Rs=Fs+Ps|0;ke=J,J=H,H=V,V=A+kr|0,A=B,B=v,v=m,m=kr+Rs|0}n=n+m|0,s=s+v|0,r=r+B|0,i=i+A|0,a=a+V|0,l=l+H|0,u=u+J|0,c=c+ke|0,h=0},"process"),_=o(m=>{typeof m=="string"&&(m=typeof TextEncoder>"u"?Buffer.from(m):new TextEncoder().encode(m));for(let v=0;v<m.length;v++)x[h++]=m[v],h===64&&E();f+=m.length},"add"),g=o(()=>{if(x[h++]=128,h==64&&E(),h+8>64){for(;h<64;)x[h++]=0;E()}for(;h<58;)x[h++]=0;let m=f*8;x[h++]=m/1099511627776&255,x[h++]=m/4294967296&255,x[h++]=m>>>24,x[h++]=m>>>16&255,x[h++]=m>>>8&255,x[h++]=m&255,E();let v=new Uint8Array(32);return v[0]=n>>>24,v[1]=n>>>16&255,v[2]=n>>>8&255,v[3]=n&255,v[4]=s>>>24,v[5]=s>>>16&255,v[6]=s>>>8&255,v[7]=s&255,v[8]=r>>>24,v[9]=r>>>16&255,v[10]=r>>>8&255,v[11]=r&255,v[12]=i>>>24,v[13]=i>>>16&255,v[14]=i>>>8&255,v[15]=i&255,v[16]=a>>>24,v[17]=a>>>16&255,v[18]=a>>>8&255,v[19]=a&255,v[20]=l>>>24,v[21]=l>>>16&255,v[22]=l>>>8&255,v[23]=l&255,v[24]=u>>>24,v[25]=u>>>16&255,v[26]=u>>>8&255,v[27]=u&255,v[28]=c>>>24,v[29]=c>>>16&255,v[30]=c>>>8&255,v[31]=c&255,v.hex=()=>{let B="";return v.forEach(A=>B+=("0"+A.toString(16)).slice(-2)),B},v},"digest");return t===void 0?{add:_,digest:g}:(_(t),g())},"sha256")});var sn=O((Of,nn)=>{var{base64UrlSafe:rn}=Zr(),{isBuffer:ko}=Kt(),So=en();function Oo(){try{return he("node:crypto"),!0}catch{return!1}}o(Oo,"hasNodeCryptoModule");var tn=Oo(),ye=class{static{o(this,"Hash")}static create(){return typeof globalThis.crypto>"u"?tn?Ce:Ne:et}static createSync(){return tn?Ce:Ne}static toBase64(t){let n=Array.from(t,s=>String.fromCodePoint(s)).join("");return btoa(n)}static mergeUint8Array(...t){let n=t.reduce((i,a)=>i+a.byteLength,0),s=new Uint8Array(n),r=0;return t.forEach(i=>{s.set(i,r),r+=i.byteLength}),s}static bufferToBase64Url(t){return rn(this.toBase64(new Uint8Array(t)))}static bufferToHex(t){return Array.from(new Uint8Array(t)).map(n=>n.toString(16).padStart(2,"0")).join("")}},et=class extends ye{static{o(this,"WebCryptoHash")}static async toHash(...t){let n=new TextEncoder,s=this.mergeUint8Array(...t.map(r=>ko(r)?r:n.encode(r)));return crypto.subtle.digest("SHA-256",s)}static async toBase64Url(...t){return this.toHash(...t).then(n=>this.bufferToBase64Url(n))}static async toHex(...t){return this.toHash(...t).then(n=>this.bufferToHex(n))}static toBase64UrlSync(){throw new Error("Synchronous methods are not available in the Web Crypto API.")}static toHexSync(){throw new Error("Synchronous methods are not available in the Web Crypto API.")}},Ce=class extends ye{static{o(this,"NodeCryptoHash")}static toHash(...t){let{createHash:n}=he("node:crypto"),s=n("sha256");for(let r of t)s.update(r);return s}static toBase64Url(...t){let n=this.toHash(...t).digest("base64");return rn(n)}static toHex(...t){return this.toHash(...t).digest("hex")}static toBase64UrlSync=this.toBase64Url;static toHexSync=this.toHex},Ne=class extends ye{static{o(this,"ScriptHash")}static toHash(...t){let n=So();for(let s of t)n.add(s);return n.digest()}static toBase64Url(...t){let n=this.toHash(...t);return this.bufferToBase64Url(n)}static toHex(...t){let n=this.toHash(...t);return this.bufferToHex(n)}static toBase64UrlSync=this.toBase64Url;static toHexSync=this.toHex};nn.exports={Hash:ye,NodeCryptoHash:Ce,ScriptHash:Ne,WebCryptoHash:et}});var an=O((Lf,on)=>{var{Hash:tt}=sn();async function To(...e){return tt.create().toBase64Url(...e)}o(To,"createHash");async function Lo(...e){return tt.create().toHex(...e)}o(Lo,"createHashHex");function Ao(...e){return tt.createSync().toBase64Url(...e)}o(Ao,"createHashSync");function Co(...e){return tt.createSync().toHex(...e)}o(Co,"createHashHexSync");on.exports={createHash:To,createHashSync:Ao,createHashHex:Lo,createHashHexSync:Co}});var cn=O((Cf,un)=>{var No=Hr(),Fo=Pt(),ln=Gr(),Po=Yr(),{DeepCopy:Ro}=ln,{createHash:Bo,createHashHex:jo,createHashSync:Io,createHashHexSync:Ko}=an(),Mo=Kt();un.exports={TemplatePath:No,isPlainObject:Fo,Merge:ln,DeepCopy:Ro,DateCompare:Po,createHash:Bo,createHashHex:jo,createHashSync:Io,createHashHexSync:Ko,Buffer:Mo}});var X=O((Nf,yn)=>{"use strict";var rt=Array.prototype,Pe=Object.prototype,Do={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},qo=/[&"'<>\\]/g,j=yn.exports={};function Mt(e,t){return Pe.hasOwnProperty.call(e,t)}o(Mt,"hasOwnProp");j.hasOwnProp=Mt;function Uo(e){return Do[e]}o(Uo,"lookupEscape");function Vo(e,t,n){if(n.Update||(n=new j.TemplateError(n)),n.Update(e),!t){var s=n;n=new Error(s.message),n.name=s.name}return n}o(Vo,"_prettifyError");j._prettifyError=Vo;function Fe(e,t,n){var s,r;e instanceof Error&&(r=e,e=r.name+": "+r.message),Object.setPrototypeOf?(s=new Error(e),Object.setPrototypeOf(s,Fe.prototype)):(s=this,Object.defineProperty(s,"message",{enumerable:!1,writable:!0,value:e})),Object.defineProperty(s,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(s,this.constructor);var i;if(r){var a=Object.getOwnPropertyDescriptor(r,"stack");i=a&&(a.get||function(){return a.value}),i||(i=o(function(){return r.stack},"getStack"))}else{var l=new Error(e).stack;i=o(function(){return l},"getStack")}return Object.defineProperty(s,"stack",{get:o(function(){return i.call(s)},"get")}),Object.defineProperty(s,"cause",{value:r}),s.lineno=t,s.colno=n,s.firstUpdate=!0,s.Update=o(function(c){var f="("+(c||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?f+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(f+=" [Line "+this.lineno+"]")),f+=`
 `,this.firstUpdate&&(f+=" "),this.message=f+(this.message||""),this.firstUpdate=!1,this},"Update"),s}o(Fe,"TemplateError");Object.setPrototypeOf?Object.setPrototypeOf(Fe.prototype,Error.prototype):Fe.prototype=Object.create(Error.prototype,{constructor:{value:Fe}});j.TemplateError=Fe;function zo(e){return e.replace(qo,Uo)}o(zo,"escape");j.escape=zo;function fn(e){return Pe.toString.call(e)==="[object Function]"}o(fn,"isFunction");j.isFunction=fn;function hn(e){return Pe.toString.call(e)==="[object Array]"}o(hn,"isArray");j.isArray=hn;function pn(e){return Pe.toString.call(e)==="[object String]"}o(pn,"isString");j.isString=pn;function dn(e){return Pe.toString.call(e)==="[object Object]"}o(dn,"isObject");j.isObject=dn;function Ho(e){return e?typeof e=="string"?e.split("."):[e]:[]}o(Ho,"_prepareAttributeParts");function mn(e){var t=Ho(e);return o(function(s){for(var r=s,i=0;i<t.length;i++){var a=t[i];if(Mt(r,a))r=r[a];else return}return r},"attrGetter")}o(mn,"getAttrGetter");j.getAttrGetter=mn;function Wo(e,t,n){for(var s={},r=fn(t)?t:mn(t),i=0;i<e.length;i++){var a=e[i],l=r(a,i);if(l===void 0&&n===!0)throw new TypeError('groupby: attribute "'+t+'" resolved to undefined');(s[l]||(s[l]=[])).push(a)}return s}o(Wo,"groupBy");j.groupBy=Wo;function vn(e){return Array.prototype.slice.call(e)}o(vn,"toArray");j.toArray=vn;function Go(e){var t=[];if(!e)return t;for(var n=e.length,s=vn(arguments).slice(1),r=-1;++r<n;)gn(s,e[r])===-1&&t.push(e[r]);return t}o(Go,"without");j.without=Go;function $o(e,t){for(var n="",s=0;s<t;s++)n+=e;return n}o($o,"repeat");j.repeat=$o;function Yo(e,t,n){if(e!=null){if(rt.forEach&&e.forEach===rt.forEach)e.forEach(t,n);else if(e.length===+e.length)for(var s=0,r=e.length;s<r;s++)t.call(n,e[s],s,e)}}o(Yo,"each");j.each=Yo;function Jo(e,t){var n=[];if(e==null)return n;if(rt.map&&e.map===rt.map)return e.map(t);for(var s=0;s<e.length;s++)n[n.length]=t(e[s],s);return e.length===+e.length&&(n.length=e.length),n}o(Jo,"map");j.map=Jo;function Zo(e,t,n){var s=-1;function r(){s++,s<e.length?t(e[s],s,r,n):n()}o(r,"next"),r()}o(Zo,"asyncIter");j.asyncIter=Zo;function Xo(e,t,n){var s=Re(e||{}),r=s.length,i=-1;function a(){i++;var l=s[i];i<r?t(l,e[l],i,r,a):n()}o(a,"next"),a()}o(Xo,"asyncFor");j.asyncFor=Xo;function gn(e,t,n){return Array.prototype.indexOf.call(e||[],t,n)}o(gn,"indexOf");j.indexOf=gn;function Re(e){var t=[];for(var n in e)Mt(e,n)&&t.push(n);return t}o(Re,"keys_");j.keys=Re;function Qo(e){return Re(e).map(function(t){return[t,e[t]]})}o(Qo,"_entries");j._entries=Qo;function ea(e){return Re(e).map(function(t){return e[t]})}o(ea,"_values");j._values=ea;function ta(e,t){return e=e||{},Re(t).forEach(function(n){e[n]=t[n]}),e}o(ta,"extend");j._assign=j.extend=ta;function ra(e,t){if(hn(t)||pn(t))return t.indexOf(e)!==-1;if(dn(t))return e in t;throw new Error('Cannot use "in" operator to search for "'+e+'" in unexpected types.')}o(ra,"inOperator");j.inOperator=ra});var Sn=O((Pf,kn)=>{"use strict";kn.exports=Dt;function Dt(e){te.length||(nt(),wn=!0),te[te.length]=e}o(Dt,"rawAsap");var te=[],wn=!1,nt,ee=0,na=1024;function _n(){for(;ee<te.length;){var e=ee;if(ee=ee+1,te[e].call(),ee>na){for(var t=0,n=te.length-ee;t<n;t++)te[t]=te[t+ee];te.length-=ee,ee=0}}te.length=0,ee=0,wn=!1}o(_n,"flush");var bn=typeof global<"u"?global:self,En=bn.MutationObserver||bn.WebKitMutationObserver;typeof En=="function"?nt=ia(_n):nt=xn(_n);Dt.requestFlush=nt;function ia(e){var t=1,n=new En(e),s=document.createTextNode("");return n.observe(s,{characterData:!0}),o(function(){t=-t,s.data=t},"requestCall")}o(ia,"makeRequestCallFromMutationObserver");function xn(e){return o(function(){var n=setTimeout(r,0),s=setInterval(r,50);function r(){clearTimeout(n),clearInterval(s),e()}o(r,"handleTimer")},"requestCall")}o(xn,"makeRequestCallFromTimer");Dt.makeRequestCallFromTimer=xn});var An=O((Bf,Ln)=>{"use strict";var On=Sn(),it=[],qt=[],sa=On.makeRequestCallFromTimer(oa);function oa(){if(qt.length)throw qt.shift()}o(oa,"throwFirstError");Ln.exports=Ut;function Ut(e){var t;it.length?t=it.pop():t=new Tn,t.task=e,On(t)}o(Ut,"asap");function Tn(){this.task=null}o(Tn,"RawTask");Tn.prototype.call=function(){try{this.task.call()}catch(e){Ut.onerror?Ut.onerror(e):(qt.push(e),sa())}finally{this.task=null,it[it.length]=this}}});var Nn=O((Cn,st)=>{(function(e){"use strict";var t=o(function(){var a=Array.prototype.slice.call(arguments);typeof a[0]=="function"&&a[0].apply(null,a.splice(1))},"executeSync"),n=o(function(a){typeof setImmediate=="function"?setImmediate(a):typeof process<"u"&&process.nextTick?process.nextTick(a):setTimeout(a,0)},"executeAsync"),s=o(function(a){var l=o(function(u){var c=o(function(){return a.length&&a[u].apply(null,arguments),c.next()},"fn");return c.next=function(){return u<a.length-1?l(u+1):null},c},"makeCallback");return l(0)},"makeIterator"),r=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},i=o(function(a,l,u){var c=u?n:t;if(l=l||function(){},!r(a)){var f=new Error("First argument to waterfall must be an array of functions");return l(f)}if(!a.length)return l();var h=o(function(p){return function(d){if(d)l.apply(null,arguments),l=o(function(){},"callback");else{var b=Array.prototype.slice.call(arguments,1),x=p.next();x?b.push(h(x)):b.push(l),c(function(){p.apply(null,b)})}}},"wrapIterator");h(s(a))()},"waterfall");typeof define<"u"&&define.amd?define([],function(){return i}):typeof st<"u"&&st.exports?st.exports=i:e.waterfall=i})(Cn)});var zt=O((Kf,si)=>{"use strict";var Fn=X(),Pn=` 
	\r\xA0`,Rn="()[]{}%*-+~/#,:|.<>=!",aa="0123456789",la="{%",ua="%}",ca="{{",fa="}}",ha="{#",pa="#}",Bn="string",jn="whitespace",In="data",Kn="block-start",Mn="block-end",Dn="variable-start",qn="variable-end",Un="comment",Vn="left-paren",zn="right-paren",Hn="left-bracket",Wn="right-bracket",Gn="left-curly",$n="right-curly",Yn="operator",Jn="comma",Zn="colon",Xn="tilde",Qn="pipe",ei="int",ti="float",ri="boolean",Vt="none",ni="symbol",da="special",ii="regex";function z(e,t,n,s){return{type:e,value:t,lineno:n,colno:s}}o(z,"token");var ma=function(){function e(n,s){this.str=n,this.index=0,this.len=n.length,this.lineno=0,this.colno=0,this.in_code=!1,s=s||{};var r=s.tags||{};this.tags={BLOCK_START:r.blockStart||la,BLOCK_END:r.blockEnd||ua,VARIABLE_START:r.variableStart||ca,VARIABLE_END:r.variableEnd||fa,COMMENT_START:r.commentStart||ha,COMMENT_END:r.commentEnd||pa},this.trimBlocks=!!s.trimBlocks,this.lstripBlocks=!!s.lstripBlocks}o(e,"Tokenizer");var t=e.prototype;return t.nextToken=o(function(){var s=this.lineno,r=this.colno,i;if(this.in_code){var a=this.current();if(this.isFinished())return null;if(a==='"'||a==="'")return z(Bn,this._parseString(a),s,r);if(i=this._extract(Pn))return z(jn,i,s,r);if((i=this._extractString(this.tags.BLOCK_END))||(i=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(a=this.current(),a===`
`?this.forward():a==="\r"&&(this.forward(),a=this.current(),a===`
`?this.forward():this.back())),z(Mn,i,s,r);if((i=this._extractString(this.tags.VARIABLE_END))||(i=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,z(qn,i,s,r);if(a==="r"&&this.str.charAt(this.index+1)==="/"){this.forwardN(2);for(var l="";!this.isFinished();)if(this.current()==="/"&&this.previous()!=="\\"){this.forward();break}else l+=this.current(),this.forward();for(var u=["g","i","m","y"],c="";!this.isFinished();){var f=u.indexOf(this.current())!==-1;if(f)c+=this.current(),this.forward();else break}return z(ii,{body:l,flags:c},s,r)}else if(Rn.indexOf(a)!==-1){this.forward();var h=["==","===","!=","!==","<=",">=","//","**"],p=a+this.current(),d;switch(Fn.indexOf(h,p)!==-1&&(this.forward(),a=p,Fn.indexOf(h,p+this.current())!==-1&&(a=p+this.current(),this.forward())),a){case"(":d=Vn;break;case")":d=zn;break;case"[":d=Hn;break;case"]":d=Wn;break;case"{":d=Gn;break;case"}":d=$n;break;case",":d=Jn;break;case":":d=Zn;break;case"~":d=Xn;break;case"|":d=Qn;break;default:d=Yn}return z(d,a,s,r)}else if(i=this._extractUntil(Pn+Rn),i.match(/^[-+]?[0-9]+$/))if(this.current()==="."){this.forward();var b=this._extract(aa);return z(ti,i+"."+b,s,r)}else return z(ei,i,s,r);else{if(i.match(/^(true|false)$/))return z(ri,i,s,r);if(i==="none")return z(Vt,i,s,r);if(i==="null")return z(Vt,i,s,r);if(i)return z(ni,i,s,r);throw new Error("Unexpected value while parsing: "+i)}}else{var x=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((i=this._extractString(this.tags.BLOCK_START+"-"))||(i=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,z(Kn,i,s,r);if((i=this._extractString(this.tags.VARIABLE_START+"-"))||(i=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,z(Dn,i,s,r);i="";var E,_=!1;for(this._matches(this.tags.COMMENT_START)&&(_=!0,i=this._extractString(this.tags.COMMENT_START));(E=this._extractUntil(x))!==null;)if(i+=E,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!_){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=i.length){var g=i.slice(-this.colno);if(/^\s+$/.test(g)&&(i=i.slice(0,-this.colno),!i.length))return this.nextToken()}break}else if(this._matches(this.tags.COMMENT_END)){if(!_)throw new Error("unexpected end of comment");i+=this._extractString(this.tags.COMMENT_END);break}else i+=this.current(),this.forward();if(E===null&&_)throw new Error("expected end of comment, got end of file");return z(_?Un:In,i,s,r)}},"nextToken"),t._parseString=o(function(s){this.forward();for(var r="";!this.isFinished()&&this.current()!==s;){var i=this.current();if(i==="\\"){switch(this.forward(),this.current()){case"n":r+=`
`;break;case"t":r+="	";break;case"r":r+="\r";break;default:r+=this.current()}this.forward()}else r+=i,this.forward()}return this.forward(),r},"_parseString"),t._matches=o(function(s){if(this.index+s.length>this.len)return null;var r=this.str.slice(this.index,this.index+s.length);return r===s},"_matches"),t._extractString=o(function(s){return this._matches(s)?(this.forwardN(s.length),s):null},"_extractString"),t._extractUntil=o(function(s){return this._extractMatching(!0,s||"")},"_extractUntil"),t._extract=o(function(s){return this._extractMatching(!1,s)},"_extract"),t._extractMatching=o(function(s,r){if(this.isFinished())return null;var i=r.indexOf(this.current());if(s&&i===-1||!s&&i!==-1){var a=this.current();this.forward();for(var l=r.indexOf(this.current());(s&&l===-1||!s&&l!==-1)&&!this.isFinished();)a+=this.current(),this.forward(),l=r.indexOf(this.current());return a}return""},"_extractMatching"),t._extractRegex=o(function(s){var r=this.currentStr().match(s);return r?(this.forwardN(r[0].length),r):null},"_extractRegex"),t.isFinished=o(function(){return this.index>=this.len},"isFinished"),t.forwardN=o(function(s){for(var r=0;r<s;r++)this.forward()},"forwardN"),t.forward=o(function(){this.index++,this.previous()===`
`?(this.lineno++,this.colno=0):this.colno++},"forward"),t.backN=o(function(s){for(var r=0;r<s;r++)this.back()},"backN"),t.back=o(function(){if(this.index--,this.current()===`
`){this.lineno--;var s=this.src.lastIndexOf(`
`,this.index-1);s===-1?this.colno=this.index:this.colno=this.index-s}else this.colno--},"back"),t.current=o(function(){return this.isFinished()?"":this.str.charAt(this.index)},"current"),t.currentStr=o(function(){return this.isFinished()?"":this.str.substr(this.index)},"currentStr"),t.previous=o(function(){return this.str.charAt(this.index-1)},"previous"),e}();si.exports={lex:o(function(t,n){return new ma(t,n)},"lex"),TOKEN_STRING:Bn,TOKEN_WHITESPACE:jn,TOKEN_DATA:In,TOKEN_BLOCK_START:Kn,TOKEN_BLOCK_END:Mn,TOKEN_VARIABLE_START:Dn,TOKEN_VARIABLE_END:qn,TOKEN_COMMENT:Un,TOKEN_LEFT_PAREN:Vn,TOKEN_RIGHT_PAREN:zn,TOKEN_LEFT_BRACKET:Hn,TOKEN_RIGHT_BRACKET:Wn,TOKEN_LEFT_CURLY:Gn,TOKEN_RIGHT_CURLY:$n,TOKEN_OPERATOR:Yn,TOKEN_COMMA:Jn,TOKEN_COLON:Zn,TOKEN_TILDE:Xn,TOKEN_PIPE:Qn,TOKEN_INT:ei,TOKEN_FLOAT:ti,TOKEN_BOOLEAN:ri,TOKEN_NONE:Vt,TOKEN_SYMBOL:ni,TOKEN_SPECIAL:da,TOKEN_REGEX:ii}});var vi=O((Df,Ht)=>{"use strict";var _e=typeof Reflect=="object"?Reflect:null,oi=_e&&typeof _e.apply=="function"?_e.apply:o(function(t,n,s){return Function.prototype.apply.call(t,n,s)},"ReflectApply"),ot;_e&&typeof _e.ownKeys=="function"?ot=_e.ownKeys:Object.getOwnPropertySymbols?ot=o(function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))},"ReflectOwnKeys"):ot=o(function(t){return Object.getOwnPropertyNames(t)},"ReflectOwnKeys");function va(e){console&&console.warn&&console.warn(e)}o(va,"ProcessEmitWarning");var li=Number.isNaN||o(function(t){return t!==t},"NumberIsNaN");function P(){P.init.call(this)}o(P,"EventEmitter");Ht.exports=P;Ht.exports.once=ba;P.EventEmitter=P;P.prototype._events=void 0;P.prototype._eventsCount=0;P.prototype._maxListeners=void 0;var ai=10;function at(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}o(at,"checkListener");Object.defineProperty(P,"defaultMaxListeners",{enumerable:!0,get:o(function(){return ai},"get"),set:o(function(e){if(typeof e!="number"||e<0||li(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ai=e},"set")});P.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};P.prototype.setMaxListeners=o(function(t){if(typeof t!="number"||t<0||li(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},"setMaxListeners");function ui(e){return e._maxListeners===void 0?P.defaultMaxListeners:e._maxListeners}o(ui,"_getMaxListeners");P.prototype.getMaxListeners=o(function(){return ui(this)},"getMaxListeners");P.prototype.emit=o(function(t){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var r=t==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var u=i[t];if(u===void 0)return!1;if(typeof u=="function")oi(u,this,n);else for(var c=u.length,f=di(u,c),s=0;s<c;++s)oi(f[s],this,n);return!0},"emit");function ci(e,t,n,s){var r,i,a;if(at(n),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),a===void 0)a=i[t]=n,++e._eventsCount;else if(typeof a=="function"?a=i[t]=s?[n,a]:[a,n]:s?a.unshift(n):a.push(n),r=ui(e),r>0&&a.length>r&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,va(l)}return e}o(ci,"_addListener");P.prototype.addListener=o(function(t,n){return ci(this,t,n,!1)},"addListener");P.prototype.on=P.prototype.addListener;P.prototype.prependListener=o(function(t,n){return ci(this,t,n,!0)},"prependListener");function ga(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}o(ga,"onceWrapper");function fi(e,t,n){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=ga.bind(s);return r.listener=n,s.wrapFn=r,r}o(fi,"_onceWrap");P.prototype.once=o(function(t,n){return at(n),this.on(t,fi(this,t,n)),this},"once");P.prototype.prependOnceListener=o(function(t,n){return at(n),this.prependListener(t,fi(this,t,n)),this},"prependOnceListener");P.prototype.removeListener=o(function(t,n){var s,r,i,a,l;if(at(n),r=this._events,r===void 0)return this;if(s=r[t],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,s.listener||n));else if(typeof s!="function"){for(i=-1,a=s.length-1;a>=0;a--)if(s[a]===n||s[a].listener===n){l=s[a].listener,i=a;break}if(i<0)return this;i===0?s.shift():ya(s,i),s.length===1&&(r[t]=s[0]),r.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this},"removeListener");P.prototype.off=P.prototype.removeListener;P.prototype.removeAllListeners=o(function(t){var n,s,r;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var i=Object.keys(s),a;for(r=0;r<i.length;++r)a=i[r],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(t,n[r]);return this},"removeAllListeners");function hi(e,t,n){var s=e._events;if(s===void 0)return[];var r=s[t];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?_a(r):di(r,r.length)}o(hi,"_listeners");P.prototype.listeners=o(function(t){return hi(this,t,!0)},"listeners");P.prototype.rawListeners=o(function(t){return hi(this,t,!1)},"rawListeners");P.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):pi.call(e,t)};P.prototype.listenerCount=pi;function pi(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}o(pi,"listenerCount");P.prototype.eventNames=o(function(){return this._eventsCount>0?ot(this._events):[]},"eventNames");function di(e,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=e[s];return n}o(di,"arrayClone");function ya(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}o(ya,"spliceOne");function _a(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}o(_a,"unwrapListeners");function ba(e,t){return new Promise(function(n,s){function r(a){e.removeListener(t,i),s(a)}o(r,"errorListener");function i(){typeof e.removeListener=="function"&&e.removeListener("error",r),n([].slice.call(arguments))}o(i,"resolver"),mi(e,t,i,{once:!0}),t!=="error"&&wa(e,r,{once:!0})})}o(ba,"once");function wa(e,t,n){typeof e.on=="function"&&mi(e,"error",t,n)}o(wa,"addErrorHandlerIfEventEmitter");function mi(e,t,n,s){if(typeof e.on=="function")s.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,o(function r(i){s.once&&e.removeEventListener(t,r),n(i)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}o(mi,"eventTargetAgnosticAddListener")});var be=O((Uf,wi)=>{"use strict";function gi(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Ea(s.key),s)}}o(gi,"_defineProperties");function Gt(e,t,n){return t&&gi(e.prototype,t),n&&gi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}o(Gt,"_createClass");function Ea(e){var t=xa(e,"string");return typeof t=="symbol"?t:String(t)}o(Ea,"_toPropertyKey");function xa(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}o(xa,"_toPrimitive");function _i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Wt(e,t)}o(_i,"_inheritsLoose");function Wt(e,t){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),Wt(e,t)}o(Wt,"_setPrototypeOf");var ka=vi(),yi=X();function Sa(e,t){return typeof e!="function"||typeof t!="function"?t:o(function(){var s=this.parent;this.parent=e;var r=t.apply(this,arguments);return this.parent=s,r},"wrap")}o(Sa,"parentWrap");function bi(e,t,n){n=n||{},yi.keys(n).forEach(function(r){n[r]=Sa(e.prototype[r],n[r])});var s=function(r){_i(i,r);function i(){return r.apply(this,arguments)||this}return o(i,"subclass"),Gt(i,[{key:"typename",get:o(function(){return t},"get")}]),i}(e);return yi._assign(s.prototype,n),s}o(bi,"extendClass");var Oa=function(){function e(){this.init.apply(this,arguments)}o(e,"Obj");var t=e.prototype;return t.init=o(function(){},"init"),e.extend=o(function(s,r){return typeof s=="object"&&(r=s,s="anonymous"),bi(this,s,r)},"extend"),Gt(e,[{key:"typename",get:o(function(){return this.constructor.name},"get")}]),e}(),Ta=function(e){_i(t,e);function t(){var s,r;return r=e.call(this)||this,(s=r).init.apply(s,arguments),r}o(t,"EmitterObj");var n=t.prototype;return n.init=o(function(){},"init"),t.extend=o(function(r,i){return typeof r=="object"&&(i=r,r="anonymous"),bi(this,r,i)},"extend"),Gt(t,[{key:"typename",get:o(function(){return this.constructor.name},"get")}]),t}(ka);wi.exports={Obj:Oa,EmitterObj:Ta}});var je=O((zf,Ci)=>{"use strict";function Ei(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,La(s.key),s)}}o(Ei,"_defineProperties");function Yt(e,t,n){return t&&Ei(e.prototype,t),n&&Ei(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}o(Yt,"_createClass");function La(e){var t=Aa(e,"string");return typeof t=="symbol"?t:String(t)}o(La,"_toPropertyKey");function Aa(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}o(Aa,"_toPrimitive");function lt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$t(e,t)}o(lt,"_inheritsLoose");function $t(e,t){return $t=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),$t(e,t)}o($t,"_setPrototypeOf");var Ca=be(),Na=Ca.Obj;function xi(e,t,n){e instanceof t&&n.push(e),e instanceof R&&e.findAll(t,n)}o(xi,"traverseAndCheck");var R=function(e){lt(t,e);function t(){return e.apply(this,arguments)||this}o(t,"Node");var n=t.prototype;return n.init=o(function(r,i){for(var a=arguments,l=this,u=arguments.length,c=new Array(u>2?u-2:0),f=2;f<u;f++)c[f-2]=arguments[f];this.lineno=r,this.colno=i,this.fields.forEach(function(h,p){var d=a[p+2];d===void 0&&(d=null),l[h]=d})},"init"),n.findAll=o(function(r,i){var a=this;return i=i||[],this instanceof re?this.children.forEach(function(l){return xi(l,r,i)}):this.fields.forEach(function(l){return xi(a[l],r,i)}),i},"findAll"),n.iterFields=o(function(r){var i=this;this.fields.forEach(function(a){r(i[a],a)})},"iterFields"),t}(Na),Jt=function(e){lt(t,e);function t(){return e.apply(this,arguments)||this}return o(t,"Value"),Yt(t,[{key:"typename",get:o(function(){return"Value"},"get")},{key:"fields",get:o(function(){return["value"]},"get")}]),t}(R),re=function(e){lt(t,e);function t(){return e.apply(this,arguments)||this}o(t,"NodeList");var n=t.prototype;return n.init=o(function(r,i,a){e.prototype.init.call(this,r,i,a||[])},"init"),n.addChild=o(function(r){this.children.push(r)},"addChild"),Yt(t,[{key:"typename",get:o(function(){return"NodeList"},"get")},{key:"fields",get:o(function(){return["children"]},"get")}]),t}(R),Fa=re.extend("Root"),ki=Jt.extend("Literal"),Pa=Jt.extend("Symbol"),Ra=re.extend("Group"),Ba=re.extend("Array"),ja=R.extend("Pair",{fields:["key","value"]}),Si=re.extend("Dict"),Ia=R.extend("LookupVal",{fields:["target","val"]}),Oi=R.extend("If",{fields:["cond","body","else_"]}),Ka=Oi.extend("IfAsync"),Ma=R.extend("InlineIf",{fields:["cond","body","else_"]}),Zt=R.extend("For",{fields:["arr","name","body","else_"]}),Da=Zt.extend("AsyncEach"),qa=Zt.extend("AsyncAll"),Ti=R.extend("Macro",{fields:["name","args","body"]}),Ua=Ti.extend("Caller"),Va=R.extend("Import",{fields:["template","target","withContext"]}),za=function(e){lt(t,e);function t(){return e.apply(this,arguments)||this}o(t,"FromImport");var n=t.prototype;return n.init=o(function(r,i,a,l,u){e.prototype.init.call(this,r,i,a,l||new re,u)},"init"),Yt(t,[{key:"typename",get:o(function(){return"FromImport"},"get")},{key:"fields",get:o(function(){return["template","names","withContext"]},"get")}]),t}(R),Li=R.extend("FunCall",{fields:["name","args"]}),Ai=Li.extend("Filter"),Ha=Ai.extend("FilterAsync",{fields:["name","args","symbol"]}),Wa=Si.extend("KeywordArgs"),Ga=R.extend("Block",{fields:["name","body"]}),$a=R.extend("Super",{fields:["blockName","symbol"]}),Ya=R.extend("TemplateRef",{fields:["template"]}),Ja=Ya.extend("Extends"),Za=R.extend("Include",{fields:["template","ignoreMissing"]}),Xa=R.extend("Set",{fields:["targets","value"]}),Qa=R.extend("Switch",{fields:["expr","cases","default"]}),el=R.extend("Case",{fields:["cond","body"]}),tl=re.extend("Output"),rl=R.extend("Capture",{fields:["body"]}),nl=ki.extend("TemplateData"),Xt=R.extend("UnaryOp",{fields:["target"]}),G=R.extend("BinOp",{fields:["left","right"]}),il=G.extend("In"),sl=G.extend("Is"),ol=G.extend("Or"),al=G.extend("And"),ll=Xt.extend("Not"),ul=G.extend("Add"),cl=G.extend("Concat"),fl=G.extend("Sub"),hl=G.extend("Mul"),pl=G.extend("Div"),dl=G.extend("FloorDiv"),ml=G.extend("Mod"),vl=G.extend("Pow"),gl=Xt.extend("Neg"),yl=Xt.extend("Pos"),_l=R.extend("Compare",{fields:["expr","ops"]}),bl=R.extend("CompareOperand",{fields:["expr","type"]}),Qt=R.extend("CallExtension",{init:o(function(t,n,s,r){this.parent(),this.extName=t.__name||t,this.prop=n,this.args=s||new re,this.contentArgs=r||[],this.autoescape=t.autoescape},"init"),fields:["extName","prop","args","contentArgs"]}),wl=Qt.extend("CallExtensionAsync");function we(e,t,n){var s=e.split(`
`);s.forEach(function(r,i){r&&(n&&i>0||!n)&&process.stdout.write(" ".repeat(t));var a=i===s.length-1?"":`
`;process.stdout.write(""+r+a)})}o(we,"print");function Be(e,t){if(t=t||0,we(e.typename+": ",t),e instanceof re)we(`
`),e.children.forEach(function(r){Be(r,t+2)});else if(e instanceof Qt)we(e.extName+"."+e.prop+`
`),e.args&&Be(e.args,t+2),e.contentArgs&&e.contentArgs.forEach(function(r){Be(r,t+2)});else{var n=[],s=null;e.iterFields(function(r,i){r instanceof R?n.push([i,r]):(s=s||{},s[i]=r)}),s?we(JSON.stringify(s,null,2)+`
`,null,!0):we(`
`),n.forEach(function(r){var i=r[0],a=r[1];we("["+i+"] =>",t+2),Be(a,t+4)})}}o(Be,"printNodes");Ci.exports={Node:R,Root:Fa,NodeList:re,Value:Jt,Literal:ki,Symbol:Pa,Group:Ra,Array:Ba,Pair:ja,Dict:Si,Output:tl,Capture:rl,TemplateData:nl,If:Oi,IfAsync:Ka,InlineIf:Ma,For:Zt,AsyncEach:Da,AsyncAll:qa,Macro:Ti,Caller:Ua,Import:Va,FromImport:za,FunCall:Li,Filter:Ai,FilterAsync:Ha,KeywordArgs:Wa,Block:Ga,Super:$a,Extends:Ja,Include:Za,Set:Xa,Switch:Qa,Case:el,LookupVal:Ia,BinOp:G,In:il,Is:sl,Or:ol,And:al,Not:ll,Add:ul,Concat:cl,Sub:fl,Mul:hl,Div:pl,FloorDiv:dl,Mod:ml,Pow:vl,Neg:gl,Pos:yl,Compare:_l,CompareOperand:bl,CallExtension:Qt,CallExtensionAsync:wl,printNodes:Be}});var rr=O((Wf,Fi)=>{"use strict";function El(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tr(e,t)}o(El,"_inheritsLoose");function tr(e,t){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),tr(e,t)}o(tr,"_setPrototypeOf");var w=zt(),y=je(),xl=be().Obj,er=X(),Ni=function(e){El(t,e);function t(){return e.apply(this,arguments)||this}o(t,"Parser");var n=t.prototype;return n.init=o(function(r){this.tokens=r,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},"init"),n.nextToken=o(function(r){var i;if(this.peeked)if(!r&&this.peeked.type===w.TOKEN_WHITESPACE)this.peeked=null;else return i=this.peeked,this.peeked=null,i;if(i=this.tokens.nextToken(),!r)for(;i&&i.type===w.TOKEN_WHITESPACE;)i=this.tokens.nextToken();return i},"nextToken"),n.peekToken=o(function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},"peekToken"),n.pushToken=o(function(r){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=r},"pushToken"),n.error=o(function(r,i,a){if(i===void 0||a===void 0){var l=this.peekToken()||{};i=l.lineno,a=l.colno}return i!==void 0&&(i+=1),a!==void 0&&(a+=1),new er.TemplateError(r,i,a)},"error"),n.fail=o(function(r,i,a){throw this.error(r,i,a)},"fail"),n.skip=o(function(r){var i=this.nextToken();return!i||i.type!==r?(this.pushToken(i),!1):!0},"skip"),n.expect=o(function(r){var i=this.nextToken();return i.type!==r&&this.fail("expected "+r+", got "+i.type,i.lineno,i.colno),i},"expect"),n.skipValue=o(function(r,i){var a=this.nextToken();return!a||a.type!==r||a.value!==i?(this.pushToken(a),!1):!0},"skipValue"),n.skipSymbol=o(function(r){return this.skipValue(w.TOKEN_SYMBOL,r)},"skipSymbol"),n.advanceAfterBlockEnd=o(function(r){var i;return r||(i=this.peekToken(),i||this.fail("unexpected end of file"),i.type!==w.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),r=this.nextToken().value),i=this.nextToken(),i&&i.type===w.TOKEN_BLOCK_END?i.value.charAt(0)==="-"&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+r+" statement"),i},"advanceAfterBlockEnd"),n.advanceAfterVariableEnd=o(function(){var r=this.nextToken();r&&r.type===w.TOKEN_VARIABLE_END?this.dropLeadingWhitespace=r.value.charAt(r.value.length-this.tokens.tags.VARIABLE_END.length-1)==="-":(this.pushToken(r),this.fail("expected variable end"))},"advanceAfterVariableEnd"),n.parseFor=o(function(){var r=this.peekToken(),i,a;this.skipSymbol("for")?(i=new y.For(r.lineno,r.colno),a="endfor"):this.skipSymbol("asyncEach")?(i=new y.AsyncEach(r.lineno,r.colno),a="endeach"):this.skipSymbol("asyncAll")?(i=new y.AsyncAll(r.lineno,r.colno),a="endall"):this.fail("parseFor: expected for{Async}",r.lineno,r.colno),i.name=this.parsePrimary(),i.name instanceof y.Symbol||this.fail("parseFor: variable name expected for loop");var l=this.peekToken().type;if(l===w.TOKEN_COMMA){var u=i.name;for(i.name=new y.Array(u.lineno,u.colno),i.name.addChild(u);this.skip(w.TOKEN_COMMA);){var c=this.parsePrimary();i.name.addChild(c)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',r.lineno,r.colno),i.arr=this.parseExpression(),this.advanceAfterBlockEnd(r.value),i.body=this.parseUntilBlocks(a,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),i.else_=this.parseUntilBlocks(a)),this.advanceAfterBlockEnd(),i},"parseFor"),n.parseMacro=o(function(){var r=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var i=this.parsePrimary(!0),a=this.parseSignature(),l=new y.Macro(r.lineno,r.colno,i,a);return this.advanceAfterBlockEnd(r.value),l.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),l},"parseMacro"),n.parseCall=o(function(){var r=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var i=this.parseSignature(!0)||new y.NodeList,a=this.parsePrimary();this.advanceAfterBlockEnd(r.value);var l=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var u=new y.Symbol(r.lineno,r.colno,"caller"),c=new y.Caller(r.lineno,r.colno,u,i,l),f=a.args.children;f[f.length-1]instanceof y.KeywordArgs||f.push(new y.KeywordArgs);var h=f[f.length-1];return h.addChild(new y.Pair(r.lineno,r.colno,u,c)),new y.Output(r.lineno,r.colno,[a])},"parseCall"),n.parseWithContext=o(function(){var r=this.peekToken(),i=null;return this.skipSymbol("with")?i=!0:this.skipSymbol("without")&&(i=!1),i!==null&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",r.lineno,r.colno)),i},"parseWithContext"),n.parseImport=o(function(){var r=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",r.lineno,r.colno);var i=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',r.lineno,r.colno);var a=this.parseExpression(),l=this.parseWithContext(),u=new y.Import(r.lineno,r.colno,i,a,l);return this.advanceAfterBlockEnd(r.value),u},"parseImport"),n.parseFrom=o(function(){var r=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var i=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",r.lineno,r.colno);for(var a=new y.NodeList,l;;){var u=this.peekToken();if(u.type===w.TOKEN_BLOCK_END){a.children.length||this.fail("parseFrom: Expected at least one import name",r.lineno,r.colno),u.value.charAt(0)==="-"&&(this.dropLeadingWhitespace=!0),this.nextToken();break}a.children.length>0&&!this.skip(w.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",r.lineno,r.colno);var c=this.parsePrimary();if(c.value.charAt(0)==="_"&&this.fail("parseFrom: names starting with an underscore cannot be imported",c.lineno,c.colno),this.skipSymbol("as")){var f=this.parsePrimary();a.addChild(new y.Pair(c.lineno,c.colno,c,f))}else a.addChild(c);l=this.parseWithContext()}return new y.FromImport(r.lineno,r.colno,i,a,l)},"parseFrom"),n.parseBlock=o(function(){var r=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",r.lineno,r.colno);var i=new y.Block(r.lineno,r.colno);i.name=this.parsePrimary(),i.name instanceof y.Symbol||this.fail("parseBlock: variable name expected",r.lineno,r.colno),this.advanceAfterBlockEnd(r.value),i.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(i.name.value);var a=this.peekToken();return a||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(a.value),i},"parseBlock"),n.parseExtends=o(function(){var r="extends",i=this.peekToken();this.skipSymbol(r)||this.fail("parseTemplateRef: expected "+r);var a=new y.Extends(i.lineno,i.colno);return a.template=this.parseExpression(),this.advanceAfterBlockEnd(i.value),a},"parseExtends"),n.parseInclude=o(function(){var r="include",i=this.peekToken();this.skipSymbol(r)||this.fail("parseInclude: expected "+r);var a=new y.Include(i.lineno,i.colno);return a.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(a.ignoreMissing=!0),this.advanceAfterBlockEnd(i.value),a},"parseInclude"),n.parseIf=o(function(){var r=this.peekToken(),i;this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?i=new y.If(r.lineno,r.colno):this.skipSymbol("ifAsync")?i=new y.IfAsync(r.lineno,r.colno):this.fail("parseIf: expected if, elif, or elseif",r.lineno,r.colno),i.cond=this.parseExpression(),this.advanceAfterBlockEnd(r.value),i.body=this.parseUntilBlocks("elif","elseif","else","endif");var a=this.peekToken();switch(a&&a.value){case"elseif":case"elif":i.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),i.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":i.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return i},"parseIf"),n.parseSet=o(function(){var r=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",r.lineno,r.colno);for(var i=new y.Set(r.lineno,r.colno,[]),a;(a=this.parsePrimary())&&(i.targets.push(a),!!this.skip(w.TOKEN_COMMA)););return this.skipValue(w.TOKEN_OPERATOR,"=")?(i.value=this.parseExpression(),this.advanceAfterBlockEnd(r.value)):this.skip(w.TOKEN_BLOCK_END)?(i.body=new y.Capture(r.lineno,r.colno,this.parseUntilBlocks("endset")),i.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",r.lineno,r.colno),i},"parseSet"),n.parseSwitch=o(function(){var r="switch",i="endswitch",a="case",l="default",u=this.peekToken();!this.skipSymbol(r)&&!this.skipSymbol(a)&&!this.skipSymbol(l)&&this.fail('parseSwitch: expected "switch," "case" or "default"',u.lineno,u.colno);var c=this.parseExpression();this.advanceAfterBlockEnd(r),this.parseUntilBlocks(a,l,i);var f=this.peekToken(),h=[],p;do{this.skipSymbol(a);var d=this.parseExpression();this.advanceAfterBlockEnd(r);var b=this.parseUntilBlocks(a,l,i);h.push(new y.Case(f.line,f.col,d,b)),f=this.peekToken()}while(f&&f.value===a);switch(f.value){case l:this.advanceAfterBlockEnd(),p=this.parseUntilBlocks(i),this.advanceAfterBlockEnd();break;case i:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new y.Switch(u.lineno,u.colno,c,h,p)},"parseSwitch"),n.parseStatement=o(function(){var r=this.peekToken(),i;if(r.type!==w.TOKEN_SYMBOL&&this.fail("tag name expected",r.lineno,r.colno),this.breakOnBlocks&&er.indexOf(this.breakOnBlocks,r.value)!==-1)return null;switch(r.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var a=0;a<this.extensions.length;a++){var l=this.extensions[a];if(er.indexOf(l.tags||[],r.value)!==-1)return l.parse(this,y,w)}this.fail("unknown block tag: "+r.value,r.lineno,r.colno)}return i},"parseStatement"),n.parseRaw=o(function(r){r=r||"raw";for(var i="end"+r,a=new RegExp("([\\s\\S]*?){%\\s*("+r+"|"+i+")\\s*(?=%})%}"),l=1,u="",c=null,f=this.advanceAfterBlockEnd();(c=this.tokens._extractRegex(a))&&l>0;){var h=c[0],p=c[1],d=c[2];d===r?l+=1:d===i&&(l-=1),l===0?(u+=p,this.tokens.backN(h.length-p.length)):u+=h}return new y.Output(f.lineno,f.colno,[new y.TemplateData(f.lineno,f.colno,u)])},"parseRaw"),n.parsePostfix=o(function(r){for(var i,a=this.peekToken();a;){if(a.type===w.TOKEN_LEFT_PAREN)r=new y.FunCall(a.lineno,a.colno,r,this.parseSignature());else if(a.type===w.TOKEN_LEFT_BRACKET)i=this.parseAggregate(),i.children.length>1&&this.fail("invalid index"),r=new y.LookupVal(a.lineno,a.colno,r,i.children[0]);else if(a.type===w.TOKEN_OPERATOR&&a.value==="."){this.nextToken();var l=this.nextToken();l.type!==w.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+l.value,l.lineno,l.colno),i=new y.Literal(l.lineno,l.colno,l.value),r=new y.LookupVal(a.lineno,a.colno,r,i)}else break;a=this.peekToken()}return r},"parsePostfix"),n.parseExpression=o(function(){var r=this.parseInlineIf();return r},"parseExpression"),n.parseInlineIf=o(function(){var r=this.parseOr();if(this.skipSymbol("if")){var i=this.parseOr(),a=r;r=new y.InlineIf(r.lineno,r.colno),r.body=a,r.cond=i,this.skipSymbol("else")?r.else_=this.parseOr():r.else_=null}return r},"parseInlineIf"),n.parseOr=o(function(){for(var r=this.parseAnd();this.skipSymbol("or");){var i=this.parseAnd();r=new y.Or(r.lineno,r.colno,r,i)}return r},"parseOr"),n.parseAnd=o(function(){for(var r=this.parseNot();this.skipSymbol("and");){var i=this.parseNot();r=new y.And(r.lineno,r.colno,r,i)}return r},"parseAnd"),n.parseNot=o(function(){var r=this.peekToken();return this.skipSymbol("not")?new y.Not(r.lineno,r.colno,this.parseNot()):this.parseIn()},"parseNot"),n.parseIn=o(function(){for(var r=this.parseIs();;){var i=this.nextToken();if(!i)break;var a=i.type===w.TOKEN_SYMBOL&&i.value==="not";if(a||this.pushToken(i),this.skipSymbol("in")){var l=this.parseIs();r=new y.In(r.lineno,r.colno,r,l),a&&(r=new y.Not(r.lineno,r.colno,r))}else{a&&this.pushToken(i);break}}return r},"parseIn"),n.parseIs=o(function(){var r=this.parseCompare();if(this.skipSymbol("is")){var i=this.skipSymbol("not"),a=this.parseCompare();r=new y.Is(r.lineno,r.colno,r,a),i&&(r=new y.Not(r.lineno,r.colno,r))}return r},"parseIs"),n.parseCompare=o(function(){for(var r=["==","===","!=","!==","<",">","<=",">="],i=this.parseConcat(),a=[];;){var l=this.nextToken();if(l)if(r.indexOf(l.value)!==-1)a.push(new y.CompareOperand(l.lineno,l.colno,this.parseConcat(),l.value));else{this.pushToken(l);break}else break}return a.length?new y.Compare(a[0].lineno,a[0].colno,i,a):i},"parseCompare"),n.parseConcat=o(function(){for(var r=this.parseAdd();this.skipValue(w.TOKEN_TILDE,"~");){var i=this.parseAdd();r=new y.Concat(r.lineno,r.colno,r,i)}return r},"parseConcat"),n.parseAdd=o(function(){for(var r=this.parseSub();this.skipValue(w.TOKEN_OPERATOR,"+");){var i=this.parseSub();r=new y.Add(r.lineno,r.colno,r,i)}return r},"parseAdd"),n.parseSub=o(function(){for(var r=this.parseMul();this.skipValue(w.TOKEN_OPERATOR,"-");){var i=this.parseMul();r=new y.Sub(r.lineno,r.colno,r,i)}return r},"parseSub"),n.parseMul=o(function(){for(var r=this.parseDiv();this.skipValue(w.TOKEN_OPERATOR,"*");){var i=this.parseDiv();r=new y.Mul(r.lineno,r.colno,r,i)}return r},"parseMul"),n.parseDiv=o(function(){for(var r=this.parseFloorDiv();this.skipValue(w.TOKEN_OPERATOR,"/");){var i=this.parseFloorDiv();r=new y.Div(r.lineno,r.colno,r,i)}return r},"parseDiv"),n.parseFloorDiv=o(function(){for(var r=this.parseMod();this.skipValue(w.TOKEN_OPERATOR,"//");){var i=this.parseMod();r=new y.FloorDiv(r.lineno,r.colno,r,i)}return r},"parseFloorDiv"),n.parseMod=o(function(){for(var r=this.parsePow();this.skipValue(w.TOKEN_OPERATOR,"%");){var i=this.parsePow();r=new y.Mod(r.lineno,r.colno,r,i)}return r},"parseMod"),n.parsePow=o(function(){for(var r=this.parseUnary();this.skipValue(w.TOKEN_OPERATOR,"**");){var i=this.parseUnary();r=new y.Pow(r.lineno,r.colno,r,i)}return r},"parsePow"),n.parseUnary=o(function(r){var i=this.peekToken(),a;return this.skipValue(w.TOKEN_OPERATOR,"-")?a=new y.Neg(i.lineno,i.colno,this.parseUnary(!0)):this.skipValue(w.TOKEN_OPERATOR,"+")?a=new y.Pos(i.lineno,i.colno,this.parseUnary(!0)):a=this.parsePrimary(),r||(a=this.parseFilter(a)),a},"parseUnary"),n.parsePrimary=o(function(r){var i=this.nextToken(),a,l=null;if(i?i.type===w.TOKEN_STRING?a=i.value:i.type===w.TOKEN_INT?a=parseInt(i.value,10):i.type===w.TOKEN_FLOAT?a=parseFloat(i.value):i.type===w.TOKEN_BOOLEAN?i.value==="true"?a=!0:i.value==="false"?a=!1:this.fail("invalid boolean: "+i.value,i.lineno,i.colno):i.type===w.TOKEN_NONE?a=null:i.type===w.TOKEN_REGEX&&(a=new RegExp(i.value.body,i.value.flags)):this.fail("expected expression, got end of file"),a!==void 0?l=new y.Literal(i.lineno,i.colno,a):i.type===w.TOKEN_SYMBOL?l=new y.Symbol(i.lineno,i.colno,i.value):(this.pushToken(i),l=this.parseAggregate()),r||(l=this.parsePostfix(l)),l)return l;throw this.error("unexpected token: "+i.value,i.lineno,i.colno)},"parsePrimary"),n.parseFilterName=o(function(){for(var r=this.expect(w.TOKEN_SYMBOL),i=r.value;this.skipValue(w.TOKEN_OPERATOR,".");)i+="."+this.expect(w.TOKEN_SYMBOL).value;return new y.Symbol(r.lineno,r.colno,i)},"parseFilterName"),n.parseFilterArgs=o(function(r){if(this.peekToken().type===w.TOKEN_LEFT_PAREN){var i=this.parsePostfix(r);return i.args.children}return[]},"parseFilterArgs"),n.parseFilter=o(function(r){for(;this.skip(w.TOKEN_PIPE);){var i=this.parseFilterName();r=new y.Filter(i.lineno,i.colno,i,new y.NodeList(i.lineno,i.colno,[r].concat(this.parseFilterArgs(r))))}return r},"parseFilter"),n.parseFilterStatement=o(function(){var r=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var i=this.parseFilterName(),a=this.parseFilterArgs(i);this.advanceAfterBlockEnd(r.value);var l=new y.Capture(i.lineno,i.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var u=new y.Filter(i.lineno,i.colno,i,new y.NodeList(i.lineno,i.colno,[l].concat(a)));return new y.Output(i.lineno,i.colno,[u])},"parseFilterStatement"),n.parseAggregate=o(function(){var r=this.nextToken(),i;switch(r.type){case w.TOKEN_LEFT_PAREN:i=new y.Group(r.lineno,r.colno);break;case w.TOKEN_LEFT_BRACKET:i=new y.Array(r.lineno,r.colno);break;case w.TOKEN_LEFT_CURLY:i=new y.Dict(r.lineno,r.colno);break;default:return null}for(;;){var a=this.peekToken().type;if(a===w.TOKEN_RIGHT_PAREN||a===w.TOKEN_RIGHT_BRACKET||a===w.TOKEN_RIGHT_CURLY){this.nextToken();break}if(i.children.length>0&&(this.skip(w.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",r.lineno,r.colno)),i instanceof y.Dict){var l=this.parsePrimary();this.skip(w.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",r.lineno,r.colno);var u=this.parseExpression();i.addChild(new y.Pair(l.lineno,l.colno,l,u))}else{var c=this.parseExpression();i.addChild(c)}}return i},"parseAggregate"),n.parseSignature=o(function(r,i){var a=this.peekToken();if(!i&&a.type!==w.TOKEN_LEFT_PAREN){if(r)return null;this.fail("expected arguments",a.lineno,a.colno)}a.type===w.TOKEN_LEFT_PAREN&&(a=this.nextToken());for(var l=new y.NodeList(a.lineno,a.colno),u=new y.KeywordArgs(a.lineno,a.colno),c=!1;;){if(a=this.peekToken(),!i&&a.type===w.TOKEN_RIGHT_PAREN){this.nextToken();break}else if(i&&a.type===w.TOKEN_BLOCK_END)break;if(c&&!this.skip(w.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",a.lineno,a.colno);else{var f=this.parseExpression();this.skipValue(w.TOKEN_OPERATOR,"=")?u.addChild(new y.Pair(f.lineno,f.colno,f,this.parseExpression())):l.addChild(f)}c=!0}return u.children.length&&l.addChild(u),l},"parseSignature"),n.parseUntilBlocks=o(function(){for(var r=this.breakOnBlocks,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];this.breakOnBlocks=a;var u=this.parse();return this.breakOnBlocks=r,u},"parseUntilBlocks"),n.parseNodes=o(function(){for(var r,i=[];r=this.nextToken();)if(r.type===w.TOKEN_DATA){var a=r.value,l=this.peekToken(),u=l&&l.value;this.dropLeadingWhitespace&&(a=a.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),l&&(l.type===w.TOKEN_BLOCK_START&&u.charAt(u.length-1)==="-"||l.type===w.TOKEN_VARIABLE_START&&u.charAt(this.tokens.tags.VARIABLE_START.length)==="-"||l.type===w.TOKEN_COMMENT&&u.charAt(this.tokens.tags.COMMENT_START.length)==="-")&&(a=a.replace(/\s*$/,"")),i.push(new y.Output(r.lineno,r.colno,[new y.TemplateData(r.lineno,r.colno,a)]))}else if(r.type===w.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var c=this.parseStatement();if(!c)break;i.push(c)}else if(r.type===w.TOKEN_VARIABLE_START){var f=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),i.push(new y.Output(r.lineno,r.colno,[f]))}else r.type===w.TOKEN_COMMENT?this.dropLeadingWhitespace=r.value.charAt(r.value.length-this.tokens.tags.COMMENT_END.length-1)==="-":this.fail("Unexpected token at top-level: "+r.type,r.lineno,r.colno);return i},"parseNodes"),n.parse=o(function(){return new y.NodeList(0,0,this.parseNodes())},"parse"),n.parseAsRoot=o(function(){return new y.Root(0,0,this.parseNodes())},"parseAsRoot"),t}(xl);Fi.exports={parse:o(function(t,n,s){var r=new Ni(w.lex(t,s));return n!==void 0&&(r.extensions=n),r.parseAsRoot()},"parse"),Parser:Ni}});var Bi=O(($f,Ri)=>{"use strict";var L=je(),kl=X(),Sl=0;function Pi(){return"hole_"+Sl++}o(Pi,"gensym");function nr(e,t){for(var n=null,s=0;s<e.length;s++){var r=t(e[s]);r!==e[s]&&(n||(n=e.slice()),n[s]=r)}return n||e}o(nr,"mapCOW");function ue(e,t,n){if(!(e instanceof L.Node))return e;if(!n){var s=t(e);if(s&&s!==e)return s}if(e instanceof L.NodeList){var r=nr(e.children,function(c){return ue(c,t,n)});r!==e.children&&(e=new L[e.typename](e.lineno,e.colno,r))}else if(e instanceof L.CallExtension){var i=ue(e.args,t,n),a=nr(e.contentArgs,function(c){return ue(c,t,n)});(i!==e.args||a!==e.contentArgs)&&(e=new L[e.typename](e.extName,e.prop,i,a))}else{var l=e.fields.map(function(c){return e[c]}),u=nr(l,function(c){return ue(c,t,n)});u!==l&&(e=new L[e.typename](e.lineno,e.colno),u.forEach(function(c,f){e[e.fields[f]]=c}))}return n&&t(e)||e}o(ue,"walk");function ir(e,t){return ue(e,t,!0)}o(ir,"depthWalk");function Ie(e,t,n){var s=[],r=ir(n?e[n]:e,function(i){var a;return i instanceof L.Block?i:((i instanceof L.Filter&&kl.indexOf(t,i.name.value)!==-1||i instanceof L.CallExtensionAsync)&&(a=new L.Symbol(i.lineno,i.colno,Pi()),s.push(new L.FilterAsync(i.lineno,i.colno,i.name,i.args,a))),a)});return n?e[n]=r:e=r,s.length?(s.push(e),new L.NodeList(e.lineno,e.colno,s)):e}o(Ie,"_liftFilters");function Ol(e,t){return ir(e,function(n){return n instanceof L.Output?Ie(n,t):n instanceof L.Set?Ie(n,t,"value"):n instanceof L.For?Ie(n,t,"arr"):n instanceof L.If?Ie(n,t,"cond"):n instanceof L.CallExtension?Ie(n,t,"args"):void 0})}o(Ol,"liftFilters");function Tl(e){return ue(e,function(t){if(t instanceof L.Block){var n=!1,s=Pi();t.body=ue(t.body,function(r){if(r instanceof L.FunCall&&r.name.value==="super")return n=!0,new L.Symbol(r.lineno,r.colno,s)}),n&&t.body.children.unshift(new L.Super(0,0,t.name,new L.Symbol(0,0,s)))}})}o(Tl,"liftSuper");function Ll(e){return ir(e,function(t){if(!(!(t instanceof L.If)&&!(t instanceof L.For))){var n=!1;if(ue(t,function(s){if(s instanceof L.FilterAsync||s instanceof L.IfAsync||s instanceof L.AsyncEach||s instanceof L.AsyncAll||s instanceof L.CallExtensionAsync)return n=!0,s}),n){if(t instanceof L.If)return new L.IfAsync(t.lineno,t.colno,t.cond,t.body,t.else_);if(t instanceof L.For&&!(t instanceof L.AsyncAll))return new L.AsyncEach(t.lineno,t.colno,t.arr,t.name,t.body,t.else_)}}})}o(Ll,"convertStatements");function Al(e,t){return Ll(Tl(Ol(e,t)))}o(Al,"cps");function Cl(e,t){return Al(e,t||[])}o(Cl,"transform");Ri.exports={transform:Cl}});var Ee=O((Jf,Mi)=>{"use strict";var Y=X(),ji=Array.from,Nl=typeof Symbol=="function"&&Symbol.iterator&&typeof ji=="function",Fl=function(){function e(n,s){this.variables=Object.create(null),this.parent=n,this.topLevel=!1,this.isolateWrites=s}o(e,"Frame");var t=e.prototype;return t.set=o(function(s,r,i){var a=s.split("."),l=this.variables,u=this;if(i&&(u=this.resolve(a[0],!0))){u.set(s,r);return}for(var c=0;c<a.length-1;c++){var f=a[c];l[f]||(l[f]={}),l=l[f]}l[a[a.length-1]]=r},"set"),t.get=o(function(s){var r=this.variables[s];return r!==void 0?r:null},"get"),t.lookup=o(function(s){var r=this.parent,i=this.variables[s];return i!==void 0?i:r&&r.lookup(s)},"lookup"),t.resolve=o(function(s,r){var i=r&&this.isolateWrites?void 0:this.parent,a=this.variables[s];return a!==void 0?this:i&&i.resolve(s)},"resolve"),t.push=o(function(s){return new e(this,s)},"push"),t.pop=o(function(){return this.parent},"pop"),e}();function Pl(e,t,n){return o(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var l=Ki(i),u,c=Bl(i);if(l>e.length)u=i.slice(0,e.length),i.slice(u.length,l).forEach(function(p,d){d<t.length&&(c[t[d]]=p)}),u.push(c);else if(l<e.length){u=i.slice(0,l);for(var f=l;f<e.length;f++){var h=e[f];u.push(c[h]),delete c[h]}u.push(c)}else u=i;return n.apply(this,u)},"macro")}o(Pl,"makeMacro");function Rl(e){return e.__keywords=!0,e}o(Rl,"makeKeywordArgs");function Ii(e){return e&&Object.prototype.hasOwnProperty.call(e,"__keywords")}o(Ii,"isKeywordArgs");function Bl(e){var t=e.length;if(t){var n=e[t-1];if(Ii(n))return n}return{}}o(Bl,"getKeywordArgs");function Ki(e){var t=e.length;if(t===0)return 0;var n=e[t-1];return Ii(n)?t-1:t}o(Ki,"numArgs");function oe(e){if(typeof e!="string")return e;this.val=e,this.length=e.length}o(oe,"SafeString");oe.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}});oe.prototype.valueOf=o(function(){return this.val},"valueOf");oe.prototype.toString=o(function(){return this.val},"toString");function jl(e,t){return e instanceof oe?new oe(t):t.toString()}o(jl,"copySafeness");function Il(e){var t=typeof e;return t==="string"?new oe(e):t!=="function"?e:o(function(s){var r=e.apply(this,arguments);return typeof r=="string"?new oe(r):r},"wrapSafe")}o(Il,"markSafe");function Kl(e,t){return e=e??"",t&&!(e instanceof oe)&&(e=Y.escape(e.toString())),e}o(Kl,"suppressValue");function Ml(e,t,n){if(e==null)throw new Y.TemplateError("attempted to output null or undefined value",t+1,n+1);return e}o(Ml,"ensureDefined");function Dl(e,t){if(e!=null)return typeof e[t]=="function"?function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e[t].apply(e,s)}:e[t]}o(Dl,"memberLookup");function ql(e,t,n,s){if(e){if(typeof e!="function")throw new Error("Unable to call `"+t+"`, which is not a function")}else throw new Error("Unable to call `"+t+"`, which is undefined or falsey");return e.apply(n,s)}o(ql,"callWrap");function Ul(e,t,n){var s=t.lookup(n);return s!==void 0?s:e.lookup(n)}o(Ul,"contextOrFrameLookup");function Vl(e,t,n){return e.lineno?e:new Y.TemplateError(e,t,n)}o(Vl,"handleError");function zl(e,t,n,s){if(Y.isArray(e)){var r=e.length;Y.asyncIter(e,o(function(a,l,u){switch(t){case 1:n(a,l,r,u);break;case 2:n(a[0],a[1],l,r,u);break;case 3:n(a[0],a[1],a[2],l,r,u);break;default:a.push(l,r,u),n.apply(this,a)}},"iterCallback"),s)}else Y.asyncFor(e,o(function(a,l,u,c,f){n(a,l,u,c,f)},"iterCallback"),s)}o(zl,"asyncEach");function Hl(e,t,n,s){var r=0,i,a;function l(d,b){r++,a[d]=b,r===i&&s(null,a.join(""))}if(o(l,"done"),Y.isArray(e))if(i=e.length,a=new Array(i),i===0)s(null,"");else for(var u=0;u<e.length;u++){var c=e[u];switch(t){case 1:n(c,u,i,l);break;case 2:n(c[0],c[1],u,i,l);break;case 3:n(c[0],c[1],c[2],u,i,l);break;default:c.push(u,i,l),n.apply(this,c)}}else{var f=Y.keys(e||{});if(i=f.length,a=new Array(i),i===0)s(null,"");else for(var h=0;h<f.length;h++){var p=f[h];n(p,e[p],h,i,l)}}}o(Hl,"asyncAll");function Wl(e){return typeof e!="object"||e===null||Y.isArray(e)?e:Nl&&Symbol.iterator in e?ji(e):e}o(Wl,"fromIterator");Mi.exports={Frame:Fl,makeMacro:Pl,makeKeywordArgs:Rl,numArgs:Ki,suppressValue:Kl,ensureDefined:Ml,memberLookup:Dl,contextOrFrameLookup:Ul,callWrap:ql,handleError:Vl,isArray:Y.isArray,keys:Y.keys,SafeString:oe,copySafeness:jl,markSafe:Il,asyncEach:zl,asyncAll:Hl,inOperator:Y.inOperator,fromIterator:Wl}});var ut=O((Xf,qi)=>{"use strict";function Gl(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,or(e,t)}o(Gl,"_inheritsLoose");function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),or(e,t)}o(or,"_setPrototypeOf");var $l=rr(),Yl=Bi(),T=je(),Jl=X(),Zl=Jl.TemplateError,Xl=Ee(),sr=Xl.Frame,Ql=be(),eu=Ql.Obj,tu={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},Di=function(e){Gl(t,e);function t(){return e.apply(this,arguments)||this}o(t,"Compiler");var n=t.prototype;return n.init=o(function(r,i){this.templateName=r,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this._scopeClosers="",this.inBlock=!1,this.throwOnUndefined=i},"init"),n.fail=o(function(r,i,a){throw i!==void 0&&(i+=1),a!==void 0&&(a+=1),new Zl(r,i,a)},"fail"),n._pushBuffer=o(function(){var r=this._tmpid();return this.bufferStack.push(this.buffer),this.buffer=r,this._emit("var "+this.buffer+' = "";'),r},"_pushBuffer"),n._popBuffer=o(function(){this.buffer=this.bufferStack.pop()},"_popBuffer"),n._emit=o(function(r){this.codebuf.push(r)},"_emit"),n._emitLine=o(function(r){this._emit(r+`
`)},"_emitLine"),n._emitLines=o(function(){for(var r=this,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];a.forEach(function(u){return r._emitLine(u)})},"_emitLines"),n._emitFuncBegin=o(function(r,i){this.buffer="output",this._scopeClosers="",this._emitLine("function "+i+"(env, context, frame, runtime, cb) {"),this._emitLine("var lineno = "+r.lineno+";"),this._emitLine("var colno = "+r.colno+";"),this._emitLine("var "+this.buffer+' = "";'),this._emitLine("try {")},"_emitFuncBegin"),n._emitFuncEnd=o(function(r){r||this._emitLine("cb(null, "+this.buffer+");"),this._closeScopeLevels(),this._emitLine("} catch (e) {"),this._emitLine("  cb(runtime.handleError(e, lineno, colno));"),this._emitLine("}"),this._emitLine("}"),this.buffer=null},"_emitFuncEnd"),n._addScopeLevel=o(function(){this._scopeClosers+="})"},"_addScopeLevel"),n._closeScopeLevels=o(function(){this._emitLine(this._scopeClosers+";"),this._scopeClosers=""},"_closeScopeLevels"),n._withScopedSyntax=o(function(r){var i=this._scopeClosers;this._scopeClosers="",r.call(this),this._closeScopeLevels(),this._scopeClosers=i},"_withScopedSyntax"),n._makeCallback=o(function(r){var i=this._tmpid();return"function("+i+(r?","+r:"")+`) {
if(`+i+") { cb("+i+"); return; }"},"_makeCallback"),n._tmpid=o(function(){return this.lastId++,"t_"+this.lastId},"_tmpid"),n._templateName=o(function(){return this.templateName==null?"undefined":JSON.stringify(this.templateName)},"_templateName"),n._compileChildren=o(function(r,i){var a=this;r.children.forEach(function(l){a.compile(l,i)})},"_compileChildren"),n._compileAggregate=o(function(r,i,a,l){var u=this;a&&this._emit(a),r.children.forEach(function(c,f){f>0&&u._emit(","),u.compile(c,i)}),l&&this._emit(l)},"_compileAggregate"),n._compileExpression=o(function(r,i){this.assertType(r,T.Literal,T.Symbol,T.Group,T.Array,T.Dict,T.FunCall,T.Caller,T.Filter,T.LookupVal,T.Compare,T.InlineIf,T.In,T.Is,T.And,T.Or,T.Not,T.Add,T.Concat,T.Sub,T.Mul,T.Div,T.FloorDiv,T.Mod,T.Pow,T.Neg,T.Pos,T.Compare,T.NodeList),this.compile(r,i)},"_compileExpression"),n.assertType=o(function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];a.some(function(u){return r instanceof u})||this.fail("assertType: invalid type: "+r.typename,r.lineno,r.colno)},"assertType"),n.compileCallExtension=o(function(r,i,a){var l=this,u=r.args,c=r.contentArgs,f=typeof r.autoescape=="boolean"?r.autoescape:!0;if(a||this._emit(this.buffer+" += runtime.suppressValue("),this._emit('env.getExtension("'+r.extName+'")["'+r.prop+'"]('),this._emit("context"),(u||c)&&this._emit(","),u&&(u instanceof T.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),u.children.forEach(function(p,d){l._compileExpression(p,i),(d!==u.children.length-1||c.length)&&l._emit(",")})),c.length&&c.forEach(function(p,d){if(d>0&&l._emit(","),p){l._emitLine("function(cb) {"),l._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var b=l._pushBuffer();l._withScopedSyntax(function(){l.compile(p,i),l._emitLine("cb(null, "+b+");")}),l._popBuffer(),l._emitLine("return "+b+";"),l._emitLine("}")}else l._emit("null")}),a){var h=this._tmpid();this._emitLine(", "+this._makeCallback(h)),this._emitLine(this.buffer+" += runtime.suppressValue("+h+", "+f+" && env.opts.autoescape);"),this._addScopeLevel()}else this._emit(")"),this._emit(", "+f+` && env.opts.autoescape);
`)},"compileCallExtension"),n.compileCallExtensionAsync=o(function(r,i){this.compileCallExtension(r,i,!0)},"compileCallExtensionAsync"),n.compileNodeList=o(function(r,i){this._compileChildren(r,i)},"compileNodeList"),n.compileLiteral=o(function(r){if(typeof r.value=="string"){var i=r.value.replace(/\\/g,"\\\\");i=i.replace(/"/g,'\\"'),i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i=i.replace(/\t/g,"\\t"),i=i.replace(/\u2028/g,"\\u2028"),this._emit('"'+i+'"')}else r.value===null?this._emit("null"):this._emit(r.value.toString())},"compileLiteral"),n.compileSymbol=o(function(r,i){var a=r.value,l=i.lookup(a);l?this._emit(l):this._emit('runtime.contextOrFrameLookup(context, frame, "'+a+'")')},"compileSymbol"),n.compileGroup=o(function(r,i){this._compileAggregate(r,i,"(",")")},"compileGroup"),n.compileArray=o(function(r,i){this._compileAggregate(r,i,"[","]")},"compileArray"),n.compileDict=o(function(r,i){this._compileAggregate(r,i,"{","}")},"compileDict"),n.compilePair=o(function(r,i){var a=r.key,l=r.value;a instanceof T.Symbol?a=new T.Literal(a.lineno,a.colno,a.value):a instanceof T.Literal&&typeof a.value=="string"||this.fail("compilePair: Dict keys must be strings or names",a.lineno,a.colno),this.compile(a,i),this._emit(": "),this._compileExpression(l,i)},"compilePair"),n.compileInlineIf=o(function(r,i){this._emit("("),this.compile(r.cond,i),this._emit("?"),this.compile(r.body,i),this._emit(":"),r.else_!==null?this.compile(r.else_,i):this._emit('""'),this._emit(")")},"compileInlineIf"),n.compileIn=o(function(r,i){this._emit("runtime.inOperator("),this.compile(r.left,i),this._emit(","),this.compile(r.right,i),this._emit(")")},"compileIn"),n.compileIs=o(function(r,i){var a=r.right.name?r.right.name.value:r.right.value;this._emit('env.getTest("'+a+'").call(context, '),this.compile(r.left,i),r.right.args&&(this._emit(","),this.compile(r.right.args,i)),this._emit(") === true")},"compileIs"),n._binOpEmitter=o(function(r,i,a){this.compile(r.left,i),this._emit(a),this.compile(r.right,i)},"_binOpEmitter"),n.compileOr=o(function(r,i){return this._binOpEmitter(r,i," || ")},"compileOr"),n.compileAnd=o(function(r,i){return this._binOpEmitter(r,i," && ")},"compileAnd"),n.compileAdd=o(function(r,i){return this._binOpEmitter(r,i," + ")},"compileAdd"),n.compileConcat=o(function(r,i){return this._binOpEmitter(r,i,' + "" + ')},"compileConcat"),n.compileSub=o(function(r,i){return this._binOpEmitter(r,i," - ")},"compileSub"),n.compileMul=o(function(r,i){return this._binOpEmitter(r,i," * ")},"compileMul"),n.compileDiv=o(function(r,i){return this._binOpEmitter(r,i," / ")},"compileDiv"),n.compileMod=o(function(r,i){return this._binOpEmitter(r,i," % ")},"compileMod"),n.compileNot=o(function(r,i){this._emit("!"),this.compile(r.target,i)},"compileNot"),n.compileFloorDiv=o(function(r,i){this._emit("Math.floor("),this.compile(r.left,i),this._emit(" / "),this.compile(r.right,i),this._emit(")")},"compileFloorDiv"),n.compilePow=o(function(r,i){this._emit("Math.pow("),this.compile(r.left,i),this._emit(", "),this.compile(r.right,i),this._emit(")")},"compilePow"),n.compileNeg=o(function(r,i){this._emit("-"),this.compile(r.target,i)},"compileNeg"),n.compilePos=o(function(r,i){this._emit("+"),this.compile(r.target,i)},"compilePos"),n.compileCompare=o(function(r,i){var a=this;this.compile(r.expr,i),r.ops.forEach(function(l){a._emit(" "+tu[l.type]+" "),a.compile(l.expr,i)})},"compileCompare"),n.compileLookupVal=o(function(r,i){this._emit("runtime.memberLookup(("),this._compileExpression(r.target,i),this._emit("),"),this._compileExpression(r.val,i),this._emit(")")},"compileLookupVal"),n._getNodeName=o(function(r){switch(r.typename){case"Symbol":return r.value;case"FunCall":return"the return value of ("+this._getNodeName(r.name)+")";case"LookupVal":return this._getNodeName(r.target)+'["'+this._getNodeName(r.val)+'"]';case"Literal":return r.value.toString();default:return"--expression--"}},"_getNodeName"),n.compileFunCall=o(function(r,i){this._emit("(lineno = "+r.lineno+", colno = "+r.colno+", "),this._emit("runtime.callWrap("),this._compileExpression(r.name,i),this._emit(', "'+this._getNodeName(r.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(r.args,i,"[","])"),this._emit(")")},"compileFunCall"),n.compileFilter=o(function(r,i){var a=r.name;this.assertType(a,T.Symbol),this._emit('env.getFilter("'+a.value+'").call(context, '),this._compileAggregate(r.args,i),this._emit(")")},"compileFilter"),n.compileFilterAsync=o(function(r,i){var a=r.name,l=r.symbol.value;this.assertType(a,T.Symbol),i.set(l,l),this._emit('env.getFilter("'+a.value+'").call(context, '),this._compileAggregate(r.args,i),this._emitLine(", "+this._makeCallback(l)),this._addScopeLevel()},"compileFilterAsync"),n.compileKeywordArgs=o(function(r,i){this._emit("runtime.makeKeywordArgs("),this.compileDict(r,i),this._emit(")")},"compileKeywordArgs"),n.compileSet=o(function(r,i){var a=this,l=[];r.targets.forEach(function(u){var c=u.value,f=i.lookup(c);f==null&&(f=a._tmpid(),a._emitLine("var "+f+";")),l.push(f)}),r.value?(this._emit(l.join(" = ")+" = "),this._compileExpression(r.value,i),this._emitLine(";")):(this._emit(l.join(" = ")+" = "),this.compile(r.body,i),this._emitLine(";")),r.targets.forEach(function(u,c){var f=l[c],h=u.value;a._emitLine('frame.set("'+h+'", '+f+", true);"),a._emitLine("if(frame.topLevel) {"),a._emitLine('context.setVariable("'+h+'", '+f+");"),a._emitLine("}"),h.charAt(0)!=="_"&&(a._emitLine("if(frame.topLevel) {"),a._emitLine('context.addExport("'+h+'", '+f+");"),a._emitLine("}"))})},"compileSet"),n.compileSwitch=o(function(r,i){var a=this;this._emit("switch ("),this.compile(r.expr,i),this._emit(") {"),r.cases.forEach(function(l,u){a._emit("case "),a.compile(l.cond,i),a._emit(": "),a.compile(l.body,i),l.body.children.length&&a._emitLine("break;")}),r.default&&(this._emit("default:"),this.compile(r.default,i)),this._emit("}")},"compileSwitch"),n.compileIf=o(function(r,i,a){var l=this;this._emit("if("),this._compileExpression(r.cond,i),this._emitLine(") {"),this._withScopedSyntax(function(){l.compile(r.body,i),a&&l._emit("cb()")}),r.else_?(this._emitLine(`}
else {`),this._withScopedSyntax(function(){l.compile(r.else_,i),a&&l._emit("cb()")})):a&&(this._emitLine(`}
else {`),this._emit("cb()")),this._emitLine("}")},"compileIf"),n.compileIfAsync=o(function(r,i){this._emit("(function(cb) {"),this.compileIf(r,i,!0),this._emit("})("+this._makeCallback()),this._addScopeLevel()},"compileIfAsync"),n._emitLoopBindings=o(function(r,i,a,l){var u=this,c=[{name:"index",val:a+" + 1"},{name:"index0",val:a},{name:"revindex",val:l+" - "+a},{name:"revindex0",val:l+" - "+a+" - 1"},{name:"first",val:a+" === 0"},{name:"last",val:a+" === "+l+" - 1"},{name:"length",val:l}];c.forEach(function(f){u._emitLine('frame.set("loop.'+f.name+'", '+f.val+");")})},"_emitLoopBindings"),n.compileFor=o(function(r,i){var a=this,l=this._tmpid(),u=this._tmpid(),c=this._tmpid();if(i=i.push(),this._emitLine("frame = frame.push();"),this._emit("var "+c+" = "),this._compileExpression(r.arr,i),this._emitLine(";"),this._emit("if("+c+") {"),this._emitLine(c+" = runtime.fromIterator("+c+");"),r.name instanceof T.Array){this._emitLine("var "+l+";"),this._emitLine("if(runtime.isArray("+c+")) {"),this._emitLine("var "+u+" = "+c+".length;"),this._emitLine("for("+l+"=0; "+l+" < "+c+".length; "+l+"++) {"),r.name.children.forEach(function(E,_){var g=a._tmpid();a._emitLine("var "+g+" = "+c+"["+l+"]["+_+"];"),a._emitLine('frame.set("'+E+'", '+c+"["+l+"]["+_+"]);"),i.set(r.name.children[_].value,g)}),this._emitLoopBindings(r,c,l,u),this._withScopedSyntax(function(){a.compile(r.body,i)}),this._emitLine("}"),this._emitLine("} else {");var f=r.name.children,h=f[0],p=f[1],d=this._tmpid(),b=this._tmpid();i.set(h.value,d),i.set(p.value,b),this._emitLine(l+" = -1;"),this._emitLine("var "+u+" = runtime.keys("+c+").length;"),this._emitLine("for(var "+d+" in "+c+") {"),this._emitLine(l+"++;"),this._emitLine("var "+b+" = "+c+"["+d+"];"),this._emitLine('frame.set("'+h.value+'", '+d+");"),this._emitLine('frame.set("'+p.value+'", '+b+");"),this._emitLoopBindings(r,c,l,u),this._withScopedSyntax(function(){a.compile(r.body,i)}),this._emitLine("}"),this._emitLine("}")}else{var x=this._tmpid();i.set(r.name.value,x),this._emitLine("var "+u+" = "+c+".length;"),this._emitLine("for(var "+l+"=0; "+l+" < "+c+".length; "+l+"++) {"),this._emitLine("var "+x+" = "+c+"["+l+"];"),this._emitLine('frame.set("'+r.name.value+'", '+x+");"),this._emitLoopBindings(r,c,l,u),this._withScopedSyntax(function(){a.compile(r.body,i)}),this._emitLine("}")}this._emitLine("}"),r.else_&&(this._emitLine("if (!"+u+") {"),this.compile(r.else_,i),this._emitLine("}")),this._emitLine("frame = frame.pop();")},"compileFor"),n._compileAsyncLoop=o(function(r,i,a){var l=this,u=this._tmpid(),c=this._tmpid(),f=this._tmpid(),h=a?"asyncAll":"asyncEach";if(i=i.push(),this._emitLine("frame = frame.push();"),this._emit("var "+f+" = runtime.fromIterator("),this._compileExpression(r.arr,i),this._emitLine(");"),r.name instanceof T.Array){var p=r.name.children.length;this._emit("runtime."+h+"("+f+", "+p+", function("),r.name.children.forEach(function(x){l._emit(x.value+",")}),this._emit(u+","+c+",next) {"),r.name.children.forEach(function(x){var E=x.value;i.set(E,E),l._emitLine('frame.set("'+E+'", '+E+");")})}else{var d=r.name.value;this._emitLine("runtime."+h+"("+f+", 1, function("+d+", "+u+", "+c+",next) {"),this._emitLine('frame.set("'+d+'", '+d+");"),i.set(d,d)}this._emitLoopBindings(r,f,u,c),this._withScopedSyntax(function(){var x;a&&(x=l._pushBuffer()),l.compile(r.body,i),l._emitLine("next("+u+(x?","+x:"")+");"),a&&l._popBuffer()});var b=this._tmpid();this._emitLine("}, "+this._makeCallback(b)),this._addScopeLevel(),a&&this._emitLine(this.buffer+" += "+b+";"),r.else_&&(this._emitLine("if (!"+f+".length) {"),this.compile(r.else_,i),this._emitLine("}")),this._emitLine("frame = frame.pop();")},"_compileAsyncLoop"),n.compileAsyncEach=o(function(r,i){this._compileAsyncLoop(r,i)},"compileAsyncEach"),n.compileAsyncAll=o(function(r,i){this._compileAsyncLoop(r,i,!0)},"compileAsyncAll"),n._compileMacro=o(function(r,i){var a=this,l=[],u=null,c="macro_"+this._tmpid(),f=i!==void 0;r.args.children.forEach(function(E,_){_===r.args.children.length-1&&E instanceof T.Dict?u=E:(a.assertType(E,T.Symbol),l.push(E))});var h=[].concat(l.map(function(E){return"l_"+E.value}),["kwargs"]),p=l.map(function(E){return'"'+E.value+'"'}),d=(u&&u.children||[]).map(function(E){return'"'+E.key.value+'"'}),b;f?b=i.push(!0):b=new sr,this._emitLines("var "+c+" = runtime.makeMacro(","["+p.join(", ")+"], ","["+d.join(", ")+"], ","function ("+h.join(", ")+") {","var callerFrame = frame;","frame = "+(f?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),l.forEach(function(E){a._emitLine('frame.set("'+E.value+'", l_'+E.value+");"),b.set(E.value,"l_"+E.value)}),u&&u.children.forEach(function(E){var _=E.key.value;a._emit('frame.set("'+_+'", '),a._emit('Object.prototype.hasOwnProperty.call(kwargs, "'+_+'")'),a._emit(' ? kwargs["'+_+'"] : '),a._compileExpression(E.value,b),a._emit(");")});var x=this._pushBuffer();return this._withScopedSyntax(function(){a.compile(r.body,b)}),this._emitLine("frame = "+(f?"frame.pop();":"callerFrame;")),this._emitLine("return new runtime.SafeString("+x+");"),this._emitLine("});"),this._popBuffer(),c},"_compileMacro"),n.compileMacro=o(function(r,i){var a=this._compileMacro(r),l=r.name.value;i.set(l,a),i.parent?this._emitLine('frame.set("'+l+'", '+a+");"):(r.name.value.charAt(0)!=="_"&&this._emitLine('context.addExport("'+l+'");'),this._emitLine('context.setVariable("'+l+'", '+a+");"))},"compileMacro"),n.compileCaller=o(function(r,i){this._emit("(function (){");var a=this._compileMacro(r,i);this._emit("return "+a+";})()")},"compileCaller"),n._compileGetTemplate=o(function(r,i,a,l){var u=this._tmpid(),c=this._templateName(),f=this._makeCallback(u),h=a?"true":"false",p=l?"true":"false";return this._emit("env.getTemplate("),this._compileExpression(r.template,i),this._emitLine(", "+h+", "+c+", "+p+", "+f),u},"_compileGetTemplate"),n.compileImport=o(function(r,i){var a=r.target.value,l=this._compileGetTemplate(r,i,!1,!1);this._addScopeLevel(),this._emitLine(l+".getExported("+(r.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(l)),this._addScopeLevel(),i.set(a,l),i.parent?this._emitLine('frame.set("'+a+'", '+l+");"):this._emitLine('context.setVariable("'+a+'", '+l+");")},"compileImport"),n.compileFromImport=o(function(r,i){var a=this,l=this._compileGetTemplate(r,i,!1,!1);this._addScopeLevel(),this._emitLine(l+".getExported("+(r.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(l)),this._addScopeLevel(),r.names.children.forEach(function(u){var c,f,h=a._tmpid();u instanceof T.Pair?(c=u.key.value,f=u.value.value):(c=u.value,f=c),a._emitLine("if(Object.prototype.hasOwnProperty.call("+l+', "'+c+'")) {'),a._emitLine("var "+h+" = "+l+"."+c+";"),a._emitLine("} else {"),a._emitLine(`cb(new Error("cannot import '`+c+`'")); return;`),a._emitLine("}"),i.set(f,h),i.parent?a._emitLine('frame.set("'+f+'", '+h+");"):a._emitLine('context.setVariable("'+f+'", '+h+");")})},"compileFromImport"),n.compileBlock=o(function(r){var i=this._tmpid();this.inBlock||this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this._emit('context.getBlock("'+r.name.value+'")'),this.inBlock||this._emit(")"),this._emitLine("(env, context, frame, runtime, "+this._makeCallback(i)),this._emitLine(this.buffer+" += "+i+";"),this._addScopeLevel()},"compileBlock"),n.compileSuper=o(function(r,i){var a=r.blockName.value,l=r.symbol.value,u=this._makeCallback(l);this._emitLine('context.getSuper(env, "'+a+'", b_'+a+", frame, runtime, "+u),this._emitLine(l+" = runtime.markSafe("+l+");"),this._addScopeLevel(),i.set(l,l)},"compileSuper"),n.compileExtends=o(function(r,i){var a=this._tmpid(),l=this._compileGetTemplate(r,i,!0,!1);this._emitLine("parentTemplate = "+l),this._emitLine("for(var "+a+" in parentTemplate.blocks) {"),this._emitLine("context.addBlock("+a+", parentTemplate.blocks["+a+"]);"),this._emitLine("}"),this._addScopeLevel()},"compileExtends"),n.compileInclude=o(function(r,i){this._emitLine("var tasks = [];"),this._emitLine("tasks.push("),this._emitLine("function(callback) {");var a=this._compileGetTemplate(r,i,!1,r.ignoreMissing);this._emitLine("callback(null,"+a+");});"),this._emitLine("});");var l=this._tmpid();this._emitLine("tasks.push("),this._emitLine("function(template, callback){"),this._emitLine("template.render(context.getVariables(), frame, "+this._makeCallback(l)),this._emitLine("callback(null,"+l+");});"),this._emitLine("});"),this._emitLine("tasks.push("),this._emitLine("function(result, callback){"),this._emitLine(this.buffer+" += result;"),this._emitLine("callback(null);"),this._emitLine("});"),this._emitLine("env.waterfall(tasks, function(){"),this._addScopeLevel()},"compileInclude"),n.compileTemplateData=o(function(r,i){this.compileLiteral(r,i)},"compileTemplateData"),n.compileCapture=o(function(r,i){var a=this,l=this.buffer;this.buffer="output",this._emitLine("(function() {"),this._emitLine('var output = "";'),this._withScopedSyntax(function(){a.compile(r.body,i)}),this._emitLine("return output;"),this._emitLine("})()"),this.buffer=l},"compileCapture"),n.compileOutput=o(function(r,i){var a=this,l=r.children;l.forEach(function(u){u instanceof T.TemplateData?u.value&&(a._emit(a.buffer+" += "),a.compileLiteral(u,i),a._emitLine(";")):(a._emit(a.buffer+" += runtime.suppressValue("),a.throwOnUndefined&&a._emit("runtime.ensureDefined("),a.compile(u,i),a.throwOnUndefined&&a._emit(","+r.lineno+","+r.colno+")"),a._emit(`, env.opts.autoescape);
`))})},"compileOutput"),n.compileRoot=o(function(r,i){var a=this;i&&this.fail("compileRoot: root node can't have frame"),i=new sr,this._emitFuncBegin(r,"root"),this._emitLine("var parentTemplate = null;"),this._compileChildren(r,i),this._emitLine("if(parentTemplate) {"),this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this._emitLine("} else {"),this._emitLine("cb(null, "+this.buffer+");"),this._emitLine("}"),this._emitFuncEnd(!0),this.inBlock=!0;var l=[],u=r.findAll(T.Block);u.forEach(function(c,f){var h=c.name.value;if(l.indexOf(h)!==-1)throw new Error('Block "'+h+'" defined more than once.');l.push(h),a._emitFuncBegin(c,"b_"+h);var p=new sr;a._emitLine("var frame = frame.push(true);"),a.compile(c.body,p),a._emitFuncEnd()}),this._emitLine("return {"),u.forEach(function(c,f){var h="b_"+c.name.value;a._emitLine(h+": "+h+",")}),this._emitLine(`root: root
};`)},"compileRoot"),n.compile=o(function(r,i){var a=this["compile"+r.typename];a?a.call(this,r,i):this.fail("compile: Cannot compile node: "+r.typename,r.lineno,r.colno)},"compile"),n.getCode=o(function(){return this.codebuf.join("")},"getCode"),t}(eu);qi.exports={compile:o(function(t,n,s,r,i){i===void 0&&(i={});var a=new Di(r,i.throwOnUndefined),l=(s||[]).map(function(c){return c.preprocess}).filter(function(c){return!!c}),u=l.reduce(function(c,f){return f(c)},t);return a.compile(Yl.transform($l.parse(u,s,i),n,r)),a.getCode()},"compile"),Compiler:Di}});var Gi=O((eh,Wi)=>{"use strict";var C=X(),M=Ee(),k=Wi.exports={};function ne(e,t){return e==null||e===!1?t:e}o(ne,"normalize");k.abs=Math.abs;function ar(e){return e!==e}o(ar,"isNaN");function ru(e,t,n){var s,r=[],i=[];for(s=0;s<e.length;s++)s%t===0&&i.length&&(r.push(i),i=[]),i.push(e[s]);if(i.length){if(n)for(s=i.length;s<t;s++)i.push(n);r.push(i)}return r}o(ru,"batch");k.batch=ru;function Ui(e){e=ne(e,"");var t=e.toLowerCase();return M.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))}o(Ui,"capitalize");k.capitalize=Ui;function nu(e,t){if(e=ne(e,""),t=t||80,e.length>=t)return e;var n=t-e.length,s=C.repeat(" ",n/2-n%2),r=C.repeat(" ",n/2);return M.copySafeness(e,s+e+r)}o(nu,"center");k.center=nu;function iu(e,t,n){return n?e||t:e!==void 0?e:t}o(iu,"default_");k.default=iu;function su(e,t,n){if(!C.isObject(e))throw new C.TemplateError("dictsort filter: val must be an object");var s=[];for(var r in e)s.push([r,e[r]]);var i;if(n===void 0||n==="key")i=0;else if(n==="value")i=1;else throw new C.TemplateError("dictsort filter: You can only sort by either key or value");return s.sort(function(a,l){var u=a[i],c=l[i];return t||(C.isString(u)&&(u=u.toUpperCase()),C.isString(c)&&(c=c.toUpperCase())),u>c?1:u===c?0:-1}),s}o(su,"dictsort");k.dictsort=su;function ou(e,t){return JSON.stringify(e,null,t)}o(ou,"dump");k.dump=ou;function au(e){return e instanceof M.SafeString?e:(e=e??"",M.markSafe(C.escape(e.toString())))}o(au,"escape");k.escape=au;function lu(e){return e instanceof M.SafeString?e:(e=e??"",M.markSafe(e.toString()))}o(lu,"safe");k.safe=lu;function uu(e){return e[0]}o(uu,"first");k.first=uu;function cu(e){return e=e??"",M.markSafe(C.escape(e.toString()))}o(cu,"forceescape");k.forceescape=cu;function fu(e,t){return C.groupBy(e,t,this.env.opts.throwOnUndefined)}o(fu,"groupby");k.groupby=fu;function hu(e,t,n){if(e=ne(e,""),e==="")return"";t=t||4;var s=e.split(`
`),r=C.repeat(" ",t),i=s.map(function(a,l){return l===0&&!n?a:""+r+a}).join(`
`);return M.copySafeness(e,i)}o(hu,"indent");k.indent=hu;function pu(e,t,n){return t=t||"",n&&(e=C.map(e,function(s){return s[n]})),e.join(t)}o(pu,"join");k.join=pu;function du(e){return e[e.length-1]}o(du,"last");k.last=du;function mu(e){var t=ne(e,"");return t!==void 0?typeof Map=="function"&&t instanceof Map||typeof Set=="function"&&t instanceof Set?t.size:C.isObject(t)&&!(t instanceof M.SafeString)?C.keys(t).length:t.length:0}o(mu,"lengthFilter");k.length=mu;function Vi(e){if(C.isString(e))return e.split("");if(C.isObject(e))return C._entries(e||{}).map(function(t){var n=t[0],s=t[1];return{key:n,value:s}});if(C.isArray(e))return e;throw new C.TemplateError("list filter: type not iterable")}o(Vi,"list");k.list=Vi;function vu(e){return e=ne(e,""),e.toLowerCase()}o(vu,"lower");k.lower=vu;function gu(e){return e==null?"":M.copySafeness(e,e.replace(/\r\n|\n/g,`<br />
`))}o(gu,"nl2br");k.nl2br=gu;function yu(e){return e[Math.floor(Math.random()*e.length)]}o(yu,"random");k.random=yu;function zi(e){function t(n,s,r){s===void 0&&(s="truthy");var i=this,a=i.env.getTest(s);return C.toArray(n).filter(o(function(u){return a.call(i,u,r)===e},"examineTestResult"))}return o(t,"filter"),t}o(zi,"getSelectOrReject");k.reject=zi(!1);function _u(e,t){return e.filter(function(n){return!n[t]})}o(_u,"rejectattr");k.rejectattr=_u;k.select=zi(!0);function bu(e,t){return e.filter(function(n){return!!n[t]})}o(bu,"selectattr");k.selectattr=bu;function wu(e,t,n,s){var r=e;if(t instanceof RegExp)return e.replace(t,n);typeof s>"u"&&(s=-1);var i="";if(typeof t=="number")t=""+t;else if(typeof t!="string")return e;if(typeof e=="number"&&(e=""+e),typeof e!="string"&&!(e instanceof M.SafeString))return e;if(t==="")return i=n+e.split("").join(n)+n,M.copySafeness(e,i);var a=e.indexOf(t);if(s===0||a===-1)return e;for(var l=0,u=0;a>-1&&(s===-1||u<s);)i+=e.substring(l,a)+n,l=a+t.length,u++,a=e.indexOf(t,l);return l<e.length&&(i+=e.substring(l)),M.copySafeness(r,i)}o(wu,"replace");k.replace=wu;function Eu(e){var t;return C.isString(e)?t=Vi(e):t=C.map(e,function(n){return n}),t.reverse(),C.isString(e)?M.copySafeness(e,t.join("")):t}o(Eu,"reverse");k.reverse=Eu;function xu(e,t,n){t=t||0;var s=Math.pow(10,t),r;return n==="ceil"?r=Math.ceil:n==="floor"?r=Math.floor:r=Math.round,r(e*s)/s}o(xu,"round");k.round=xu;function ku(e,t,n){for(var s=Math.floor(e.length/t),r=e.length%t,i=[],a=0,l=0;l<t;l++){var u=a+l*s;l<r&&a++;var c=a+(l+1)*s,f=e.slice(u,c);n&&l>=r&&f.push(n),i.push(f)}return i}o(ku,"slice");k.slice=ku;function Su(e,t,n){return n===void 0&&(n=0),t&&(e=C.map(e,function(s){return s[t]})),n+e.reduce(function(s,r){return s+r},0)}o(Su,"sum");k.sum=Su;k.sort=M.makeMacro(["value","reverse","case_sensitive","attribute"],[],o(function(t,n,s,r){var i=this,a=C.map(t,function(u){return u}),l=C.getAttrGetter(r);return a.sort(function(u,c){var f=r?l(u):u,h=r?l(c):c;if(i.env.opts.throwOnUndefined&&r&&(f===void 0||h===void 0))throw new TypeError('sort: attribute "'+r+'" resolved to undefined');return!s&&C.isString(f)&&C.isString(h)&&(f=f.toLowerCase(),h=h.toLowerCase()),f<h?n?1:-1:f>h?n?-1:1:0}),a},"sortFilter"));function Ou(e){return M.copySafeness(e,e)}o(Ou,"string");k.string=Ou;function Tu(e,t){e=ne(e,"");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,s=Hi(e.replace(n,"")),r="";return t?r=s.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,`
`).replace(/\n\n\n+/g,`

`):r=s.replace(/\s+/gi," "),M.copySafeness(e,r)}o(Tu,"striptags");k.striptags=Tu;function Lu(e){e=ne(e,"");var t=e.split(" ").map(function(n){return Ui(n)});return M.copySafeness(e,t.join(" "))}o(Lu,"title");k.title=Lu;function Hi(e){return M.copySafeness(e,e.replace(/^\s*|\s*$/g,""))}o(Hi,"trim");k.trim=Hi;function Au(e,t,n,s){var r=e;if(e=ne(e,""),t=t||255,e.length<=t)return e;if(n)e=e.substring(0,t);else{var i=e.lastIndexOf(" ",t);i===-1&&(i=t),e=e.substring(0,i)}return e+=s??"...",M.copySafeness(r,e)}o(Au,"truncate");k.truncate=Au;function Cu(e){return e=ne(e,""),e.toUpperCase()}o(Cu,"upper");k.upper=Cu;function Nu(e){var t=encodeURIComponent;if(C.isString(e))return t(e);var n=C.isArray(e)?e:C._entries(e);return n.map(function(s){var r=s[0],i=s[1];return t(r)+"="+t(i)}).join("&")}o(Nu,"urlencode");k.urlencode=Nu;var Fu=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,Pu=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,Ru=/^https?:\/\/.*$/,Bu=/^www\./,ju=/\.(?:org|net|com)(?:\:|\/|$)/;function Iu(e,t,n){ar(t)&&(t=1/0);var s=n===!0?' rel="nofollow"':"",r=e.split(/(\s+)/).filter(function(i){return i&&i.length}).map(function(i){var a=i.match(Fu),l=a?a[1]:i,u=l.substr(0,t);return Ru.test(l)?'<a href="'+l+'"'+s+">"+u+"</a>":Bu.test(l)?'<a href="http://'+l+'"'+s+">"+u+"</a>":Pu.test(l)?'<a href="mailto:'+l+'">'+l+"</a>":ju.test(l)?'<a href="http://'+l+'"'+s+">"+u+"</a>":i});return r.join("")}o(Iu,"urlize");k.urlize=Iu;function Ku(e){e=ne(e,"");var t=e?e.match(/\w+/g):null;return t?t.length:null}o(Ku,"wordcount");k.wordcount=Ku;function Mu(e,t){var n=parseFloat(e);return ar(n)?t:n}o(Mu,"float");k.float=Mu;var Du=M.makeMacro(["value","default","base"],[],o(function(t,n,s){s===void 0&&(s=10);var r=parseInt(t,s);return ar(r)?n:r},"doInt"));k.int=Du;k.d=k.default;k.e=k.escape});var ct=O((rh,Yi)=>{"use strict";function qu(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lr(e,t)}o(qu,"_inheritsLoose");function lr(e,t){return lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),lr(e,t)}o(lr,"_setPrototypeOf");var $i=ge(),Uu=be(),Vu=Uu.EmitterObj;Yi.exports=function(e){qu(t,e);function t(){return e.apply(this,arguments)||this}o(t,"Loader");var n=t.prototype;return n.resolve=o(function(r,i){return $i.resolve($i.dirname(r),i)},"resolve"),n.isRelative=o(function(r){return r.indexOf("./")===0||r.indexOf("../")===0},"isRelative"),t}(Vu)});var Zi=O((ih,Ji)=>{"use strict";function zu(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ur(e,t)}o(zu,"_inheritsLoose");function ur(e,t){return ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),ur(e,t)}o(ur,"_setPrototypeOf");var Hu=ct(),Wu=function(e){zu(t,e);function t(s){var r;return r=e.call(this)||this,r.precompiled=s||{},r}o(t,"PrecompiledLoader");var n=t.prototype;return n.getSource=o(function(r){return this.precompiled[r]?{src:{type:"code",obj:this.precompiled[r]},path:r}:null},"getSource"),t}(Hu);Ji.exports={PrecompiledLoader:Wu}});var ts=O((oh,es)=>{"use strict";function Xi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cr(e,t)}o(Xi,"_inheritsLoose");function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),cr(e,t)}o(cr,"_setPrototypeOf");var ht=(Qe(),Et(Xe)),ft=ge(),Qi=ct(),Gu=Zi(),$u=Gu.PrecompiledLoader,pt,Yu=function(e){Xi(t,e);function t(s,r){var i;if(i=e.call(this)||this,typeof r=="boolean"&&console.log("[nunjucks] Warning: you passed a boolean as the second argument to FileSystemLoader, but it now takes an options object. See http://mozilla.github.io/nunjucks/api.html#filesystemloader"),r=r||{},i.pathsToNames={},i.noCache=!!r.noCache,s?(s=Array.isArray(s)?s:[s],i.searchPaths=s.map(ft.normalize)):i.searchPaths=["."],r.watch){try{pt=he("chokidar")}catch{throw new Error("watch requires chokidar to be installed")}var a=i.searchPaths.filter(ht.existsSync),l=pt.watch(a);l.on("all",function(u,c){c=ft.resolve(c),u==="change"&&c in i.pathsToNames&&i.emit("update",i.pathsToNames[c],c)}),l.on("error",function(u){console.log("Watcher error: "+u)})}return i}o(t,"FileSystemLoader");var n=t.prototype;return n.getSource=o(function(r){for(var i=null,a=this.searchPaths,l=0;l<a.length;l++){var u=ft.resolve(a[l]),c=ft.resolve(a[l],r);if(c.indexOf(u)===0&&ht.existsSync(c)){i=c;break}}if(!i)return null;this.pathsToNames[i]=r;var f={src:ht.readFileSync(i,"utf-8"),path:i,noCache:this.noCache};return this.emit("load",r,f),f},"getSource"),t}(Qi),Ju=function(e){Xi(t,e);function t(s){var r;if(r=e.call(this)||this,s=s||{},r.pathsToNames={},r.noCache=!!s.noCache,s.watch){try{pt=he("chokidar")}catch{throw new Error("watch requires chokidar to be installed")}r.watcher=pt.watch(),r.watcher.on("change",function(i){r.emit("update",r.pathsToNames[i],i)}),r.watcher.on("error",function(i){console.log("Watcher error: "+i)}),r.on("load",function(i,a){r.watcher.add(a.path)})}return r}o(t,"NodeResolveLoader");var n=t.prototype;return n.getSource=o(function(r){if(/^\.?\.?(\/|\\)/.test(r)||/^[A-Z]:/.test(r))return null;var i;try{i=he.resolve(r)}catch{return null}this.pathsToNames[i]=r;var a={src:ht.readFileSync(i,"utf-8"),path:i,noCache:this.noCache};return this.emit("load",r,a),a},"getSource"),t}(Qi);es.exports={FileSystemLoader:Yu,PrecompiledLoader:$u,NodeResolveLoader:Ju}});var fr=O((lh,rs)=>{"use strict";rs.exports=ts()});var ns=O(N=>{"use strict";var Zu=Ee().SafeString;function Xu(e){return typeof e=="function"}o(Xu,"callable");N.callable=Xu;function Qu(e){return e!==void 0}o(Qu,"defined");N.defined=Qu;function ec(e,t){return e%t===0}o(ec,"divisibleby");N.divisibleby=ec;function tc(e){return e instanceof Zu}o(tc,"escaped");N.escaped=tc;function rc(e,t){return e===t}o(rc,"equalto");N.equalto=rc;N.eq=N.equalto;N.sameas=N.equalto;function nc(e){return e%2===0}o(nc,"even");N.even=nc;function ic(e){return!e}o(ic,"falsy");N.falsy=ic;function sc(e,t){return e>=t}o(sc,"ge");N.ge=sc;function oc(e,t){return e>t}o(oc,"greaterthan");N.greaterthan=oc;N.gt=N.greaterthan;function ac(e,t){return e<=t}o(ac,"le");N.le=ac;function lc(e,t){return e<t}o(lc,"lessthan");N.lessthan=lc;N.lt=N.lessthan;function uc(e){return e.toLowerCase()===e}o(uc,"lower");N.lower=uc;function cc(e,t){return e!==t}o(cc,"ne");N.ne=cc;function fc(e){return e===null}o(fc,"nullTest");N.null=fc;function hc(e){return typeof e=="number"}o(hc,"number");N.number=hc;function pc(e){return e%2===1}o(pc,"odd");N.odd=pc;function dc(e){return typeof e=="string"}o(dc,"string");N.string=dc;function mc(e){return!!e}o(mc,"truthy");N.truthy=mc;function vc(e){return e===void 0}o(vc,"undefinedTest");N.undefined=vc;function gc(e){return e.toUpperCase()===e}o(gc,"upper");N.upper=gc;function yc(e){return typeof Symbol<"u"?!!e[Symbol.iterator]:Array.isArray(e)||typeof e=="string"}o(yc,"iterable");N.iterable=yc;function _c(e){var t=e!=null&&typeof e=="object"&&!Array.isArray(e);return Set?t&&!(e instanceof Set):t}o(_c,"mapping");N.mapping=_c});var ss=O((fh,is)=>{"use strict";function bc(e){var t=-1;return{current:null,reset:o(function(){t=-1,this.current=null},"reset"),next:o(function(){return t++,t>=e.length&&(t=0),this.current=e[t],this.current},"next")}}o(bc,"_cycler");function wc(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}o(wc,"_joiner");function Ec(){return{range:o(function(t,n,s){typeof n>"u"?(n=t,t=0,s=1):s||(s=1);var r=[];if(s>0)for(var i=t;i<n;i+=s)r.push(i);else for(var a=t;a>n;a+=s)r.push(a);return r},"range"),cycler:o(function(){return bc(Array.prototype.slice.call(arguments))},"cycler"),joiner:o(function(t){return wc(t)},"joiner")}}o(Ec,"globals");is.exports=Ec});var as=O((ph,os)=>{"use strict";var xc=ge();os.exports=o(function(t,n){function s(r,i){if(this.name=r,this.path=r,this.defaultEngine=i.defaultEngine,this.ext=xc.extname(r),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=(this.defaultEngine[0]!=="."?".":"")+this.defaultEngine)}return o(s,"NunjucksView"),s.prototype.render=o(function(i,a){t.render(this.name,i,a)},"render"),n.set("view",s),n.set("nunjucksEnv",t),t},"express")});var gr=O((mh,ds)=>{"use strict";function dr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,hr(e,t)}o(dr,"_inheritsLoose");function hr(e,t){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(s,r){return s.__proto__=r,s},"_setPrototypeOf"),hr(e,t)}o(hr,"_setPrototypeOf");var kc=An(),Sc=Nn(),U=X(),Oc=ut(),Tc=Gi(),mr=fr(),ls=mr.FileSystemLoader,us=mr.WebLoader,Lc=mr.PrecompiledLoader,Ac=ns(),Cc=ss(),hs=be(),ps=hs.Obj,Nc=hs.EmitterObj,dt=Ee(),Fc=dt.handleError,cs=dt.Frame,Pc=as();function pr(e,t,n){kc(function(){e(t,n)})}o(pr,"callbackAsap");var Rc={type:"code",obj:{root:o(function(t,n,s,r,i){try{i(null,"")}catch(a){i(Fc(a,null,null))}},"root")}},vr=function(e){dr(t,e);function t(){return e.apply(this,arguments)||this}o(t,"Environment");var n=t.prototype;return n.init=o(function(r,i){var a=this;i=this.opts=i||{},this.opts.dev=!!i.dev,this.opts.autoescape=i.autoescape!=null?i.autoescape:!0,this.opts.throwOnUndefined=!!i.throwOnUndefined,this.opts.trimBlocks=!!i.trimBlocks,this.opts.lstripBlocks=!!i.lstripBlocks,this.loaders=[],r?this.loaders=U.isArray(r)?r:[r]:ls?this.loaders=[new ls("views")]:us&&(this.loaders=[new us("/views")]),typeof window<"u"&&window.nunjucksPrecompiled&&this.loaders.unshift(new Lc(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=Cc(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],U._entries(Tc).forEach(function(l){var u=l[0],c=l[1];return a.addFilter(u,c)}),U._entries(Ac).forEach(function(l){var u=l[0],c=l[1];return a.addTest(u,c)})},"init"),n._initLoaders=o(function(){var r=this;this.loaders.forEach(function(i){i.cache={},typeof i.on=="function"&&(i.on("update",function(a,l){i.cache[a]=null,r.emit("update",a,l,i)}),i.on("load",function(a,l){r.emit("load",a,l,i)}))})},"_initLoaders"),n.invalidateCache=o(function(){this.loaders.forEach(function(r){r.cache={}})},"invalidateCache"),n.addExtension=o(function(r,i){return i.__name=r,this.extensions[r]=i,this.extensionsList.push(i),this},"addExtension"),n.removeExtension=o(function(r){var i=this.getExtension(r);i&&(this.extensionsList=U.without(this.extensionsList,i),delete this.extensions[r])},"removeExtension"),n.getExtension=o(function(r){return this.extensions[r]},"getExtension"),n.hasExtension=o(function(r){return!!this.extensions[r]},"hasExtension"),n.addGlobal=o(function(r,i){return this.globals[r]=i,this},"addGlobal"),n.getGlobal=o(function(r){if(typeof this.globals[r]>"u")throw new Error("global not found: "+r);return this.globals[r]},"getGlobal"),n.addFilter=o(function(r,i,a){var l=i;return a&&this.asyncFilters.push(r),this.filters[r]=l,this},"addFilter"),n.getFilter=o(function(r){if(!this.filters[r])throw new Error("filter not found: "+r);return this.filters[r]},"getFilter"),n.addTest=o(function(r,i){return this.tests[r]=i,this},"addTest"),n.getTest=o(function(r){if(!this.tests[r])throw new Error("test not found: "+r);return this.tests[r]},"getTest"),n.resolveTemplate=o(function(r,i,a){var l=r.isRelative&&i?r.isRelative(a):!1;return l&&r.resolve?r.resolve(i,a):a},"resolveTemplate"),n.getTemplate=o(function(r,i,a,l,u){var c=this,f=this,h=null;if(r&&r.raw&&(r=r.raw),U.isFunction(a)&&(u=a,a=null,i=i||!1),U.isFunction(i)&&(u=i,i=!1),r instanceof Ke)h=r;else{if(typeof r!="string")throw new Error("template names must be a string: "+r);for(var p=0;p<this.loaders.length;p++){var d=this.loaders[p];if(h=d.cache[this.resolveTemplate(d,a,r)],h)break}}if(h)if(i&&h.compile(),u){u(null,h);return}else return h;var b,x=o(function(_,g){if(!g&&!_&&!l&&(_=new Error("template not found: "+r)),_)if(u){u(_);return}else throw _;var m;g?(m=new Ke(g.src,c,g.path,i),g.noCache||(g.loader.cache[r]=m)):m=new Ke(Rc,c,"",i),u?u(null,m):b=m},"createTemplate");return U.asyncIter(this.loaders,function(E,_,g,m){function v(B,A){B?m(B):A?(A.loader=E,m(null,A)):g()}o(v,"handle"),r=f.resolveTemplate(E,a,r),E.async?E.getSource(r,v):v(null,E.getSource(r))},x),b},"getTemplate"),n.express=o(function(r){return Pc(this,r)},"express"),n.render=o(function(r,i,a){U.isFunction(i)&&(a=i,i=null);var l=null;return this.getTemplate(r,function(u,c){if(u&&a)pr(a,u);else{if(u)throw u;l=c.render(i,a)}}),l},"render"),n.renderString=o(function(r,i,a,l){U.isFunction(a)&&(l=a,a={}),a=a||{};var u=new Ke(r,this,a.path);return u.render(i,l)},"renderString"),n.waterfall=o(function(r,i,a){return Sc(r,i,a)},"waterfall"),t}(Nc),fs=function(e){dr(t,e);function t(){return e.apply(this,arguments)||this}o(t,"Context");var n=t.prototype;return n.init=o(function(r,i,a){var l=this;this.env=a||new vr,this.ctx=U.extend({},r),this.blocks={},this.exported=[],U.keys(i).forEach(function(u){l.addBlock(u,i[u])})},"init"),n.lookup=o(function(r){return r in this.env.globals&&!(r in this.ctx)?this.env.globals[r]:this.ctx[r]},"lookup"),n.setVariable=o(function(r,i){this.ctx[r]=i},"setVariable"),n.getVariables=o(function(){return this.ctx},"getVariables"),n.addBlock=o(function(r,i){return this.blocks[r]=this.blocks[r]||[],this.blocks[r].push(i),this},"addBlock"),n.getBlock=o(function(r){if(!this.blocks[r])throw new Error('unknown block "'+r+'"');return this.blocks[r][0]},"getBlock"),n.getSuper=o(function(r,i,a,l,u,c){var f=U.indexOf(this.blocks[i]||[],a),h=this.blocks[i][f+1],p=this;if(f===-1||!h)throw new Error('no super block available for "'+i+'"');h(r,p,l,u,c)},"getSuper"),n.addExport=o(function(r){this.exported.push(r)},"addExport"),n.getExported=o(function(){var r=this,i={};return this.exported.forEach(function(a){i[a]=r.ctx[a]}),i},"getExported"),t}(ps),Ke=function(e){dr(t,e);function t(){return e.apply(this,arguments)||this}o(t,"Template");var n=t.prototype;return n.init=o(function(r,i,a,l){if(this.env=i||new vr,U.isObject(r))switch(r.type){case"code":this.tmplProps=r.obj;break;case"string":this.tmplStr=r.obj;break;default:throw new Error("Unexpected template object type "+r.type+"; expected 'code', or 'string'")}else if(U.isString(r))this.tmplStr=r;else throw new Error("src must be a string or an object describing the source");if(this.path=a,l)try{this._compile()}catch(u){throw U._prettifyError(this.path,this.env.opts.dev,u)}else this.compiled=!1},"init"),n.render=o(function(r,i,a){var l=this;typeof r=="function"?(a=r,r={}):typeof i=="function"&&(a=i,i=null);var u=!i;try{this.compile()}catch(b){var c=U._prettifyError(this.path,this.env.opts.dev,b);if(a)return pr(a,c);throw c}var f=new fs(r||{},this.blocks,this.env),h=i?i.push(!0):new cs;h.topLevel=!0;var p=null,d=!1;return this.rootRenderFunc(this.env,f,h,dt,function(b,x){if(!(d&&a&&typeof x<"u"))if(b&&(b=U._prettifyError(l.path,l.env.opts.dev,b),d=!0),a)u?pr(a,b,x):a(b,x);else{if(b)throw b;p=x}}),p},"render"),n.getExported=o(function(r,i,a){typeof r=="function"&&(a=r,r={}),typeof i=="function"&&(a=i,i=null);try{this.compile()}catch(c){if(a)return a(c);throw c}var l=i?i.push():new cs;l.topLevel=!0;var u=new fs(r||{},this.blocks,this.env);this.rootRenderFunc(this.env,u,l,dt,function(c){c?a(c,null):a(null,u.getExported())})},"getExported"),n.compile=o(function(){this.compiled||this._compile()},"compile"),n._compile=o(function(){var r;if(this.tmplProps)r=this.tmplProps;else{var i=Oc.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),a=new Function(i);r=a()}this.blocks=this._getBlocks(r),this.rootRenderFunc=r.root,this.compiled=!0},"_compile"),n._getBlocks=o(function(r){var i={};return U.keys(r).forEach(function(a){a.slice(0,2)==="b_"&&(i[a.slice(2)]=r[a])}),i},"_getBlocks"),t}(ps);ds.exports={Environment:vr,Template:Ke}});var vs=O((gh,ms)=>{"use strict";function Bc(e,t){var n="";t=t||{};for(var s=0;s<e.length;s++){var r=JSON.stringify(e[s].name),i=e[s].template;n+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+r+`] = (function() {
`+i+`
})();
`,t.asFunction&&(n+="return function(ctx, cb) { return nunjucks.render("+r+`, ctx, cb); }
`),n+=`})();
`}return n}o(Bc,"precompileGlobal");ms.exports=Bc});var ws=O((_h,bs)=>{"use strict";var xe=(Qe(),Et(Xe)),yr=ge(),jc=X(),Ic=jc._prettifyError,Kc=ut(),Mc=gr(),br=Mc.Environment,ys=vs();function gs(e,t){return Array.isArray(t)?t.some(function(n){return e.match(n)}):!1}o(gs,"match");function _s(e,t){t=t||{},t.isString=!0;var n=t.env||new br([]),s=t.wrapper||ys;if(!t.name)throw new Error('the "name" option is required when compiling a string');return s([_r(e,t.name,n)],t)}o(_s,"precompileString");function Dc(e,t){t=t||{};var n=t.env||new br([]),s=t.wrapper||ys;if(t.isString)return _s(e,t);var r=xe.existsSync(e)&&xe.statSync(e),i=[],a=[];function l(f){xe.readdirSync(f).forEach(function(h){var p=yr.join(f,h),d=p.substr(yr.join(e,"/").length),b=xe.statSync(p);b&&b.isDirectory()?(d+="/",gs(d,t.exclude)||l(p)):gs(d,t.include)&&a.push(p)})}if(o(l,"addTemplates"),r.isFile())i.push(_r(xe.readFileSync(e,"utf-8"),t.name||e,n));else if(r.isDirectory()){l(e);for(var u=0;u<a.length;u++){var c=a[u].replace(yr.join(e,"/"),"");try{i.push(_r(xe.readFileSync(a[u],"utf-8"),c,n))}catch(f){if(t.force)console.error(f);else throw f}}}return s(i,t)}o(Dc,"precompile");function _r(e,t,n){n=n||new br([]);var s=n.asyncFilters,r=n.extensionsList,i;t=t.replace(/\\/g,"/");try{i=Kc.compile(e,s,r,t,n.opts)}catch(a){throw Ic(t,!1,a)}return{name:t,template:i}}o(_r,"_precompile");bs.exports={precompile:Dc,precompileString:_s}});var xs=O((wh,Es)=>{"use strict";function qc(){"use strict";var e=this.runtime,t=this.lib,n=this.compiler.Compiler,s=this.parser.Parser,r=this.nodes,i=this.lexer,a=e.contextOrFrameLookup,l=e.memberLookup,u,c;n&&(u=n.prototype.assertType),s&&(c=s.prototype.parseAggregate);function f(){e.contextOrFrameLookup=a,e.memberLookup=l,n&&(n.prototype.assertType=u),s&&(s.prototype.parseAggregate=c)}o(f,"uninstall"),e.contextOrFrameLookup=o(function(g,m,v){var B=a.apply(this,arguments);if(B!==void 0)return B;switch(v){case"True":return!0;case"False":return!1;case"None":return null;default:return}},"contextOrFrameLookup");function h(_){return{index:_.index,lineno:_.lineno,colno:_.colno}}if(o(h,"getTokensState"),process.env.BUILD_TYPE!=="SLIM"&&r&&n&&s){var p=r.Node.extend("Slice",{fields:["start","stop","step"],init:o(function(g,m,v,B,A){v=v||new r.Literal(g,m,null),B=B||new r.Literal(g,m,null),A=A||new r.Literal(g,m,1),this.parent(g,m,v,B,A)},"init")});n.prototype.assertType=o(function(g){g instanceof p||u.apply(this,arguments)},"assertType"),n.prototype.compileSlice=o(function(g,m){this._emit("("),this._compileExpression(g.start,m),this._emit("),("),this._compileExpression(g.stop,m),this._emit("),("),this._compileExpression(g.step,m),this._emit(")")},"compileSlice"),s.prototype.parseAggregate=o(function(){var g=this,m=h(this.tokens);m.colno--,m.index--;try{return c.apply(this)}catch(I){var v=h(this.tokens),B=o(function(){return t._assign(g.tokens,v),I},"rethrow");t._assign(this.tokens,m),this.peeked=!1;var A=this.peekToken();if(A.type!==i.TOKEN_LEFT_BRACKET)throw B();this.nextToken();for(var V=new p(A.lineno,A.colno),H=!1,J=0;J<=V.fields.length&&!this.skip(i.TOKEN_RIGHT_BRACKET);J++){if(J===V.fields.length)if(H)this.fail("parseSlice: too many slice components",A.lineno,A.colno);else break;if(this.skip(i.TOKEN_COLON))H=!0;else{var ke=V.fields[J];V[ke]=this.parseExpression(),H=this.skip(i.TOKEN_COLON)||H}}if(!H)throw B();return new r.Array(A.lineno,A.colno,[V])}},"parseAggregate")}function d(_,g,m,v){_=_||[],g===null&&(g=v<0?_.length-1:0),m===null?m=v<0?-1:_.length:m<0&&(m+=_.length),g<0&&(g+=_.length);for(var B=[],A=g;!(A<0||A>_.length||v>0&&A>=m||v<0&&A<=m);A+=v)B.push(e.memberLookup(_,A));return B}o(d,"sliceLookup");function b(_,g){return Object.prototype.hasOwnProperty.call(_,g)}o(b,"hasOwnProp");var x={pop:o(function(g){if(g===void 0)return this.pop();if(g>=this.length||g<0)throw new Error("KeyError");return this.splice(g,1)},"pop"),append:o(function(g){return this.push(g)},"append"),remove:o(function(g){for(var m=0;m<this.length;m++)if(this[m]===g)return this.splice(m,1);throw new Error("ValueError")},"remove"),count:o(function(g){for(var m=0,v=0;v<this.length;v++)this[v]===g&&m++;return m},"count"),index:o(function(g){var m;if((m=this.indexOf(g))===-1)throw new Error("ValueError");return m},"index"),find:o(function(g){return this.indexOf(g)},"find"),insert:o(function(g,m){return this.splice(g,0,m)},"insert")},E={items:o(function(){return t._entries(this)},"items"),values:o(function(){return t._values(this)},"values"),keys:o(function(){return t.keys(this)},"keys"),get:o(function(g,m){var v=this[g];return v===void 0&&(v=m),v},"get"),has_key:o(function(g){return b(this,g)},"has_key"),pop:o(function(g,m){var v=this[g];if(v===void 0&&m!==void 0)v=m;else{if(v===void 0)throw new Error("KeyError");delete this[g]}return v},"pop"),popitem:o(function(){var g=t.keys(this);if(!g.length)throw new Error("KeyError");var m=g[0],v=this[m];return delete this[m],[m,v]},"popitem"),setdefault:o(function(g,m){return m===void 0&&(m=null),g in this||(this[g]=m),this[g]},"setdefault"),update:o(function(g){return t._assign(this,g),null},"update")};return E.iteritems=E.items,E.itervalues=E.values,E.iterkeys=E.keys,e.memberLookup=o(function(g,m,v){return arguments.length===4?d.apply(this,arguments):(g=g||{},t.isArray(g)&&b(x,m)?x[m].bind(g):t.isObject(g)&&b(E,m)?E[m].bind(g):l.apply(this,arguments))},"memberLookup"),f}o(qc,"installCompat");Es.exports=qc});var As=O((xh,Ls)=>{"use strict";var Ss=X(),Os=gr(),Ts=Os.Environment,ks=Os.Template,Uc=ct(),ce=fr(),mt=ws(),Vc=ut(),zc=rr(),Hc=zt(),Wc=Ee(),Gc=je(),$c=xs(),ae;function vt(e,t){t=t||{},Ss.isObject(e)&&(t=e,e=null);var n;return ce.FileSystemLoader?n=new ce.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):ce.WebLoader&&(n=new ce.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),ae=new Ts(n,t),t&&t.express&&ae.express(t.express),ae}o(vt,"configure");Ls.exports={Environment:Ts,Template:ks,Loader:Uc,FileSystemLoader:ce.FileSystemLoader,NodeResolveLoader:ce.NodeResolveLoader,PrecompiledLoader:ce.PrecompiledLoader,WebLoader:ce.WebLoader,compiler:Vc,parser:zc,lexer:Hc,runtime:Wc,lib:Ss,nodes:Gc,installJinjaCompat:$c,configure:vt,reset:o(function(){ae=void 0},"reset"),compile:o(function(t,n,s,r){return ae||vt(),new ks(t,n,s,r)},"compile"),render:o(function(t,n,s){return ae||vt(),ae.render(t,n,s)},"render"),renderString:o(function(t,n,s){return ae||vt(),ae.renderString(t,n,s)},"renderString"),precompile:mt?mt.precompile:void 0,precompileString:mt?mt.precompileString:void 0}});var Ns=wt(Cr(),1),yt=wt(cn(),1);var D=wt(As());var wr=class extends Error{static{o(this,"EleventyBaseError")}constructor(t,n){super(t),this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),n&&(this.originalError=n)}},gt=wr;var Er=class extends gt{static{o(this,"TemplateEngineConfigError")}},Me=class{static{o(this,"TemplateEngine")}#e;#t;#r;constructor(t,n){if(this.name=t,this.engineLib=null,this.cacheable=!1,!n)throw new Er("Missing `eleventyConfig` argument.");this.eleventyConfig=n}get dirs(){return this.eleventyConfig.directories}get inputDir(){return this.dirs.input}get includesDir(){return this.dirs.includes}get config(){if(this.eleventyConfig.constructor.name!=="TemplateConfig")throw new Error("Expecting a TemplateConfig instance.");return this.eleventyConfig.getConfig()}get benchmarks(){return this.#r||(this.#r={aggregate:this.config.benchmarkManager.get("Aggregate")}),this.#r}get engineManager(){return this.#t}set engineManager(t){this.#t=t}get extensionMap(){if(!this.#e)throw new Error("Internal error: missing `extensionMap` in TemplateEngine.");return this.#e}set extensionMap(t){this.#e=t}get extensions(){return this._extensions||(this._extensions=this.extensionMap.getExtensionsFromKey(this.name)),this._extensions}get extensionEntries(){return this._extensionEntries||(this._extensionEntries=this.extensionMap.getExtensionEntriesFromKey(this.name)),this._extensionEntries}getName(){return this.name}getIncludesDir(){return this.includesDir}setEngineLib(t){this.engineLib=t;for(let n of this.config.libraryAmendments[this.name]||[])n(t)}getEngineLib(){return this.engineLib}async _testRender(t,n){return(await this.compile(t))(n)}useJavaScriptImport(){return!1}needsToReadFileContents(){return!0}getExtraDataFromFile(){return{}}getCompileCacheKey(t,n){return{useCache:!0,key:n+t}}get defaultTemplateFileExtension(){return"html"}useLayouts(){return!0}permalinkNeedsCompilation(t){return this.needsCompilation()}needsCompilation(t){return!0}async compile(){throw new Error("compile() must be implemented by engine")}static shouldSpiderJavaScriptDependencies(){return!1}hasDependencies(t){return this.config.uses.getDependencies(t)!==!1}isFileRelevantTo(t,n){return this.config.uses.isFileRelevantTo(t,n)}};var Yc=["page","eleventy"];function xr(e,t={}){t=Object.assign({source:void 0,overwrite:!0,lazy:!1},t);for(let n of Yc)if(!(!t.overwrite&&e[n]))if(t.lazy){let s;typeof t.getter=="function"?s=o(()=>t.getter(n,t.source),"value"):s=o(()=>t.source?.[n],"value"),Object.defineProperty(e,n,{writable:!0,configurable:!0,enumerable:!0,value:s})}else{let s;typeof t.getter=="function"?s=t.getter(n,t.source):s=t.source?.[n],s&&(e[n]=s)}return e}o(xr,"augmentObject");function Cs(){if("withResolvers"in Promise)return Promise.withResolvers();let e,t;return{promise:new Promise((s,r)=>{e=s,t=r}),resolve:e,reject:t}}o(Cs,"withResolvers");var Jc=(0,Ns.default)("Eleventy:Nunjucks"),ie=class extends gt{static{o(this,"EleventyNunjucksError")}},_t=class e extends Me{static{o(this,"Nunjucks")}constructor(t,n){super(t,n),this.nunjucksEnvironmentOptions=this.config.nunjucksEnvironmentOptions||{dev:!0},this.nunjucksPrecompiledTemplates=this.config.nunjucksPrecompiledTemplates||{},this._usingPrecompiled=Object.keys(this.nunjucksPrecompiledTemplates).length>0,this.setLibrary(this.config.libraryOverrides.njk)}#e(){let t=new Set;return t.add(super.getIncludesDir()),t.add(yt.TemplatePath.getWorkingDir()),Array.from(t).filter(Boolean)}#t(t){if(t)this.njkEnv=t;else if(this._usingPrecompiled){let n=o(function(){},"NodePrecompiledLoader");n.prototype.getSource=s=>({src:{type:"code",obj:this.nunjucksPrecompiledTemplates[s]}}),this.njkEnv=new D.Environment(new n,this.nunjucksEnvironmentOptions)}else{let n=[];n.push(new D.FileSystemLoader(this.#e()));for(let s of this.config.nunjucksLoaders){let r=D.default.Loader.extend(s);n.push(new r)}this.njkEnv=new D.Environment(n,this.nunjucksEnvironmentOptions)}this.config.events.emit("eleventy.engine.njk",{nunjucks:D.default,environment:this.njkEnv})}setLibrary(t){this.#t(t),this.config.events.on("eleventy#templateModified",n=>{let s=yt.TemplatePath.normalizeOperatingSystemFilePath(yt.TemplatePath.absolutePath(n));for(let r of this.njkEnv.loaders){let i=r.pathsToNames[s];i&&(Jc("Match found in Nunjucks cache via templateModified for %o, clearing this entry",n),delete r.pathsToNames[s],delete r.cache[i])}}),this.setEngineLib(this.njkEnv),this.addFilters(this.config.nunjucksFilters),this.addFilters(this.config.nunjucksAsyncFilters,!0),this.addPairedShortcode("setAsync",function(n,s){return this.ctx[s]=n,""}),this.addCustomTags(this.config.nunjucksTags),this.addAllShortcodes(this.config.nunjucksShortcodes),this.addAllShortcodes(this.config.nunjucksAsyncShortcodes,!0),this.addAllPairedShortcodes(this.config.nunjucksPairedShortcodes),this.addAllPairedShortcodes(this.config.nunjucksAsyncPairedShortcodes,!0),this.addGlobals(this.config.nunjucksGlobals)}addFilters(t,n){for(let s in t)this.njkEnv.addFilter(s,e.wrapFilter(s,t[s]),n)}static wrapFilter(t,n){return function(...s){try{return xr(this,{source:this.ctx,lazy:!1}),n.call(this,...s)}catch(r){throw new ie(`Error in Nunjucks Filter \`${t}\`${this.page?` (${this.page.inputPath})`:""}`,r)}}}static normalizeContext(t){let n={};return t.ctx&&(n.ctx=t.ctx,n.env=t.env,xr(n,{source:t.ctx,lazy:!1})),n}addCustomTags(t){for(let n in t)this.addTag(n,t[n])}addTag(t,n){let s;if(typeof n=="function")s=n(D.default,this.njkEnv);else throw new Error("Nunjucks.addTag expects a callback function to be passed in: addTag(name, function(nunjucksEngine) {})");this.njkEnv.addExtension(t,s)}addGlobals(t){for(let n in t)this.addGlobal(n,t[n])}addGlobal(t,n){this.njkEnv.addGlobal(t,n)}addAllShortcodes(t,n=!1){for(let s in t)this.addShortcode(s,t[s],n)}addAllPairedShortcodes(t,n=!1){for(let s in t)this.addPairedShortcode(s,t[s],n)}_getShortcodeFn(t,n,s=!1){return o(function(){this.tags=[t],this.parse=function(i,a){let l,u=i.nextToken();return l=i.parseSignature(!0,!0),l.children.length===0&&l.addChild(new a.Literal(0,0,"")),i.advanceAfterBlockEnd(u.value),s?new a.CallExtensionAsync(this,"run",l):new a.CallExtension(this,"run",l)},this.run=function(...i){let a;s&&(a=i.pop());let[l,...u]=i;if(s){let c=n.call(e.normalizeContext(l),...u);c?.then||a(new ie(`Error with Nunjucks shortcode \`${t}\`: it was defined as asynchronous but was actually synchronous. This is important for Nunjucks.`)),c.then(function(f){a(null,new D.default.runtime.SafeString(""+f))},function(f){a(new ie(`Error with Nunjucks shortcode \`${t}\``,f))})}else try{let c=n.call(e.normalizeContext(l),...u);return new D.default.runtime.SafeString(""+c)}catch(c){throw new ie(`Error with Nunjucks shortcode \`${t}\``,c)}}},"ShortcodeFunction")}_getPairedShortcodeFn(t,n,s=!1){return o(function(){this.tags=[t],this.parse=function(i,a){var l=i.nextToken(),u=i.parseSignature(!0,!0);i.advanceAfterBlockEnd(l.value);var c=i.parseUntilBlocks("end"+t);return i.advanceAfterBlockEnd(),new a.CallExtensionAsync(this,"run",u,[c])},this.run=function(...i){let a=i.pop(),l=i.pop(),[u,...c]=i;l(function(f,h){if(f&&a(new ie(`Error with Nunjucks paired shortcode \`${t}\``,f)),s){let p=n.call(e.normalizeContext(u),h,...c);if(!p?.then)throw new ie(`Error with Nunjucks shortcode \`${t}\`: it was defined as asynchronous but was actually synchronous. This is important for Nunjucks.`);p.then(function(d){a(null,new D.default.runtime.SafeString(d))},function(d){a(new ie(`Error with Nunjucks paired shortcode \`${t}\``,d))})}else try{a(null,new D.default.runtime.SafeString(n.call(e.normalizeContext(u),h,...c)))}catch(p){a(new ie(`Error with Nunjucks paired shortcode \`${t}\``,p))}})}},"PairedShortcodeFunction")}addShortcode(t,n,s=!1){let r=this._getShortcodeFn(t,n,s);this.njkEnv.addExtension(t,new r)}addPairedShortcode(t,n,s=!1){let r=this._getPairedShortcodeFn(t,n,s);this.njkEnv.addExtension(t,new r)}permalinkNeedsCompilation(t){if(typeof t=="string")return this.needsCompilation(t)}needsCompilation(t){let n=this.njkEnv.opts.tags||{},s=n.blockStart||"{%",r=n.variableStart||"{{",i=n.variableStart||"{#";return t.indexOf(s)!==-1||t.indexOf(r)!==-1||t.indexOf(i)!==-1}_getParseExtensions(){if(this._parseExtensions)return this._parseExtensions;let t=[];for(let n in this.config.nunjucksTags){let s=this._getShortcodeFn(n,()=>{});t.push(new s)}for(let n in this.config.nunjucksShortcodes){let s=this._getShortcodeFn(n,()=>{});t.push(new s)}for(let n in this.config.nunjucksAsyncShortcodes){let s=this._getShortcodeFn(n,()=>{},!0);t.push(new s)}for(let n in this.config.nunjucksPairedShortcodes){let s=this._getPairedShortcodeFn(n,()=>{});t.push(new s)}for(let n in this.config.nunjucksAsyncPairedShortcodes){let s=this._getPairedShortcodeFn(n,()=>{},!0);t.push(new s)}return this._parseExtensions=t,t}parseForSymbols(t){if(!t)return[];let{parser:n,nodes:s}=D.default,r=n.parse(t,this._getParseExtensions());if(!r)return[];let i=t.split(`
`),a=r.findAll(s.Value),l=r.findAll(s.Symbol).map(c=>{let f=[c.value],h=-1;for(let p of a)h>-1?i[p.lineno].charAt(h)==="."?(f.push(p.value),h+=p.value.length+1):h=-1:p.lineno===c.lineno&&p.colno===c.colno&&p.value===c.value&&(h=c.colno+c.value.length);return f.join(".")});return Array.from(new Set(l))}async compile(t,n){let s;return this._usingPrecompiled?s=this.njkEnv.getTemplate(t,!0):!n||n==="njk"||n==="md"?s=new D.Template(t,this.njkEnv,null,!1):s=new D.Template(t,this.njkEnv,n,!1),function(r){let{promise:i,resolve:a,reject:l}=Cs();return s.render(r,(u,c)=>{u?l(u):a(c)}),i}}};export{_t as Nunjucks};
